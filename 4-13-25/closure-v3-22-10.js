(function() {
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return $jscomp.arrayIterator(a);throw Error(String(a)+" is not an iterable or ArrayLike");};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;
$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b,c){if(!c||null!=a){c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]}};
$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};
$jscomp.getConstructImplementation=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,d,e){c=b(c,d);e&&Reflect.setPrototypeOf(c,e.prototype);return c}}return function(c,d,e){void 0===e&&(e=c);e=$jscomp.objectCreate(e.prototype||Object.prototype);return Function.prototype.apply.call(c,e,d)||
e}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};
$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};
$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.getRestArguments=function(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(c,d){try{return b(c,d),!0}catch(e){return!1}}}return null},"es6","es5");
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(f,g){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",d=0,e=function(f){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(f||"")+"_"+d++,f)};return e},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(g){return g instanceof e?g:new e(function(h,k){h(g)})}if(a&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return a;b.prototype.asyncExecute=function(g){if(null==this.batch_){this.batch_=[];var h=this;this.asyncExecuteFunction(function(){h.executeBatch_()})}this.batch_.push(g)};
var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(g){d(g,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var g=this.batch_;this.batch_=[];for(var h=0;h<g.length;++h){var k=g[h];g[h]=null;try{k()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(g){this.asyncExecuteFunction(function(){throw g;})};var e=function(g){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var h=this.createResolveAndReject_();
try{g(h.resolve,h.reject)}catch(k){h.reject(k)}};e.prototype.createResolveAndReject_=function(){function g(l){return function(m){k||(k=!0,l.call(h,m))}}var h=this,k=!1;return{resolve:g(this.resolveTo_),reject:g(this.reject_)}};e.prototype.resolveTo_=function(g){if(g===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof e)this.settleSameAsPromise_(g);else{a:switch(typeof g){case "object":var h=null!=g;break a;case "function":h=!0;break a;default:h=!1}h?this.resolveToNonPromiseObj_(g):
this.fulfill_(g)}};e.prototype.resolveToNonPromiseObj_=function(g){var h=void 0;try{h=g.then}catch(k){this.reject_(k);return}"function"==typeof h?this.settleSameAsThenable_(h,g):this.fulfill_(g)};e.prototype.reject_=function(g){this.settle_(2,g)};e.prototype.fulfill_=function(g){this.settle_(1,g)};e.prototype.settle_=function(g,h){if(0!=this.state_)throw Error("Cannot settle("+g+", "+h+"): Promise already settled in state"+this.state_);this.state_=g;this.result_=h;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};e.prototype.scheduleUnhandledRejectionCheck_=function(){var g=this;d(function(){if(g.notifyUnhandledRejection_()){var h=$jscomp.global.console;"undefined"!==typeof h&&h.error(g.result_)}},1)};e.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var g=$jscomp.global.CustomEvent,h=$jscomp.global.Event,k=$jscomp.global.dispatchEvent;if("undefined"===typeof k)return!0;"function"===typeof g?g=new g("unhandledrejection",{cancelable:!0}):
"function"===typeof h?g=new h("unhandledrejection",{cancelable:!0}):(g=$jscomp.global.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g));g.promise=this;g.reason=this.result_;return k(g)};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var g=0;g<this.onSettledCallbacks_.length;++g)f.asyncExecute(this.onSettledCallbacks_[g]);this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(g){var h=this.createResolveAndReject_();
g.callWhenSettled_(h.resolve,h.reject)};e.prototype.settleSameAsThenable_=function(g,h){var k=this.createResolveAndReject_();try{g.call(h,k.resolve,k.reject)}catch(l){k.reject(l)}};e.prototype.then=function(g,h){function k(r,n){return"function"==typeof r?function(p){try{l(r(p))}catch(t){m(t)}}:n}var l,m,q=new e(function(r,n){l=r;m=n});this.callWhenSettled_(k(g,l),k(h,m));return q};e.prototype.catch=function(g){return this.then(void 0,g)};e.prototype.callWhenSettled_=function(g,h){function k(){switch(l.state_){case 1:g(l.result_);
break;case 2:h(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?f.asyncExecute(k):this.onSettledCallbacks_.push(k);this.isRejectionHandled_=!0};e.resolve=c;e.reject=function(g){return new e(function(h,k){k(g)})};e.race=function(g){return new e(function(h,k){for(var l=$jscomp.makeIterator(g),m=l.next();!m.done;m=l.next())c(m.value).callWhenSettled_(h,k)})};e.all=function(g){var h=$jscomp.makeIterator(g),k=h.next();return k.done?c([]):new e(function(l,
m){function q(p){return function(t){r[p]=t;n--;0==n&&l(r)}}var r=[],n=0;do r.push(void 0),n++,c(k.value).callWhenSettled_(q(r.length-1),m),k=h.next();while(!k.done)})};return e},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),q=new a([[l,2],[m,3]]);if(2!=q.get(l)||3!=q.get(m))return!1;q.delete(l);q.set(m,4);return!q.has(l)&&4==q.get(m)}catch(r){return!1}}function c(){}function d(l){var m=typeof l;return"object"===m&&null!==l||"function"===m}function e(l){if(!$jscomp.owns(l,g)){var m=new c;$jscomp.defineProperty(l,g,{value:m})}}function f(l){if(!$jscomp.ISOLATE_POLYFILLS){var m=Object[l];m&&(Object[l]=
function(q){if(q instanceof c)return q;Object.isExtensible(q)&&e(q);return m(q)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0,k=function(l){this.id_=(h+=Math.random()+1).toString();if(l){l=$jscomp.makeIterator(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}};k.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");
e(l);if(!$jscomp.owns(l,g))throw Error("WeakMap key fail: "+l);l[g][this.id_]=m;return this};k.prototype.get=function(l){return d(l)&&$jscomp.owns(l,g)?l[g][this.id_]:void 0};k.prototype.has=function(l){return d(l)&&$jscomp.owns(l,g)&&$jscomp.owns(l[g],this.id_)};k.prototype.delete=function(l){return d(l)&&$jscomp.owns(l,g)&&$jscomp.owns(l[g],this.id_)?delete l[g][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var k=Object.seal({x:4}),l=new a($jscomp.makeIterator([[k,"s"]]));if("s"!=l.get(k)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var m=l.entries(),q=m.next();if(q.done||q.value[0]!=k||"s"!=q.value[1])return!1;q=m.next();return q.done||4!=q.value[0].x||"t"!=q.value[1]||!m.next().done?!1:!0}catch(r){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=new WeakMap,d=function(k){this[0]={};this[1]=g();this.size=0;if(k){k=$jscomp.makeIterator(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}};d.prototype.set=function(k,l){k=0===k?0:k;var m=e(this,k);m.list||(m.list=this[0][m.id]=[]);m.entry?m.entry.value=l:(m.entry={next:this[1],previous:this[1].previous,head:this[1],key:k,value:l},m.list.push(m.entry),this[1].previous.next=
m.entry,this[1].previous=m.entry,this.size++);return this};d.prototype.delete=function(k){k=e(this,k);return k.entry&&k.list?(k.list.splice(k.index,1),k.list.length||delete this[0][k.id],k.entry.previous.next=k.entry.next,k.entry.next.previous=k.entry.previous,k.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this[0]={};this[1]=this[1].previous=g();this.size=0};d.prototype.has=function(k){return!!e(this,k).entry};d.prototype.get=function(k){return(k=e(this,k).entry)&&k.value};d.prototype.entries=
function(){return f(this,function(k){return[k.key,k.value]})};d.prototype.keys=function(){return f(this,function(k){return k.key})};d.prototype.values=function(){return f(this,function(k){return k.value})};d.prototype.forEach=function(k,l){for(var m=this.entries(),q;!(q=m.next()).done;)q=q.value,k.call(l,q[1],q[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(k,l){var m=l&&typeof l;"object"==m||"function"==m?c.has(l)?m=c.get(l):(m=""+ ++h,c.set(l,m)):m="p_"+l;var q=k[0][m];
if(q&&$jscomp.owns(k[0],m))for(k=0;k<q.length;k++){var r=q[k];if(l!==l&&r.key!==r.key||l===r.key)return{id:m,list:q,index:k,entry:r}}return{id:m,list:q,index:-1,entry:void 0}},f=function(k,l){var m=k[1];return $jscomp.iteratorPrototype(function(){if(m){for(;m.head!=k[1];)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})},g=function(){var k={};return k.previous=k.next=k.head=k},h=0;return d},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(b){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}},"es6","es3");$jscomp.stringPadding=function(a,b){a=void 0!==a?String(a):" ";return 0<b&&a?a.repeat(Math.ceil(b/a.length)).substring(0,b):""};
$jscomp.polyfill("String.prototype.padEnd",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,null,"padStart");return d+$jscomp.stringPadding(c,b-d.length)}},"es8","es3");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}},"es6","es3");$jscomp.typedArrayFill=function(a){return a?a:Array.prototype.fill};
$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}},"es9","es3");
$jscomp.polyfill("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)$jscomp.owns(b,d)&&c.push([d,b[d]]);return c}},"es8","es3");$jscomp.polyfill("String.raw",function(a){return a?a:function(b,c){if(null==b)throw new TypeError("Cannot convert undefined or null to object");for(var d=b.raw,e=d.length,f="",g=0;g<e;++g)f+=d[g],g+1<e&&g+1<arguments.length&&(f+=String(arguments[g+1]));return f}},"es6","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===c&&(c=d.length);c=Math.max(0,Math.min(c|0,d.length));for(var e=b.length;0<e&&0<c;)if(d[--c]!=b[--e])return!1;return 0>=e}},"es6","es3");$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(c,b-d.length)+d}},"es8","es3");
$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new a($jscomp.makeIterator([d]));if(!e.has(d)||1!=e.size||e.add(d)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var f=e.entries(),g=f.next();if(g.done||g.value[0]!=d||g.value[1]!=d)return!1;g=f.next();return g.done||g.value[0]==d||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:f.next().done}catch(h){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=function(d){this.map_=new Map;if(d){d=$jscomp.makeIterator(d);for(var e;!(e=d.next()).done;)this.add(e.value)}this.size=this.map_.size};c.prototype.add=function(d){d=0===d?0:d;this.map_.set(d,d);this.size=this.map_.size;return this};c.prototype.delete=function(d){d=this.map_.delete(d);this.size=this.map_.size;return d};c.prototype.clear=function(){this.map_.clear();this.size=0};c.prototype.has=
function(d){return this.map_.has(d)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(d,e){var f=this;this.map_.forEach(function(g){return d.call(e,g,g,f)})};return c},"es6","es3");
$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return[b,c]})}},"es6","es3");
$jscomp.polyfill("Object.fromEntries",function(a){return a?a:function(b){var c={};if(!(Symbol.iterator in b))throw new TypeError(""+b+" is not iterable");b=b[Symbol.iterator].call(b);for(var d=b.next();!d.done;d=b.next()){d=d.value;if(Object(d)!==d)throw new TypeError("iterable for fromEntries should yield objects");c[d[0]]=d[1]}return c}},"es_2019","es3");
$jscomp.polyfill("String.prototype.replaceAll",function(a){return a?a:function(b,c){if(b instanceof RegExp&&!b.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return b instanceof RegExp?this.replace(b,c):this.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c)}},"es_2021","es3");
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es8","es3");
$jscomp.polyfill("Math.imul",function(a){return a?a:function(b,c){b=Number(b);c=Number(c);var d=b&65535,e=c&65535;return d*e+((b>>>16&65535)*e+d*(c>>>16&65535)<<16>>>0)|0}},"es6","es3");$jscomp.polyfill("Array.prototype.flat",function(a){return a?a:function(b){b=void 0===b?1:b;var c=[];Array.prototype.forEach.call(this,function(d){Array.isArray(d)&&0<b?(d=Array.prototype.flat.call(d,b-1),c.push.apply(c,d)):c.push(d)});return c}},"es9","es5");
var Crossout=function(a){a||(a={});this.thickness=a.thickness||2;this.color=a.color||"#000000";this.rounded=a.rounded||!1;this.extension=a.extension||0;this.reverseDirection=a.reverseDirection||!1;this.crossout()};Crossout.prototype.getAttributes=function(a){a=a.replace(/[\{\}]/g,"");a=a.split(",");""===a[0]&&(a=[]);for(var b={},c=0;c<a.length;c++){var d=a[c].split(":")[0].trim(),e=a[c].split(":")[1].trim();b[d]=e}return b};
Crossout.prototype.addLine=function(a,b){var c=b.thickness||this.thickness,d=b.color||this.color,e="true"==b.rounded||this.rounded,f=parseInt(b.extension,10)||this.extension;b=180/Math.PI*("true"==b.reverseDirection||this.reverseDirection?.5:-.5)*Math.atan(a.offsetHeight/a.offsetWidth);var g=document.createElement("span");g.style.height=c+"px";g.style.width="calc(100% + "+f+"px)";g.style.display="inline-block";g.style.position="absolute";g.style.top=c/2+"px";g.style.bottom="0";g.style.left=f/2*-1+
"px";g.style.margin="auto";g.style.backgroundColor=d;g.style.transform="rotate("+b+"deg)";e&&(g.style.borderRadius=c/2+"px");a.appendChild(g)};Crossout.prototype.crossout=function(){for(var a=document.getElementsByTagName("span"),b=0;b<a.length;b++){var c=a[b];if(null!==c.getAttribute("data-crossedout")){c.style.position="relative";var d=this.getAttributes(c.getAttribute("data-crossedout"));this.addLine(c,d)}}};var gNumErrors=0;
function gTryDebug(a,b){b=void 0===b?!0:b;try{return a()}catch(f){try{gNumErrors++,1==gNumErrors&&(api.submitError(f),setTimeout(function(){return gNumErrors=0},1E3))}catch(g){var c,d,e;((null==(c=window.api)?0:c.isAlpha)||(null==(d=window.api)?0:d.isDev)||(null==(e=window.api)?0:e.isTest))&&alert("Error logging error!\n"+g.message)}1==gNumErrors&&$("#debugReload").addEventListener("click",function(g){g.preventDefault();api.reload("debugReload")});a="";f instanceof Error?(a=f.stack,a.includes(f.message)||
(a=f.message+"\n"+a)):a=f.toString();if(b||api.isAlpha||location.pathname.includes("/src"))throw gPopups.isPopupOpen($("#debug"))||($("#debugLog").textContent=a,$("#debugEmail").textContent="hello@squaredle.app",a.includes("Browser is outdated")||gPopups.show($("#debug"))),f;console.error(f)}}
function gTryDebugAsync(a){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.setCatchFinallyBlocks(2),c.yield(a(),4);if(2!=c.nextAddress)return c.leaveTryBlock(0);b=c.enterCatchBlock();gTryDebug(function(){throw b;});c.jumpToEnd()})};var Router=function(){};Router.prototype.init=function(){var a=this;this.onHashChange();window.addEventListener("hashchange",function(b){return a.onHashChange()})};
Router.prototype.onHashChange=function(){var a=this.getHashValues();a.has("resetHash")?onReady(function(){return gUserManager.showResetPassword()}):a.has("privacy")?gPopups.show($("#privacy")):a.has("premiumSignup")?gPopups.show($("#premiumSignup")):a.has("settings")?gPopups.show($("#settings")):a.has("billing")||a.has("manageBilling")?gPremium.manageBillingDetails():a.has("archive")?gArchive.show():a.has("specials")?gSpecialPuzzleManager.show():a.has("help")?gHelpPage.show():a.has("feedback")&&gHelpPage.showFeedback()};
Router.prototype.removeHash=function(){gTryDebug(function(){"function"==typeof history.replaceState?history.replaceState(null,"",location.pathname.replace(RegExp("^//*"),"/")+location.search):location.hash="#"})};Router.prototype.setHash=function(a){gTryDebug(function(){"function"==typeof history.replaceState?history.replaceState(null,"",location.pathname.replace(RegExp("^//*"),"/")+location.search+"#"+a):location.hash="#"+a})};Router.prototype.getQueryParam=function(a){return gTryDebug(function(){return(new URL(location.href)).searchParams.get(a)})};
Router.prototype.pushQueryParam=function(a,b){gTryDebug(function(){var c=new URL(location.href);c.searchParams.set(a,b);location.href=c.href})};Router.prototype.removeQueryParam=function(a){gTryDebug(function(){var b=new URL(location.href);b.searchParams.delete(a);location.href=b.href})};Router.prototype.removeQueryParamWithoutRefresh=function(a){gTryDebug(function(){var b=new URL(location.href);b.searchParams.delete(a);window.history.replaceState({},"",b.href)})};
Router.prototype.updateQueryParams=function(a,b,c){c=void 0===c?"":c;gTryDebug(function(){for(var d=new URL(location.href),e=$jscomp.makeIterator(b),f=e.next();!f.done;f=e.next())d.searchParams.delete(f.value);e=$jscomp.makeIterator(Object.getOwnPropertyNames(a));for(f=e.next();!f.done;f=e.next())f=f.value,d.searchParams.set(f,a[f]);var g;d.hash=null!=(g=c)?g:"";location.href=d.href})};
Router.prototype.getHashValues=function(){return location.hash.slice(1).split("&").reduce(function(a,b){b=b.split("=");decodeURIComponent(b[0]);1==b.length?a.set(b[0],!0):a.set(b[0],decodeURIComponent(b[1]));return a},new Map)};Router.prototype.getResetHash=function(){return this.getHashValues().get("resetHash")};var gRouter=new Router;var Configs={squaredle:{game:"squaredle",showTutorial:!0,darkMode:!1,clueLength:1},bee:{game:"bee",showTutorial:!1,darkMode:!1,clueLength:2}},Config=(new URL(location.href)).pathname.startsWith("/bee")?Configs.bee:Configs.squaredle;function gtagTryCatch(){try{"event"==arguments[0]&&40<=arguments[1].length&&console.warn("Event name too long for GA:",arguments[1]),window.gtag.apply(window.gtag,arguments)}catch(a){console.error(a)}};var Strings={"%player":"Squaredler","%puzzle":"Squaredle"};var gVersion="v3.22.10",VersionNumber=function(a){a=a.match(/v?(\d+)(?:\.(\d+)?)(?:\.(\d+))?([^ .]*)/);null==a?(this.build=this.minor=this.major=0,this.buildIteration=""):(this.major=parseInt(a[1],10),this.minor=parseInt(a[2],10)||0,this.build=parseInt(a[3],10)||0,this.buildIteration=a[4])};VersionNumber.prototype.isNewerThan=function(a){return this.major!=a.major?this.major>a.major:this.minor!=a.minor?this.minor>a.minor:this.build>a.build};
VersionNumber.prototype.isAtLeast=function(a){return this.major!=a.major?this.major>a.major:this.minor!=a.minor?this.minor>a.minor:this.build>=a.build};VersionNumber.prototype.toString=function(){return"v"+this.major+"."+this.minor+"."+this.build+this.buildIteration};VersionNumber.getHtmlVersion=function(){var a=document.querySelector("#version");return a?new VersionNumber(a.textContent):null};
document.addEventListener("DOMContentLoaded",function(){var a=VersionNumber.getHtmlVersion();if(a){var b=new VersionNumber(gVersion),c="squaredle-lastVersion"+(api.isStage?"-stage":api.isAlpha?"-alpha":api.isBeta?"-beta":""),d=localStorage.getItem(c);d&&(new VersionNumber(d)).isNewerThan(b)&&($("#cacheUsed").hidden=!1,gRouter.getQueryParam("prevVersion")!=d&&(new URL(location.href),gRouter.pushQueryParam("prevVersion",d)));b.isNewerThan(a)?!d||b.isNewerThan(new VersionNumber(d))?(gtagTryCatch("event",
"version_mismatch"),localStorage.setItem(c,gVersion),api.reload("versionMismatch")):(console.error("Latest version is "+gVersion+", but HTML version is "+a),gtagTryCatch("event","version_mismatch_unfixable")):localStorage.setItem(c,gVersion)}});var domReady=new Promise(function(a,b){window.addEventListener("DOMContentLoaded",function(){return a()})}),readyPromises=[domReady];function onReady(a){Promise.all(readyPromises).then(a)}function $(a){var b=document.querySelector(a);assert(b,"Element not found: "+a);return b}function cloneTemplate(a){a=$("#"+a);assert(a instanceof HTMLTemplateElement);a=a.content.cloneNode(!0).firstElementChild;assert(a,"Template has no child");return a}
function $$(a){return Array.from(document.querySelectorAll(a))}Object.defineProperty(SVGElement.prototype,"hidden",{get:function(){return"undefined"==typeof this._hidden?!1:this._hidden},set:function(a){(this._hidden=a)?this.setAttribute("hidden",""):this.removeAttribute("hidden")}});function assert(a,b){if(!a)throw Error("Assertion failed"+(b?": "+b:""));return a}function assertNotReached(a){assert(!1,a||"Unreachable code hit")}
function assertInstanceOf(a,b,c){a instanceof b||assertNotReached(c||"Value "+a+" is a "+a.constructor.name+", not a "+(b.name||typeof b));return a}function assertEquals(a,b,c){assert(a===b,"Assertion failed: "+a+" === "+b+(c?": "+c:""))}
function assertDeepEquals(a,b,c){assert(typeof a==typeof b);if("object"!=typeof a)assertEquals(a,b,c);else{assert(Array.isArray(a),"assertDeepEquals only supports arrays");assert(Array.isArray(b),"assertDeepEquals only supports arrays");for(var d=0;d<Math.max(a.length,b.length);d++){var e=null;try{assertDeepEquals(a[d],b[d],c)}catch(f){e=f}null!==e&&assertNotReached("Expected "+a+" to deep-equal "+b+" ("+(e.message+")")+(c?": "+c:""))}}}
function expectEq(a,b){if(a===b)return!0;console.error("Expected "+b+", got "+a);console.trace();return!1}String.prototype.replaceAll||(String.prototype.replaceAll=function(a,b){return"[object regexp]"===Object.prototype.toString.call(a).toLowerCase()?this.replace(a,b):this.replace(new RegExp(a,"g"),b)});
var Logger=function(a,b,c){b=void 0===b?Logger.Level.NONE:b;c=void 0===c?[]:c;this.name=a;location.pathname.includes("/src")||(new URL(location.href)).searchParams.has("log")?this.consoleLevel=b:this.consoleLevel=Logger.Level.NONE;this.sgrParams=c.concat(4)};Logger.prototype.getLogger=function(){return this.consoleLevel==Logger.Level.NONE?function(){}:this.consoleLevel.bind(console,"\u001b["+this.sgrParams.join(";")+"m"+this.name.padEnd(8," ")+"\u001b[m")};
Logger.Level={NONE:function(){},LOG:console.log,ERROR:console.error,WARN:console.warn,INFO:console.info};
var gLog={ads:(new Logger("Ads",Logger.Level.LOG,[94,1])).getLogger()},firstPathSegment=location.pathname.split("/").filter(Boolean)[0],environment="src"==firstPathSegment||["devsquaredle.test","localhost"].includes(location.hostname)?"dev":"prod",channel=["dev","alpha","beta","stage"].includes(firstPathSegment)?firstPathSegment:"stable",gEnv={environment:environment,channel:channel,isBot:"Applebot Baiduspider Cookiebot Discordbot DuckDuckBot Googlebot LinkedInBot Pinterest Slackbot TelegramBot Twitterbot WhatsApp YandexBot bingbot facebookexternalhit".split(" ").some(function(a){return navigator.userAgent.includes(a)}),isLiterallyBeta:"beta"==
firstPathSegment};location.pathname.includes("/src")&&(document.title="[dev] "+document.title);var JSCompiler_temp_const$jscomp$0=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,src$util$classdecl$var0=function(){var a=Error.call(this,"Timeout hit!");this.message=a.message;"stack"in a&&(this.stack=a.stack);this.name="TimeoutError"};$jscomp.inherits(src$util$classdecl$var0,Error);
var Util={leftPad:function(a,b,c){"number"==typeof a&&(a=a.toString());assert(1==b.length);return a.length>=c?a:b.repeat(c-a.length)+a},average:function(a){return Math.round(a.reduce(function(b,c){return b+c},0)/a.length)},setIntervalImmediate:function(a,b){setTimeout(a);return setInterval(a,b)},editDistance:function(a,b){for(var c=Array(a.length+1),d=0;d<=a.length;d++)c[d]=Array(b.length+1),c[d].fill(0);for(d=0;d<a.length;d++)c[d+1][0]=d+1;for(d=0;d<b.length;d++)c[0][d+1]=d+1;for(d=0;d<b.length;d++)for(var e=
0;e<a.length;e++){var f=0;a[e]!=b[d]&&(f=1);c[e+1][d+1]=Math.min(c[e][d+1]+1,c[e+1][d]+1,c[e][d]+f)}return c[a.length][b.length]},removeFromArray:function(a,b){b=a.indexOf(b);-1!=b&&a.splice(b,1)},getCookie:function(a){return(a=document.cookie.match(new RegExp("(^|;\\s*)"+a+"=([^;]*)")))?decodeURIComponent(a[2]):null},getCookieObj:function(a){var b=Util.getCookie(a);if(b)try{var c=JSON.parse(b);assert("object"==typeof c);return c}catch(d){console.error('Unable to parse JSON for cookie "'+a+'"',d)}},
setCookie:function(a,b,c){c=void 0===c?null:c;b=encodeURIComponent(b);c||(c=new Date,c.setDate(c.getDate()+400));document.cookie=a+"="+b+"; expires="+c.toUTCString()+"; path=/; domain=."+location.host+";"},setCookieObj:function(a,b){Util.setCookie(a,JSON.stringify(b))},getKeyValCookie:function(a){a=Util.getCookie(a);if(!a)return null;a=new URLSearchParams(a);return new Map(a)},setKeyValCookie:function(a,b){b=new URLSearchParams(b);Util.setCookie(a,b.toString())},deleteCookie:function(a){document.cookie=
a+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; ";document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=."+location.host+";"},submitEmail:function(a,b,c,d,e,f){var g=assertInstanceOf(b,HTMLButtonElement);if(g.disabled)return Promise.reject("Form submission in progress");d.hidden=!0;var h=assertInstanceOf(a,HTMLInputElement),k=h.value.trim();a=255>=k.length&&null!=k.match(/^[^@]+@[^@]+\.[^@]+$/);c.hidden=!1;if(!a)return c.textContent="Please enter a valid email address.",
c.classList.add("error"),Promise.reject("Invalid email address");c.textContent=e;c.classList.remove("error");c.hidden=!1;g.disabled=!0;return f(k).then(function(){c.hidden=!0;d.hidden=!1;h.value="";return k}).catch(function(l){c.classList.add("error");c.textContent="string"==typeof l?l:"Network or server error. Please try again.";throw l;}).finally(function(){g.disabled=!1})},getUuid:function(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():(new Date).getTime().toString()+
Math.random().toString().slice(2,18)},confirm:function(a,b,c){return new Promise(function(d,e){gPopups.onShowConfirm();var f=gPopups.curPopup();f?f.classList.add("blur"):$("#outerContainer").classList.add("blur");$("#confirmAccept").hidden=!1;e=a.includes("<");$("#confirmText").innerHTML=(e?"":"<p>")+a+(e?"":"</p>");$("#confirmAccept").textContent=b;$("#confirmCancel").textContent=c;$("#confirm").hidden=!1;$("#confirm").scrollTop=0;var g=function(m){$("#confirm").hidden=!0;gPopups.onCloseConfirm();
f?f.classList.remove("blur"):$("#outerContainer").classList.remove("blur");$("#confirmAccept").removeEventListener("click",h);$("#confirmCancel").removeEventListener("click",k);window.removeEventListener("keydown",l);d(m)},h=function(m){return g(!0)};$("#confirmAccept").addEventListener("click",h);var k=function(m){return g(!1)};$("#confirmCancel").addEventListener("click",k);var l=function(m){if("Esc"==m.key||"Escape"==m.key)m.preventDefault(),g(!1)};window.addEventListener("keydown",l)})},alert:function(a){gPopups.onShowConfirm();
var b=gPopups.curPopup();b?b.classList.add("blur"):$("#outerContainer").classList.add("blur");var c=a.includes("<");$("#confirmText").innerHTML=(c?"":"<p>")+a+(c?"":"</p>");$("#confirmAccept").hidden=!0;$("#confirmCancel").textContent="Close";$("#confirm").hidden=!1;$("#confirm").scrollTop=0;$("#confirmCancel").focus();var d=function(){$("#confirm").hidden=!0;gPopups.onCloseConfirm();b?b.classList.remove("blur"):$("#outerContainer").classList.remove("blur");$("#confirmCancel").removeEventListener("click",
d);window.removeEventListener("keydown",e);window.removeEventListener("click",f)};$("#confirmCancel").addEventListener("click",d);var e=function(g){if("Esc"==g.key||"Escape"==g.key)g.preventDefault(),d()};window.addEventListener("keydown",e);var f=function(g){$("#confirm").contains(g.target)||(g.preventDefault(),d())};setTimeout(function(){return window.addEventListener("click",f)})},isIOs:JSCompiler_temp_const$jscomp$0,encodeEntities:function(a){return a.replace(/&/g,"&amp;").replace(Util.SURROGATE_PAIR_REGEXP,
function(b){var c=b.charCodeAt(0);b=b.charCodeAt(1);return"&#"+(1024*(c-55296)+(b-56320)+65536)+";"}).replace(Util.NON_ALPHANUMERIC_REGEXP,function(b){return"&#"+b.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},createSvg:function(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg");b&&c.classList.add("inline-icon");b=document.createElementNS("http://www.w3.org/2000/svg","use");b.setAttribute("href","#"+a);c.appendChild(b);return c},addStars:function(a,b){for(var c=
0;c<Math.floor(b);c++)a.appendChild(Util.createSvg("icon-star",!0));b!=Math.floor(b)&&(c=Util.createSvg("icon-star",!0),c.classList.add("halfStar"),a.appendChild(c));for(c=0;c<5-Math.ceil(b);c++){var d=Util.createSvg("icon-star",!0);d.style.fill="none";a.appendChild(d)}},loadScriptAsync:function(a,b,c,d){b=void 0===b?"anonymous":b;c=void 0===c?{}:c;d=void 0===d?null:d;return new Promise(function(e,f){var g=document.createElement("script");"string"==typeof d&&g.setAttribute("id",d);g.setAttribute("async",
"");g.setAttribute("defer","");"string"==typeof b&&g.setAttribute("crossorigin",b);if(c)for(var h=$jscomp.makeIterator(Object.entries(c)),k=h.next();!k.done;k=h.next()){var l=$jscomp.makeIterator(k.value);k=l.next().value;l=l.next().value;g.setAttribute("data-"+k,l)}g.setAttribute("src",a);g.addEventListener("load",function(m){return e(m)});g.addEventListener("error",function(m){return f(m)});document.body.appendChild(g)})},TimeoutError:src$util$classdecl$var0,promiseWithTimeout:function(a,b){return new Promise(function(c,
d){var e=setTimeout(function(){e=null;d(new Util.TimeoutError)},b);a.then(function(f){e&&(clearTimeout(e),e=null,c(f))},function(f){e&&(clearTimeout(e),e=null,d(f))})})},SURROGATE_PAIR_REGEXP:/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP:/([^#-~| |!])/g};
if(location.href.includes("speedy")||"about:srcdoc"==location.href&&!location.href.includes("interactive")){var oldSetTimeout=window.setTimeout.bind(window),oldSetInterval=window.setInterval.bind(window);window.setTimeout=function(a,b){"number"!=typeof b&&(b=0);return oldSetTimeout(a,Math.round(b/10))};window.setInterval=function(a,b){assert("number"==typeof b);return oldSetInterval(a,Math.round(b/10))}};var $jscomp$templatelit$m176116618$3=$jscomp.createTemplateTagFirstArgWithRaw(["https?:/?/?"],["https?:\\/?\\/?"]),$jscomp$templatelit$m176116618$4=$jscomp.createTemplateTagFirstArgWithRaw(["(?:[A-Za-z0-9-_]{1,63}.)+[A-Za-z]{2,63}"],["(?:[A-Za-z0-9-_]{1,63}\\.)+[A-Za-z]{2,63}"]),$jscomp$templatelit$m176116618$5=$jscomp.createTemplateTagFirstArgWithRaw(["(?:(?:\b|/)[a-zA-Z0-9@:%_+#?&=.~/-]*[a-zA-Z0-9@:%_+#?&=~/-])*"],["(?:(?:\\b|/)[a-zA-Z0-9@:%_\\+#?&=.~/-]*[a-zA-Z0-9@:%_\\+#?&=~/-])*"]),$jscomp$templatelit$m176116618$6=
$jscomp.createTemplateTagFirstArg(["","","",""]),$jscomp$templatelit$m176116618$7=$jscomp.createTemplateTagFirstArg(["(!)?"]),$jscomp$templatelit$m176116618$8=$jscomp.createTemplateTagFirstArgWithRaw(["["],["\\["]),$jscomp$templatelit$m176116618$9=$jscomp.createTemplateTagFirstArgWithRaw(["([^]]*)"],["([^\\]]*)"]),$jscomp$templatelit$m176116618$10=$jscomp.createTemplateTagFirstArgWithRaw(["]"],["\\]"]),$jscomp$templatelit$m176116618$11=$jscomp.createTemplateTagFirstArgWithRaw(["("],["\\("]),$jscomp$templatelit$m176116618$12=
$jscomp.createTemplateTagFirstArg(["(",")?(",")?(",")"]),$jscomp$templatelit$m176116618$13=$jscomp.createTemplateTagFirstArgWithRaw(['(?:s"([^"]*)")?'],['(?:\\s"([^"]*)")?']),$jscomp$templatelit$m176116618$14=$jscomp.createTemplateTagFirstArgWithRaw([")"],["\\)"]),MarkdownLite=function(){};
MarkdownLite.toHtml=function(a){a=a.replace(/\n\n---+\n\n/g,'<hr style="margin: 1em 0">').replace(/\n/g,"<br>").replace(/\*\*([^*]*)\*\*/g,function(q,r){return"<strong>"+r+"</strong>"}).replace(/\*([^*]*)\*/g,function(q,r){return"<em>"+r+"</em>"});var b=String.raw($jscomp$templatelit$m176116618$3),c=String.raw($jscomp$templatelit$m176116618$4),d=String.raw($jscomp$templatelit$m176116618$5);b=new RegExp(String.raw($jscomp$templatelit$m176116618$6,b,c,d)+"|"+String.raw($jscomp$templatelit$m176116618$7)+
String.raw($jscomp$templatelit$m176116618$8)+String.raw($jscomp$templatelit$m176116618$9)+String.raw($jscomp$templatelit$m176116618$10)+String.raw($jscomp$templatelit$m176116618$11)+String.raw($jscomp$templatelit$m176116618$12,b,c,d)+String.raw($jscomp$templatelit$m176116618$13)+String.raw($jscomp$templatelit$m176116618$14),"g");c="";for(var e=0;null!==(d=b.exec(a));)if(c+=a.slice(e,d.index),e=b.lastIndex,"string"==typeof d[1]||"string"==typeof d[2]){var f=$jscomp.makeIterator([d[3],d[4],d[5]]),g=
f.next().value,h=f.next().value;f=f.next().value;console.log({full:d[0],protocol:g,domain:h,remainder:f});!g&&h&&(g="https://");var k=void 0,l=void 0,m=void 0;g=""+(null!=(k=g)?k:"")+(null!=(l=h)?l:"")+(null!=(m=f)?m:"");"string"==typeof d[1]?(h=void 0,c+='<div style="text-align: center"><img src="'+(g+'" alt="'+d[2]+'" title="')+((null!=(h=d[6])?h:"")+'" style="max-width: 100%"></div>')):c+='<a href="'+g+'" target="_blank">'+d[2]+"</a>"}else c+='<a href="'+d[0]+'" target="_blank">'+d[0]+"</a>";return c+=
a.slice(e)};var DomUtil={createToggle:function(a,b,c){b=void 0===b?!1:b;var d=document.createElement("div");d.innerHTML='\n      <label class="toggle">\n          <span class="switch">\n            <input type="checkbox" '+(b?"checked":"")+'>\n            <span class="slider"></span>\n          </span>\n        '+a+"\n      </label>";a=d.querySelector("input");c&&a.addEventListener("change",c);return d}};var RateLimit=function(){this._rateLimits=new Map};RateLimit.prototype.willRun=function(a,b){var c=this._rateLimits.get(a);c||(c={start:0,ms:1E3*b},this._rateLimits.set(a,c));a=(new Date).getTime();return a-c.start>=c.ms?(c.start=a,!0):!1};var DateUtil={kHour:36E5,_dateStrToDate:function(a){a=new Date((new Date(a)).getTime()+864E5);assert("Invalid Date"!=a.toString(),"Invalid date parameter");return a},origTodayDateStr:"",origYesterdayDateStr:"",_todayDateStr:null,_yesterdayDateStr:null,_nextBoardTime:null,_nextBoardTimeFromServer:null,_timesFromServerPromise:null,_shouldAllowHints:location.href.includes("forceHints"),_offset:(new Date).getTime()>=(new Date("2025-03-09 03:00:00 GMT-0700")).getTime()&&(new Date).getTime()<(new Date("2025-11-02 02:00:00 GMT-0800")).getTime()?
"GMT-0700":"GMT-0800",get shouldAllowHints(){return"mitmh"!=gPuzzleManager.puzzleKey&&(this._shouldAllowHints||!gPuzzleManager.isTodayPuzzle&&!gPuzzleManager.isWeeklyPuzzle)},get nextBoardTime(){return this._nextBoardTimeFromServer||this._nextBoardTime},_nowForTest:null,now:function(){return DateUtil._nowForTest?DateUtil._nowForTest:new Date},setNowForTest:function(a){DateUtil._nowForTest=a},getTodayStr:function(){return assert(this._todayDateStr)},getYesterdayStr:function(){return this._yesterdayDateStr},
setDates:function(a,b){this.origTodayDateStr||(this.origTodayDateStr=a,this.origYesterdayDateStr=b);this._todayDateStr=a;this._yesterdayDateStr=b},getStrForDaysPast:function(a){a=DateUtil._dateStrToDate(this.origTodayDateStr).getTime()-24*a*DateUtil.kHour;return DateUtil._getDayStrForTime(new Date(a-3*DateUtil.kHour))},numDaysBetween:function(a,b){a=new Date(a);return Math.round(((new Date(b)).getTime()-a.getTime())/1E3/3600/24)},_getDayStrForTime:function(a){var b=null,c={timeZone:"America/Los_Angeles",
year:"numeric",month:"2-digit",day:"2-digit"};try{b=(new Intl.DateTimeFormat("en-US",c)).formatToParts(a)}catch(d){c.timeZone="UTC",b=(new Intl.DateTimeFormat("en-US",c)).formatToParts(new Date(a.getTime()-5*DateUtil.kHour))}a=b.find(function(d){return"year"==d.type}).value;2==a.length&&(a="20"+a);c=b.find(function(d){return"month"==d.type}).value;b=b.find(function(d){return"day"==d.type}).value;return a+"/"+c+"/"+b},timeToNextBoard:function(){var a=DateUtil.now();this._timesFromServerPromise||this.getSecondsToNextBoardFromServer();
var b=this._nextBoardTimeFromServer||this._nextBoardTime;b||(this._nextBoardTime=b=new Date(DateUtil.getStrForDaysPast(-1)+(" 03:00:00 "+this._offset)));a=Math.round((b.getTime()-a.getTime())/1E3);return 0>=a?{hours:0,minutes:0,seconds:0,totalSeconds:0}:{hours:Math.floor(a/60/60),minutes:Math.floor(a/60%60),seconds:a%60,totalSeconds:a}},getSecondsToNextBoardFromServer:function(){return this._getTimesFromServer().then(function(a){return a.secondsToNextPuzzle})},getSecondsToHints:function(){var a=this;
return this._getTimesFromServer().then(function(b){return b.secondsToHints}).catch(function(){return a._getLocalSecondsToHints()})},getNewPuzzleTimeStrWithPeriod:function(){var a="";try{var b=new Date(DateUtil.origTodayDateStr+(" 03:00:00 "+this._offset));b.setDate(b.getDate()+1);a=(new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"numeric",timeZoneName:"short"})).format(b)}catch(c){a="3am Pacific"}a.endsWith(".")||(a+=".");return a},getHintsAvailableTimeStr:function(){try{var a=
new Date(DateUtil.origTodayDateStr+(" 15:00:00 "+this._offset));return(new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"numeric",timeZoneName:"short"})).format(a)}catch(b){return"3pm Pacific"}},dayOfWeek:function(a){return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[a.getDay()]},shortDayOfWeek:function(a){a=new Date(a.getTime());a.getTime()>=(new Date("2025-03-10 12:00:00")).getTime()&&a.setDate(a.getDate()-1);return"Sun Mon Tue Wed Thu Fri Sat".split(" ")[a.getDay()]},
isDst:function(a){a=new Date(a+(" 03:00:00 "+this._offset));var b=(new Date(a.getFullYear(),0,1)).getTimezoneOffset(),c=(new Date(a.getFullYear(),6,1)).getTimezoneOffset();return Math.max(b,c)!=a.getTimezoneOffset()},fixDstPuzzleDate:function(a){if("2025/03/10">a)return a;var b=new Date(a);b.setDate(b.getDate()-1);a=b.getFullYear();var c=String(b.getMonth()+1).padStart(2,"0");b=String(b.getDate()).padStart(2,"0");return a+"/"+c+"/"+b},_getTimesFromServer:function(){var a=this;if(!this._timesFromServerPromise)if(Store.needsTutorial())this._timesFromServerPromise=
new Promise(function(){});else{var b=0;this._timesFromServerPromise=api.getTimes(DateUtil.getTodayStr()).then(function(c){a._nextBoardTimeFromServer=new Date((new Date).getTime()+1E3*c.data.secondsToNextPuzzle);b=c.data.secondsToHints;return c.data}).catch(function(c){b=a._getLocalSecondsToHints();throw c;}).finally(function(){if(!gPuzzleManager.isWeeklyPuzzle)if(0>=b)a._shouldAllowHints=!0;else{setTimeout(function(){a._shouldAllowHints=!0},1E3*b);var c=(new Date).getTime(),d=setInterval(function(){a._shouldAllowHints?
clearInterval(d):(new Date).getTime()-c>=1E3*b&&(clearInterval(d),a._shouldAllowHints=!0)},1E4)}})}return this._timesFromServerPromise},_getLocalSecondsToHints:function(){var a=new Date;if(DateUtil._getDayStrForTime(a)>DateUtil.getTodayStr())return 0;var b=new Date(DateUtil.getTodayStr()+(" 15:00:00 "+this._offset));a=Math.round((b.getTime()-a.getTime())/1E3);return Math.max(0,a)}};var BaseStore=function(){this.isTest=location.href.includes("test.html")||"about:srcdoc"==location.href;this.userPrefix=(new URL(location.href)).searchParams.get("userPrefix");this._prefix=""};BaseStore.prototype.keys=function(){return Object.getOwnPropertyNames(localStorage)};BaseStore.prototype.getInteger=function(a){return(a=this._get(a))?parseInt(a,10):null};BaseStore.prototype.setInteger=function(a,b){this._set(a,b.toString())};
BaseStore.prototype.getBoolean=function(a){return(a=this._get(a))?"true"==a:null};BaseStore.prototype.setBoolean=function(a,b){this._set(a,b.toString())};BaseStore.prototype.getString=function(a){a=this._get(a);return"string"==typeof a?a:null};BaseStore.prototype.setString=function(a,b){this._set(a,b)};BaseStore.prototype.getItem=function(a){return this._get(a)};BaseStore.prototype.setItem=function(a,b){localStorage.setItem(this._prefix+a,b)};
BaseStore.prototype.getObject=function(a){var b=this._get(a);if(b)try{var c=JSON.parse(b);if("object"==typeof c)return c}catch(d){console.error("Failed to parse object for key: "+a,d)}return null};BaseStore.prototype.setObject=function(a,b){this._set(a,JSON.stringify(b))};BaseStore.prototype._get=function(a){return localStorage.getItem(this._prefix+a)};BaseStore.prototype._set=function(a,b){localStorage.setItem(this._prefix+a,b)};
BaseStore.prototype.delete=function(a){localStorage.removeItem(this._prefix+a)};BaseStore.prototype._delete=function(a){localStorage.removeItem(this._prefix+a)};BaseStore.prototype.dateToDateStr=function(a){var b=a.getFullYear(),c=Util.leftPad(a.getMonth()+1,"0",2);a=Util.leftPad(a.getDate(),"0",2);return b+"/"+c+"/"+a};
var GlobalStoreSingleton=function(){BaseStore.call(this);this._prefix=this.userPrefix?this.userPrefix+"-":this.isTest?"test-":"";this._prefix+="squaredle-";if("guest"==this.userPrefix)for(var a=$jscomp.makeIterator(this.keys().filter(function(c){return c.startsWith("guest")})),b=a.next();!b.done;b=a.next())localStorage.removeItem(b.value);this._cachedFavorites=null};$jscomp.inherits(GlobalStoreSingleton,BaseStore);GlobalStoreSingleton.prototype.hasOpenedLeaderboards=function(){return"true"==this._get("hasOpenedLeaderboards")};
GlobalStoreSingleton.prototype.setHasOpenedLeaderboards=function(){this._set("hasOpenedLeaderboards","true")};GlobalStoreSingleton.prototype.isBetaAllowed=function(){return"true"==this._get("isBetaAllowed")||location.href.includes("allowBeta")};GlobalStoreSingleton.prototype.setIsBetaAllowed=function(a){this._set("isBetaAllowed",a.toString())};GlobalStoreSingleton.prototype.useBeta=function(){return"true"==this._get("useBeta")};
GlobalStoreSingleton.prototype.setUseBeta=function(a){this._set("useBeta",a.toString())};GlobalStoreSingleton.prototype.getUuid=function(){return this._get("uuid")};GlobalStoreSingleton.prototype.setUuid=function(a){this._set("uuid",a)};GlobalStoreSingleton.prototype.getUserId=function(){var a=this._get("userId");return null==a?null:parseInt(a,10)};GlobalStoreSingleton.prototype.setUserId=function(a){this._set("userId",a.toString())};GlobalStoreSingleton.prototype.getName=function(){return this._get("name")};
GlobalStoreSingleton.prototype.setName=function(a){this._set("name",a)};GlobalStoreSingleton.prototype.getEmail=function(){return this._get("email")};GlobalStoreSingleton.prototype.setEmail=function(a){this._set("email",a)};GlobalStoreSingleton.prototype.getFavorites=function(){if(!this._cachedFavorites){var a=this._get("favoriteUserIds");a=a?JSON.parse(a):null;Array.isArray(a)?this._cachedFavorites=new Set(a):this._cachedFavorites=new Set}return this._cachedFavorites};
GlobalStoreSingleton.prototype.addFavorite=function(a){"string"==typeof a&&(a=parseInt(a,10));var b=this.getFavorites();b.add(a);this._set("favoriteUserIds",JSON.stringify(Array.from(b)));return b};GlobalStoreSingleton.prototype.removeFavorite=function(a){"string"==typeof a&&(a=parseInt(a,10));var b=this.getFavorites();b.delete(a);this._set("favoriteUserIds",JSON.stringify(Array.from(b)));return b};
GlobalStoreSingleton.prototype.setFavorites=function(a){this._cachedFavorites=new Set(a);this._set("favoriteUserIds",JSON.stringify(a))};GlobalStoreSingleton.prototype.showedBonusWordDialog=function(){return"true"==this._get("showedBonusWordDialog")};GlobalStoreSingleton.prototype.setShowedBonusWordDialog=function(){this._set("showedBonusWordDialog","true")};GlobalStoreSingleton.prototype.showedInappropriateDialog=function(){return"true"==this._get("showedInappropriateDialog")};
GlobalStoreSingleton.prototype.setShowedInappropriateDialog=function(){this._set("showedInappropriateDialog","true")};GlobalStoreSingleton.prototype.showedProperNounDialog=function(){return"true"==this._get("showedProperNounDialog")};GlobalStoreSingleton.prototype.setShowedProperNounDialog=function(){this._set("showedProperNounDialog","true")};
var GameStore=function(a){BaseStore.call(this);this._prefix=this.userPrefix?this.userPrefix+"-":this.isTest?"test-":"";this._prefix+=a+"-";this._savedForTest=void 0;this.game=a};$jscomp.inherits(GameStore,BaseStore);GameStore.prototype.init=function(){var a=this;setTimeout(function(){return a._syncDeletedSolutions()},2E3)};GameStore.prototype.hasAnyEntries=function(){for(var a=$jscomp.makeIterator(this.keys()),b=a.next();!b.done;b=a.next())if(b.value.startsWith(this._prefix))return!0;return!1};
GameStore.prototype.hasPlayedPuzzle=function(a){return null!=localStorage.getItem(this._prefix+this._solutionKey(a))};GameStore.prototype.getSolutionForCurPuzzle=function(a){return this.getSolutionForKey(a||null,gPuzzleManager.puzzleKey,gBeta.useBetaPuzzle)};GameStore.prototype.getSolutionForYesterday=function(a){var b=gPuzzleManager.getYesterdayDateStr();return b?this.getSolutionForKey(a,b):null};
GameStore.prototype.saveSolutionForCurPuzzle=function(a){this.saveSolutionForKey(a,gPuzzleManager.puzzleKey,gBeta.useBetaPuzzle)};GameStore.prototype.updateSolutionMs=function(a){var b=this.getSolutionForCurPuzzle();b.ms=Math.max(a.ms,b.ms);this.saveSolutionForCurPuzzle(b)};
GameStore.prototype.saveSolutionForKey=function(a,b,c){this._set(this._solutionKey(b,c),JSON.stringify({puzzleVersion:a.puzzle?a.puzzle.version:null,words:Array.from(a.words),obscureWords:Array.from(a.obscureWords),nonWordCount:a.nonWordCount,hints:{sort:a.hints.sort,firstLetters:a.hints.firstLetters},everEnabledHints:a.everEnabledHints,ms:a.ms,shared:a.shared,revealsUsed:a.revealsUsed,rotations:a.rotations}))};GameStore.prototype.deleteSolutionForToday=function(){this.deleteSolution(gPuzzleManager.puzzleKey)};
GameStore.prototype.deleteSolution=function(a){this._delete(this._solutionKey(a,gBeta.useBetaPuzzle))};
GameStore.prototype.getStats=function(){for(var a="Su Mo Tu We Th Fr Sa".split(" "),b=this.getPastStats(),c=new Map,d=$jscomp.makeIterator(this._getSerializedSolutions()),e=d.next();!e.done;e=d.next()){var f=$jscomp.makeIterator(e.value);e=f.next().value;f=f.next().value;f=this._deserializeSolution(null,f);(0<f.words.size||0<f.obscureWords.size||0<f.nonWordCount)&&c.set(e,f)}c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next())e=$jscomp.makeIterator(d.value),d=e.next().value,e=e.next().value,
b.has(d)?(f=b.get(d),f.score=Math.max(f.score,e.score),f.wordCount=Math.max(f.wordCount,e.words.size),f.optionalWordCount=Math.max(f.optionalWordCount,e.obscureWords.size),f.nonWordCount=Math.max(f.nonWordCount,e.nonWordCount),"2023/01/30"==d?f.ms=e.ms:"undefined"==typeof f.ms?f.ms=e.ms:"undefined"!=typeof e.ms&&(f.ms=Math.max(f.ms,e.ms))):b.set(d,{puzzleDate:d,score:e.score,wordCount:e.words.size,optionalWordCount:e.obscureWords.size,nonWordCount:e.nonWordCount,ms:e.ms});var g=Array.from(b.keys());
g.sort().reverse();d=c=!0;e=DateUtil.getTodayStr();for(var h=f=0,k=0,l=0,m=0,q=[],r=0;7>r;r++){var n=DateUtil.getStrForDaysPast(r);n=a[(new Date(DateUtil.fixDstPuzzleDate(n))).getDay()];q.push({weekday:n,pct:0})}a=$jscomp.makeIterator(g);for(g=a.next();!g.done;g=a.next())if(g=g.value,r=b.get(g),n=gPuzzleManager.puzzleStats.get(g)){l++;r=Math.min(100,r.score/n.maxScore*100);n=g;if("2023/01/30"==g){var p=this.getSolutionForKey(null,"5star");p&&(p=Math.min(100,p.score/584*100),p>r&&(n="5star",r=p))}k+=
r;100==r&&m++;p=DateUtil.numDaysBetween(g,DateUtil.origTodayDateStr);0<=p&&6>=p&&(q[p].pct=r);g==DateUtil.origTodayDateStr||c&&1==DateUtil.numDaysBetween(g,e)||"2022/04/16"==g&&"2022/04/18"==e||"2022/07/30"==g&&"2022/08/01"==e||"2022/10/31"==g&&"2022/11/02"==e||"2023/03/10"==g&&"2023/03/12"==e||"2023/01/30"==g&&"5star"==n||"2023/03/31"==g&&"2023/04/02"==e||"2024/03/31"==g&&"2024/04/02"==e||"2024/04/22"==g&&"2024/04/24"==e||"2024/04/21"==g&&"2024/04/24"==e||"2024/04/21"==g&&"2024/04/23"==e||"2024/02/28"==
g&&"2024/03/01"==e||"2025/03/07"==g&&"2025/03/09"==e?(f++,"2023/03/10"==g&&"2023/03/12"==e&&f++,d&&(100==r||g!=DateUtil.origTodayDateStr&&("2022/04/17"==g||"2022/07/31"==g||"2023/03/11"==g||"2024/04/23"==g||"2024/04/22"==g)?(h++,"2023/03/10"==g&&"2023/03/12"==e&&h++):g!=DateUtil.origTodayDateStr&&"2022/04/17"!=g&&"2022/07/31"!=g&&"2023/03/11"!=g&&"2023/04/01"!=g&&"2024/02/29"!=g&&"2024/04/01"!=g&&"2024/04/22"!=g&&"2024/04/23"!=g&&"2025/03/07"!=g&&"2025/03/08"!=g&&"2025/03/09"!=g&&"2025/03/10"!=g&&
"2025/03/11"!=g&&"2025/03/12"!=g&&(d=!1)),e=g):d=c=!1}else console.warn("No puzzle found for key: "+g);return{numPuzzles:l,numPuzzlesSolved:m,avgPct:0<l?Math.floor(k/l):0,playStreak:f,solveStreak:h,last7Days:q.reverse(),stats:b}};
GameStore.prototype.getArchiveStats=function(){var a=this.getPastStats(),b=new Map,c=new Set,d=new Set;a=$jscomp.makeIterator(a.entries());for(var e=a.next();!e.done;e=a.next()){var f=$jscomp.makeIterator(e.value);e=f.next().value;f=f.next().value;b.set(e,f.score);d.add(e)}a=$jscomp.makeIterator(this._getSerializedSolutions());for(e=a.next();!e.done;e=a.next()){f=$jscomp.makeIterator(e.value);e=f.next().value;f=f.next().value;f=this._deserializeSolution(null,f);d.delete(e);var g=b.get(e)||0;b.set(e,
Math.max(g,f.score));g>f.score&&c.add(e)}return{scores:b,missingPartialSolutionDays:c,missingEntireSolutionDays:d}};GameStore.prototype.clearForTest=function(){if("undefined"==typeof this._savedForTest){this._savedForTest=new Map;for(var a=$jscomp.makeIterator(this.keys()),b=a.next();!b.done;b=a.next())b=b.value,this._savedForTest.set(b,localStorage.getItem(b))}localStorage.clear()};
GameStore.prototype.restoreAfterTest=function(){assert(this._savedForTest);localStorage.clear();for(var a=$jscomp.makeIterator(this._savedForTest.entries()),b=a.next();!b.done;b=a.next())b=b.value,localStorage.setItem(b[0],b[1])};
GameStore.prototype.backUp=function(){for(var a=[],b=$jscomp.makeIterator(this.keys()),c=b.next();!c.done;c=b.next())c=c.value,c.startsWith("backup-"+this._prefix)&&a.push(c);a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())localStorage.removeItem(b.value);a=[];b=$jscomp.makeIterator(this.keys());for(c=b.next();!c.done;c=b.next())c=c.value,c.startsWith(this._prefix)&&a.push(c);a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())b=b.value,console.log("Backing up "+b),localStorage.setItem("backup-"+
b,assert(localStorage.getItem(b)))};
GameStore.prototype.restoreFromBackup=function(){for(var a=[],b=$jscomp.makeIterator(this.keys()),c=b.next();!c.done;c=b.next())c=c.value,c.startsWith(this._prefix)&&a.push(c);a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())localStorage.removeItem(b.value);a=[];b=$jscomp.makeIterator(this.keys());for(c=b.next();!c.done;c=b.next())c=c.value,c.startsWith("backup-"+this._prefix)&&a.push(c);a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())b=b.value,console.log("Restoring "+b),localStorage.setItem(b.slice(7),
assert(localStorage.getItem(b))),localStorage.removeItem(b)};GameStore.prototype.hasRotated=function(){return"true"==this._get("hasRotated")};GameStore.prototype.setHasRotated=function(){this._set("hasRotated","true")};GameStore.prototype.lastBetaPuzzleAdvertised=function(){var a=this._get("lastBetaPuzzleAdvertised");return null==a?-1:parseInt(a,10)};GameStore.prototype.setLastBetaPuzzleAdvertised=function(a){this._set("lastBetaPuzzleAdvertised",a.toString())};
GameStore.prototype.needsTutorial=function(){return Configs[this.game].showTutorial&&null==this._get("didTutorial")&&!location.href.includes("skipTutorial")&&!navigator.userAgent.includes("Googlebot")&&!navigator.userAgent.includes("bingbot")&&!navigator.userAgent.includes("BingPreview")};GameStore.prototype.getTutorialValue=function(){return this._get("didTutorial")};GameStore.prototype.setDidTutorial=function(a){!1!==a?this._set("didTutorial","true"):this._delete("didTutorial")};
GameStore.prototype.setSkippedTutorial=function(){this._set("didTutorial","skipped")};GameStore.prototype.hasEnabledHints=function(){return"true"==this._get("hasEnabledHints")};GameStore.prototype.setHasEnabledHints=function(){this._set("hasEnabledHints","true")};GameStore.prototype.isDarkMode=function(){var a=this._get("darkMode");return location.search.toLowerCase().includes("darkmode=1")?!0:Configs[this.game].darkMode?"false"!=a:"true"==a};
GameStore.prototype.setIsDarkMode=function(a){this._set("darkMode",a.toString())};GameStore.prototype.isRightHanded=function(){return"false"!=this._get("rightHanded")};GameStore.prototype.setIsRightHanded=function(a){this._set("rightHanded",a.toString())};GameStore.prototype.isLargerUsageCounts=function(){return"true"==this._get("largerUsageCounts")};GameStore.prototype.setIsLargerUsageCounts=function(a){this._set("largerUsageCounts",a.toString())};
GameStore.prototype.showTimer=function(){return"true"==this._get("showTimer")};GameStore.prototype.setShowTimer=function(a){this._set("showTimer",a.toString())};GameStore.prototype.setRotate45Enabled=function(a){this._set("rotate45Enabled",a.toString())};GameStore.prototype.isRotate45Enabled=function(){return this.isPremium()?"false"!=this._get("rotate45Enabled"):!1};GameStore.prototype.setLevelUpFasterEnabled=function(a){this._set("levelUpFasterEnabled",a.toString())};
GameStore.prototype.isLevelUpFasterEnabled=function(){return this.isPremium()?"false"!=this._get("levelUpFasterEnabled"):!1};GameStore.prototype.hideCompletedPuzzles=function(){return"true"==this._get("hideCompletedPuzzles")};GameStore.prototype.setHideCompletedPuzzles=function(a){this._set("hideCompletedPuzzles",a.toString())};GameStore.prototype.getThemeColor=function(){return this._get("themeColor")||"red"};GameStore.prototype.setThemeColor=function(a){this._set("themeColor",a)};
GameStore.prototype.getThemeFont=function(){return this._get("themeFont")||"roboto"};GameStore.prototype.setThemeFont=function(a){this._set("themeFont",a)};GameStore.prototype.isPermaClosed=function(a){return"true"==this._get("isPermaClosed-"+a)};GameStore.prototype.setPermaClosed=function(a){this._set("isPermaClosed-"+a,"true")};GameStore.prototype.showedPremiumOnLaunch=function(){return"true"==this._get("showedPremiumOnLaunch")};
GameStore.prototype.setShowedPremiumOnLaunch=function(){this._set("showedPremiumOnLaunch","true")};GameStore.prototype.showedFeatureMessage=function(){return"true"==this._get("showedFeatureMessage15")||"15"==Util.getCookie("sfm")};GameStore.prototype.setShowedFeatureMessage=function(){this._set("showedFeatureMessage15","true");Util.setCookie("sfm","15")};GameStore.prototype.unsetShowedFeatureMessage=function(){this._delete("showedFeatureMessage15")};
GameStore.prototype.showedBrowserWarning=function(){return"true"==this._get("showedBrowserWarning")};GameStore.prototype.setShowedBrowserWarning=function(){this._set("showedBrowserWarning","true")};GameStore.prototype.showedDstDialog=function(){return"true"==this._get("showedDstDialog2")};GameStore.prototype.setShowedDstDialog=function(){this._set("showedDstDialog2","true")};GameStore.prototype.showedJoinCommunity=function(){return"true"==this._get("showedJoinCommunity")};
GameStore.prototype.setShowedJoinCommunity=function(){this._set("showedJoinCommunity","true")};GameStore.prototype.showedShop=function(){return"true"==this._get("showedShop")};GameStore.prototype.setShowedShop=function(){this._set("showedShop","true")};GameStore.prototype.showedBetaPuzzleDialog=function(){return"true"==this._get("showedBetaPuzzleDialog")};GameStore.prototype.setShowedBetaPuzzleDialog=function(){this._set("showedBetaPuzzleDialog","true")};
GameStore.prototype.showedWaffleDialog=function(){return"true"==this._get("showedWaffleDialog")};GameStore.prototype.setShowedWaffleDialog=function(){this._set("showedWaffleDialog","true")};GameStore.prototype.isDejaVu=function(){return"true"==this._get("dejaVu")};GameStore.prototype.setDejaVu=function(){this._set("dejaVu","true")};GameStore.prototype.clearDejaVu=function(){this._delete("dejaVu")};GameStore.prototype.suppressInstallPrompt=function(){return"true"==this._get("suppressInstallPrompt")};
GameStore.prototype.setSuppressInstallPrompt=function(){this._set("suppressInstallPrompt","true")};GameStore.prototype.isPremium=function(){return"true"==this._get("isPremium")};GameStore.prototype.setIsPremium=function(a){this._set("isPremium",a.toString());Util.setCookie("sq-premium",a?"1":"0")};
GameStore.prototype.hasPlayedDays=function(a){for(var b=0,c=$jscomp.makeIterator(this._getSerializedSolutions()),d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value);var e=d.next().value;d.next();e<=DateUtil.getTodayStr()&&b++;if(b>=a)return!0}c=$jscomp.makeIterator(this.keys());for(d=c.next();!d.done;d=c.next())if(d.value.match(this._prefix+"stats-(\\d{4}/\\d{2}/\\d{2})$")&&b++,b>=a)return!0;return!1};
GameStore.prototype.numDaysPlayed=function(){for(var a=0,b=$jscomp.makeIterator(this._getSerializedSolutions()),c=b.next();!c.done;c=b.next()){c=$jscomp.makeIterator(c.value);var d=c.next().value;c.next();d<=DateUtil.getTodayStr()&&a++}b=$jscomp.makeIterator(this.keys());for(c=b.next();!c.done;c=b.next())c.value.match(this._prefix+"stats-(\\d{4}/\\d{2}/\\d{2})$")&&a++;return a};GameStore.prototype.getLeaderboardSort=function(){return this._get("leaderboardSort")||"bonus words"};
GameStore.prototype.setLeaderboardSort=function(a){this._set("leaderboardSort",a)};GameStore.prototype.getReferrerUrl=function(){return this._get("referrerUrl")};GameStore.prototype.setReferrerUrl=function(a){return this._set("referrerUrl",a)};GameStore.prototype.migrateBetaSolutionToKey=function(a,b){a="beta-"+a+"-solution";var c=this._get(a);c&&(this._set(this._solutionKey(b),c),this._delete(a),alert("Heads up! You already started this puzzle when it was in beta.\n\nYour score will be on the leaderboard 2 hours after the puzzle was released."))};
GameStore.prototype.getPastStats=function(){for(var a=new Map,b=new RegExp("^"+this._prefix+"stats-(\\d{4}/\\d{2}/\\d{2})$"),c=$jscomp.makeIterator(this.keys()),d=c.next();!d.done;d=c.next()){var e=d.value;(d=e.match(b))&&"2022/03/05"!=d[1]&&(e=localStorage.getItem(e),assert("string"==typeof e),e=JSON.parse(e),(0<e.wordCount||0<e.optionalWordCount||0<e.nonWordCount)&&a.set(d[1],e))}return a};
GameStore.prototype.mergePastStats=function(a){var b=this.getPastStats();a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=b.get(c.puzzleDate);!d||d.puzzleDate.endsWith("-weekly")&&!c.puzzleDate.endsWith("-weekly")?b.set(c.puzzleDate,c):(d.score=Math.max(d.score,c.score),d.wordCount=Math.max(d.wordCount,c.wordCount),d.optionalWordCount=Math.max(d.optionalWordCount,c.optionalWordCount),d.nonWordCount=Math.max(d.nonWordCount,c.nonWordCount))}b=$jscomp.makeIterator(b.entries());
for(a=b.next();!a.done;a=b.next())c=$jscomp.makeIterator(a.value),a=c.next().value,c=c.next().value,this._set("stats-"+a,JSON.stringify(c))};GameStore.prototype.resetExplainers=function(){for(var a=[],b=$jscomp.makeIterator(this.keys()),c=b.next();!c.done;c=b.next())c=c.value,c.startsWith(this._prefix+"isPermaClosed-")&&a.push(c);a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())localStorage.removeItem(b.value)};
GameStore.prototype.resetMessages=function(){for(var a=$jscomp.makeIterator(["showedPremiumOnLaunch","showedFeatureMessage15","showedJoinCommunity","suppress1kDayInstructions"]),b=a.next();!b.done;b=a.next())this._delete(b.value)};GameStore.prototype._solutionKey=function(a,b){return b?"beta-"+gPuzzleManager.getBetaPuzzle().id+"-solution":a+"-solution"};
GameStore.prototype._deserializeSolution=function(a,b){b=JSON.parse(b);assert("object"==typeof b);assert(Array.isArray(b.words));assert(Array.isArray(b.obscureWords));var c=new Solution(a,new Set(b.words),new Set(b.obscureWords));"number"==typeof b.nonWordCount&&(c.nonWordCount=b.nonWordCount);"object"==typeof b.hints&&(c.hints.sort=b.hints.sort,c.hints.firstLetters=b.hints.firstLetters);["boolean","number"].includes(typeof b.everEnabledHints)?c.everEnabledHints=!!b.everEnabledHints||c.everEnabledHints:
c.everEnabledHints=!0;c.ms="number"==typeof b.ms?b.ms:null;"boolean"==typeof b.shared&&(c.shared=b.shared);"number"==typeof b.revealsUsed&&100>b.revealsUsed&&(c.revealsUsed=b.revealsUsed);c.rotations="number"==typeof b.rotations?b.rotations:null;"number"==typeof b.changeId&&(c.changeId=b.changeId);a&&476==a.id&&!Store.getBoolean("fixed476")&&(0<c.revealsUsed&&(c.revealsUsed=0),0==c.words.length&&this.saveSolutionForCurPuzzle(c),this.setBoolean("fixed476",!0));a&&475==a.id&&58==c.words.size&&1==c.nonWordCount&&
(c.nonWordCount=0,Store.saveSolutionForCurPuzzle(c));return c};GameStore.prototype.getSolutionForKey=function(a,b,c){b=this._get(this._solutionKey(b,c));return null==b?new Solution(a):this._deserializeSolution(a,b)};GameStore.prototype.getReloadCount=function(){return parseInt(this._get("reloadCount"),10)||0};GameStore.prototype.setReloadCount=function(a){this._set("reloadCount",a.toString())};
GameStore.prototype.getDebugData=function(){var a={};a.solutions=Object.fromEntries(this._getSerializedSolutions());a.pastStats=Object.fromEntries(this.getPastStats());a.syncDeletedSolutionsComplete=this._get("syncDeletedSolutionsComplete");return a};
GameStore.prototype._getSerializedSolutions=function(){for(var a=new Map,b=$jscomp.makeIterator(this.keys()),c=b.next();!c.done;c=b.next()){c=c.value;var d=c.match(new RegExp("^"+this._prefix+"(\\d{4}/\\d{2}/\\d{2})-solution"));if(d&&"2022/03/05"!=d[1]){var e=localStorage.getItem(c);"string"!=typeof e?api.uploadDebugData({key:c,valueType:typeof e,value:e}):a.set(d[1],e)}}return a};
GameStore.prototype._syncDeletedSolutions=function(){var a=this;if(!this._get("syncDeletedSolutionsComplete")){for(var b=new Set,c=new Set,d=$jscomp.makeIterator(this.keys()),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.match(new RegExp(this._prefix+"(\\d{4}/\\d{2}/\\d{2})-solution"));f?b.add(f[1]):(e=e.match(new RegExp(this._prefix+"stats-(\\d{4}/\\d{2}/\\d{2})$")))&&"2022/03/30"<=e[1]&&c.add(e[1])}b=$jscomp.makeIterator(b);for(d=b.next();!d.done;d=b.next())c.delete(d.value);var g=0,h=Array.from(c).sort(),
k=function(){api.getSolution(h[g]).then(function(l){if(l){var m=new Solution(null,new Set(l.words),new Set(l.optionalWords));assert(!m.mergeWithApiSolution(l))}g++;g<h.length?setTimeout(k,500+500*Math.random()):a._set("syncDeletedSolutionsComplete","true")})};0<h.length&&k()}};var GlobalStore=new GlobalStoreSingleton,Store=new GameStore(Config.game);"bee"==Config.game&&Store.setBoolean("alpha-bee",!0);var reportedSizeVal=Util.getCookie("reportedSize");
reportedSizeVal&&"1"!==reportedSizeVal||onReady(function(){return setTimeout(function(){Util.setCookie("reportedSize","2");for(var a=0,b=0,c=[],d=/^yolla/i,e=localStorage.length,f=0;f<e;f++){var g=localStorage.key(f),h=2*(g.length+localStorage[g].length);a+=h;d.test(g)&&(b+=h,c.push(g))}c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next())localStorage.removeItem(d.value);api.uploadDebugData({preLength:a,postLength:a-b,diff:b,version:gVersion})},2E3)});var useFakeApi=location.href.includes("fakeApi")||"about:srcdoc"==location.href||location.href.includes("test.html"),origFetch=window.fetch.bind(window);function log(a){api.isAlpha&&console.debug(a)}function warn(a){console.warn(a);var b=document.querySelector("#devErrors");b&&("No errors detected"==b.value&&(b.value=""),b.value+=a+"\n\n")}
function logServerError(a,b){warn("Server error: status code = "+a+" for "+b);"undefined"!=typeof gtag&&gtagTryCatch("event","api_error",{type:"server_error",status_code:a})}function logApiError(a){a instanceof SyntaxError?console.error("JSON error parsing API response",a):console.error("Unexpected error in API response",a);"undefined"!=typeof gtag&&gtagTryCatch("event","api_error",{type:"api_error",syntax_error:a instanceof SyntaxError})}
function logNetworkError(a){warn("Network error: "+a);"undefined"!=typeof gtag&&gtagTryCatch("event","network_error")}var CxnError=function(a){var b=Error.call(this,"HTTP response: "+a);this.message=b.message;"stack"in b&&(this.stack=b.stack);this.responseCode=a};$jscomp.inherits(CxnError,Error);var ApiError=function(a){a=Error.call(this,"API error: "+a);this.message=a.message;"stack"in a&&(this.stack=a.stack)};$jscomp.inherits(ApiError,Error);
var ServerError=function(a,b){var c=Error.call(this,"Server error: "+a);this.message=c.message;"stack"in c&&(this.stack=c.stack);this.msg=a;"undefined"!=typeof b&&(this.statusCode=b)};$jscomp.inherits(ServerError,Error);var NotFoundServerError=function(){ServerError.call(this,"File not found")};$jscomp.inherits(NotFoundServerError,ServerError);var InternalServerError=function(){ServerError.call(this,"Internal server error")};$jscomp.inherits(InternalServerError,ServerError);
var OverloadedServerError=function(a){ServerError.call(this,"Server overloaded or down, status code "+a)};$jscomp.inherits(OverloadedServerError,ServerError);var NetworkError=function(){var a=Error.call(this,"Network error");this.message=a.message;"stack"in a&&(this.stack=a.stack)};$jscomp.inherits(NetworkError,Error);
var Score=function(a,b,c,d,e,f,g,h,k){this.userId=a;this.name=b;this.score=c;this.wordCount=d;this.optionalWordCount=e;this.nonWordCount=f;this.ms=g;this.lastUpdatedWord=h;this.isPremium=k},Api=function(){var a=this;this._nonce=null;this.rateLimit=new RateLimit;this._isMaintenanceMode=!1;var b=new URL(location.href);this.isDevServer=location.host.endsWith(".test");this.isTest=location.href.includes("test.html")||"about:srcdoc"==location.href;this.isLocalhost=location.host.startsWith("localhost");
this.isAlpha=!this.isLocalhost&&("devsquaredle.test"==location.hostname||"about:srcdoc"==location.href||location.pathname.startsWith("/alpha")||"localhost"==location.hostname||b.searchParams.has("alpha"));this.isBeta=location.href.includes("/beta");this.isStage=location.href.includes("/stage");this.isSandbox=location.href.includes("/sandbox");this.isStaging="constructle.net"==location.hostname;this.endpoint=this.server="";if(this.isDevServer){if(this.server=location.protocol+"//"+location.host+(this.isBeta?
"/beta":"")+"/api/",this.endpoint=this.server+"index.php",b=b.searchParams.get("XDEBUG_TRIGGER"))this.endpoint+="?XDEBUG_TRIGGER="+encodeURI(b)}else this.endpoint=this.server=this.isLocalhost?"https://squaredle.app/api/from-localhost/":location.protocol+"//squaredle.app/api/",this.isAlpha?location.href.includes("bee/alpha")||location.href.includes("alpha-bee")?this.endpoint+="alpha-bee/":this.endpoint+="alpha/":this.isBeta?(this.endpoint+="beta/",this.isStage&&(this.endpoint+="stage/")):this.isStage?
this.endpoint+="stage/":this.isSandbox&&(this.endpoint+="sandbox/"),this.endpoint+="index.php";if(this.isAlpha||this.isBeta||this.isStage)if(b=document.querySelector("#version"))b.textContent+="-"+(this.isAlpha?"alpha":"beta");this._uuid="undefined"!=typeof Store?GlobalStore.getUuid():null;this._pendingUuidPromise=null;this._userId="undefined"!=typeof Store?GlobalStore.getUserId():null;this._hasPendingUserIdFetch=!1;this._lastScore=this._pendingScore=null;this._deletedSolution=!1;this._pendingSyncSolutionPromise=
null;this._pendingScoreInterval=-1;document.addEventListener("visibilitychange",function(){a._deletedSolution||"hidden"!=document.visibilityState||a._sendPendingScore(!0)});this.hasAuthError=!1;this._saleTimeFromServerResponseTime=this._saleTimeFromServerResponse=null};
Api.prototype._sendRequest=function(a){var b=this;if(this._isMaintenanceMode)return Promise.reject(new OverloadedServerError(0));if(useFakeApi){var c=FakeApi.prototype[a.op].bind(fakeApi);return assertInstanceOf(c(a),Promise)}var d=a.args&&a.args.anonymous;return(!d&&"setCookieSettings register signIn postAchievements postScore syncSolution getSolution deleteSolution setName addFavorite removeFavorite sendFeedback logConsent submitError sendMisc devSetSolution devDeleteSolutionForDay".split(" ").includes(a.op)?
this._ensureIds():Promise.resolve()).then(function(){"undefined"==typeof a.args&&(a.args={});d||(a.args.uuid=b._uuid);a.args.game=Config.game;a.args.version=gVersion;log(a);return b.isTest?new Promise(function(){}):origFetch(b.endpoint,{method:"POST",body:JSON.stringify(a),credentials:"include"})}).then(function(e){var f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(200!=e.status){0==e.status?logNetworkError(Error("Response status was 0")):logServerError(e.status,
b.endpoint);if(500==e.status)throw new InternalServerError;if([503,507,508].includes(e.status))throw b._isMaintenanceMode=!0,new OverloadedServerError(e.status);404==e.status&&warn("404 Not Found: "+b.endpoint);throw new ServerError("Unexpected server error, status code "+e.status,e.status);}k.setCatchFinallyBlocks(2);return k.yield(e.json(),4)}if(2!=k.nextAddress){f=k.yieldResult;if("error"==f.status&&"Static"==f.error)throw b._isMaintenanceMode=!0,new OverloadedServerError(0);if("error"==f.status){warn(f);
if(f.error.startsWith("Unauthorized")){g=f.error;if("Unauthorized"==g){if(b.hasAuthError)return k.return(f);b.hasAuthError=!0;g+="; missing permissions"}alert(g);throw g;}if(f.error.startsWith("JWT error")){if(b.hasAuthError)return k.return(f);b.hasAuthError=!0;alert("Unable to authenticate: "+f.error+": "+f.errorMsg);throw f.errorMsg;}throw new ApiError(JSON.stringify(f.error));}return k.return(f)}h=k.enterCatchBlock();logApiError(h);throw h;})},function(e){logNetworkError(e);throw new NetworkError;
})};Api.prototype._sendBeacon=function(a){"undefined"==typeof navigator.sendBeacon?this._sendRequest(a):useFakeApi?FakeApi.prototype[a.op].bind(fakeApi)(a):("undefined"==typeof a.args&&(a.args={}),a.args.uuid=this._uuid,a.args.game=Config.game,a.args.version=gVersion,log(a),this.isTest||navigator.sendBeacon(this.endpoint,JSON.stringify(a)))};
Api.prototype._fetchJson=function(a){var b=this,c=this.server+"static/"+a;this.isTest&&(c=gOrigin+"/api/static/"+a);return origFetch(c,{method:"GET"}).then(function(d){if(200!=d.status){0==d.status?logNetworkError(Error("Response status was 0")):logServerError(d.status,c);if(500==d.status)throw new InternalServerError;if([503,507,508].includes(d.status))throw new OverloadedServerError(d.status);throw new ServerError("Unexpected server error, status code "+d.status);}try{return d.json()}catch(e){throw logApiError(e),
new ApiError("Unexpected JSON failure: "+e.toString());}},function(d){console.error("Failed to fetch "+c);throw d;}).catch(function(d){if(!b.isDevServer)throw d;})};
Api.prototype.fetchText=function(a){var b=this.server+"static/"+a;this.isTest&&(b=gOrigin+"/api/static/"+a);return origFetch(b,{method:"GET"}).then(function(c){if(200!=c.status){if(0==c.status)logNetworkError(Error("Response status was 0"));else{if(404==c.status)throw new NotFoundServerError;logServerError(c.status,b)}if(500==c.status)throw new InternalServerError;if([503,507,508].includes(c.status))throw new OverloadedServerError(c.status);throw new ServerError("Unexpected server error, status code "+
c.status);}return c.text()},function(c){console.error("Failed to fetch "+b);throw c;})};
Api.prototype._ensureIds=function(){var a=this;if(this._pendingUuidPromise)return this._pendingUuidPromise;var b=null;this._uuid?b=Promise.resolve():this._pendingUuidPromise=b=this._requestUuid().then(function(c){if("error"==c.status)throw Error(c);a._uuid=c.data.uuid;GlobalStore.setUuid(a._uuid)}).finally(function(){a._pendingUuidPromise=null});return this._userId||this._hasPendingUserIdFetch?b:(this._hasPendingUserIdFetch=!0,b.then(function(){assert(null!=a._uuid);return a._getUserId().then(function(c){a._userId=
c.data.id;GlobalStore.setUserId(a._userId)})}).finally(function(){setTimeout(function(){a._hasPendingUserIdFetch=!1},5E3)}))};Api.prototype._requestUuid=function(){null==this._nonce&&(this._nonce=Util.getUuid());var a="",b=new URL(location.href),c=b.searchParams.get("r");c?a=c:b.searchParams.get("fbclid")?a="fb":document.referrer.endsWith(".facebook.com")&&(a="fb");return this._sendRequest({op:"requestUuid",args:{isTest:this.isAlpha||this.isTest,nonce:this._nonce,referrer:a,referrerUrl:Store.getReferrerUrl()}})};
Api.prototype.setInitialSolution=function(a){this._lastScore=a};Api.prototype.getUserId=function(){var a=this;return this._userId?Promise.resolve(this._userId):this._ensureIds().then(function(){return a._userId})};Api.prototype._getUserId=function(){return this._sendRequest({op:"getUserId"})};Api.prototype.getUsername=function(a){return this._sendRequest({op:"getUsername",args:{userId:a}}).then(function(b){return b.data.username})};Api.prototype.getContinent=function(){return this._sendRequest({op:"getContinent"}).then(function(a){return a.data.continent})};
Api.prototype.setCookieSettings=function(a){return this._sendRequest({op:"setCookieSettings",args:{functional:a.get("functional"),performance:a.get("performance"),targeting:a.get("targeting")}})};Api.prototype.register=function(a,b,c,d,e,f){var g=this;return this._sendPendingScore(!1).then(function(){return g._sendRequest({op:"register",args:{email:a,password:b,favoriteUserIds:Array.from(c),emailSignUp:d,globalSettings:e,globalAchievements:f}})})};
Api.prototype.signIn=function(a,b,c,d){var e=this;return this._sendPendingScore(!1).then(function(){return e._sendRequest({op:"signIn",args:{email:a,password:b,favoriteUserIds:Array.from(c),globalAchievements:d}})}).then(function(f){f.data&&f.data.id&&(e._userId=f.data.id,GlobalStore.setUserId(e._userId),e._uuid=f.data.uuid);return f})};Api.prototype.requestPasswordReset=function(a){return this._sendRequest({op:"requestPasswordReset",args:{email:a}})};
Api.prototype.resetPassword=function(a,b){return this._sendRequest({op:"resetPassword",args:{hash:a,password:b}})};Api.prototype.requestSync=function(){return this._sendRequest({op:"requestSync"})};Api.prototype.mintToken=function(a,b){return this._sendRequest({op:"mintToken",args:{email:a,password:b}})};Api.prototype.validateToken=function(){return this._sendRequest({op:"validateToken"})};Api.prototype.clearToken=function(){return this._sendRequest({op:"clearToken"})};
Api.prototype.postSettings=function(a){return this._sendRequest({op:"postSettings",args:{settings:a}})};Api.prototype.postAchievements=function(a){return this._sendRequest({op:"postAchievements",args:{achievements:a}})};Api.prototype.getSubscription=function(){return this._sendRequest({op:"getSubscription"}).then(function(a){return a.data.subscription})};Api.prototype.enableAutoRenew=function(){return this._sendRequest({op:"enableAutoRenew"}).then(function(a){return a.data.success})};
Api.prototype.disableAutoRenew=function(){return this._sendRequest({op:"disableAutoRenew"}).then(function(a){return a.data.success})};Api.prototype.onPaypalSubscribe=function(a,b){return this._sendRequest({op:"onPaypalSubscribe",args:{subId:a,planId:b}})};Api.prototype.redeemGiftCode=function(a){return this._sendRequest({op:"redeemGiftCode",args:{giftCode:a}})};Api.prototype.getTimes=function(a){return this._sendRequest({op:"getTimes",args:{dateStr:a}})};
Api.prototype.syncSolution=function(a){var b=this;this._ensureIds();this._lastScore=this._pendingScore=a;-1==this._pendingScoreInterval&&(this._pendingScoreInterval=setInterval(function(){b._sendPendingScore(!1);assert(b._pendingSyncSolutionPromise)();b._pendingSyncSolutionPromise()},3E4));return new Promise(function(c,d){b._pendingSyncSolutionPromise=c})};Api.prototype.getSolution=function(a){return this._sendRequest({op:"getSolution",args:{date:a}}).then(function(b){return b.data.solution})};
Api.prototype.deleteSolution=function(a,b){b&&(this._deletedSolution=!0,this._pendingScore=null);return this._sendRequest({op:"deleteSolution",args:{puzzleKey:a}})};
Api.prototype._sendPendingScore=function(a){var b=this;if(!this._pendingScore||this.isTest)return Promise.resolve();var c={op:"syncSolution",args:this._getSolutionArgs(this._pendingScore)};if(a)return this._sendBeacon(c),clearInterval(this._pendingScoreInterval),this._pendingScoreInterval=-1,this._pendingSyncSolutionPromise=this._pendingScore=null,Promise.resolve();var d=this._pendingScore;return this._sendRequest(c).then(function(){b._pendingScore==d&&(clearInterval(b._pendingScoreInterval),b._pendingScoreInterval=
-1,b._pendingScore=null,b._pendingSyncSolutionPromise())})};Api.prototype.setName=function(a){return this._sendRequest({op:"setName",args:{name:a}})};Api.prototype.getPercentiles=function(a){return this._sendRequest({op:"getPercentiles",args:{puzzleId:a,getCompletedPercentiles:!0}}).then(function(b){return b.data?b.data.percentiles:null})};
Api.prototype.getLeaderboardScores=function(a,b){var c=this;return this._sendPendingScore(!1).then(function(){var d=c._lastScore?c._getSolutionArgs(c._lastScore):null;return c._sendRequest({op:"getLeaderboardScores",args:{puzzleId:a,showDebug:c.isAlpha,favorites:b,isBetaPuzzle:gBeta.useBetaPuzzle,lastScore:d,getCompletedPercentiles:!0}}).then(function(e){c._lastScore=null;for(var f=[],g=$jscomp.makeIterator(e.data.scores),h=g.next();!h.done;h=g.next())h=h.value,f.push(new Score(h.userId,h.name,h.score,
h.wordCount,h.optionalWordCount,h.nonWordCount,h.ms,h.lastUpdatedWord,h.isPremium));return{scores:f,numPlayers:e.data.numPlayers,numCompleted:e.data.numCompleted,percentiles:e.data.percentiles}})})};Api.prototype.addFavorite=function(a){return this._sendRequest({op:"addFavorite",args:{favoriteUserId:a}})};Api.prototype.removeFavorite=function(a){return this._sendRequest({op:"removeFavorite",args:{favoriteUserId:a}})};
Api.prototype.sendFeedback=function(a){return this._sendRequest({op:"sendFeedback",args:{feedback:a,anonymous:!1,dimensions:window.innerWidth+"x"+window.innerHeight}})};Api.prototype.submitError=function(a){a={message:a.message,stack:a.stack};return this.isAlpha||location.pathname.includes("/src")?(console.error("Error that would be submitted:",a),Promise.resolve()):this._sendRequest({op:"submitError",args:a})};Api.prototype.signUpForBeta=function(a){return this._sendRequest({op:"signUpForBeta",args:{email:a}})};
Api.prototype.getFbShareCount=function(){return this._fetchJson("fb-share-count.json")};Api.prototype.incFbShareCount=function(){this._sendRequest({op:"incFbShareCount"})};Api.prototype.getPuzzleForDay=function(a,b){return this._sendRequest({op:"getPuzzleForDay",args:{dateStr:a,level:b}}).then(function(c){return c.data?c.data:null})};Api.prototype.getPuzzlesForWeek=function(a){return this._sendRequest({op:"getPuzzlesForWeek",args:{dateStr:a}}).then(function(b){return b.data})};
Api.prototype.getPuzzleByKey=function(a){return this._sendRequest({op:"getPuzzleByKey",args:{puzzleKey:a}}).then(function(b){return b.data?b.data:null})};Api.prototype.getBetaPuzzle=function(a){return this._sendRequest({op:"getBetaPuzzle",args:{puzzleId:void 0===a?null:a}}).then(function(b){return b.data.puzzle})};Api.prototype.devSetSolution=function(a){return this._sendRequest({op:"devSetSolution",args:{solution:a}})};
Api.prototype.devDeleteSolutionForDay=function(a){return this._sendRequest({op:"devDeleteSolutionForDay",args:{dateStr:a}})};Api.prototype.devGetPuzzleForDay=function(a,b){return this._sendRequest({op:"devGetPuzzleForDay",args:{dateStr:a,level:b}}).then(function(c){return c.data||null})};Api.prototype.devFinishPuzzleForDay=function(a){return this._sendRequest({op:"devFinishPuzzleForDay",args:{dateStr:a}})};
Api.prototype.getAvgScore=function(a){var b=this,c="";"bee"==Config.game&&(c="bee/");c+="stats-"+a.replaceAll("/","-")+".json";return this._fetchJson(c).catch(function(d){return new Promise(function(e,f){setTimeout(function(){b._fetchJson(c).then(e,f)},5E3)})}).then(function(d){assert("number"==typeof d.averageScore);return d.averageScore}).catch(function(d){if(!b.isDevServer)throw d;})};
Api.prototype.getVersion=function(){var a=this,b="version-"+(this.isAlpha?"alpha":this.isBeta?"beta":"release")+".json";return this._fetchJson(b).catch(function(c){return new Promise(function(d,e){setTimeout(function(){a._fetchJson(b).then(d,e)},5E3)})}).then(function(c){assert("string"==typeof c.version);return c.version})};Api.prototype.getLastWeekWords=function(){var a="weekly/"+DateUtil.getYesterdayStr().replaceAll("/","-")+"-weekly-words.json";return this._fetchJson(a).then(function(b){return b})};
Api.prototype.uploadDebugData=function(a){return this._sendRequest({op:"uploadDebugData",args:{data:JSON.stringify(a)}})};Api.prototype.uploadString=function(a){return this._sendRequest({op:"uploadString",args:{str:a,userAgent:navigator.userAgent,dimensions:window.innerWidth+"x"+window.innerHeight}})};Api.prototype.sendMisc=function(a){return this._sendRequest({op:"sendMisc",args:{value:a}})};
Api.prototype.getPuzzleVersion=function(a){var b=this;return new Promise(function(c,d){b.rateLimit.willRun("getPuzzleVersion",10)&&b.fetchText("puzzle/version/"+a).then(function(e){return c(new VersionNumber(e.trim()))},function(e){})})};Api.prototype.logConsent=function(a){return this._sendRequest({op:"logConsent",args:{consentObj:a.toObj()}})};Api.prototype.reload=function(a){location.reload()};Api.prototype.setLocation=function(a,b){location.href=a};
Api.prototype._getSolutionArgs=function(a){return{puzzleId:a.puzzleId,words:a.words,optionalWords:a.optionalWords,nonWordCount:a.nonWordCount,ms:a.ms,shared:a.shared,revealsUsed:a.revealsUsed,enabledHints:a.enabledHints,version:gVersion,isBetaPuzzle:gBeta.useBetaPuzzle,changeId:a.changeId,puzzleVersion:a.puzzleVersion}};var api=new Api;
if("undefined"!=typeof Store&&Store.needsTutorial())try{for(var lsSquaredle={numSolutions:0,numStats:0,numBetaBugs:0},nKeys$jscomp$1=localStorage.length,betaBugRegex=/^squaredle-\d{4}\/\d{2}\/\d{2}/,i$jscomp$34=0;i$jscomp$34<nKeys$jscomp$1;i$jscomp$34++){var key$jscomp$110=localStorage.key(i$jscomp$34);key$jscomp$110.startsWith("squaredle-")&&(key$jscomp$110.includes("solution")?lsSquaredle.numSolutions++:key$jscomp$110.includes("stats")?lsSquaredle.numStats++:betaBugRegex.test(key$jscomp$110)?lsSquaredle.numBetaBugs++:
lsSquaredle[key$jscomp$110]=localStorage.getItem(key$jscomp$110))}7<Object.keys(lsSquaredle).length&&api.uploadDebugData({lsSquaredle:lsSquaredle})}catch(a){console.error(a)};var FakeApi=function(){this.avgScore=void 0};FakeApi.prototype._success=function(a){var b={status:"success"};a&&(b.data=a);return Promise.resolve(b)};FakeApi.prototype.requestUuid=function(a){return Promise.resolve({data:{uuid:"1234"}})};FakeApi.prototype.getUserId=function(a){return Promise.resolve({data:{id:1234}})};FakeApi.prototype.getTimes=function(a){return Promise.resolve({data:{secondsToHints:120,secondsToNextPuzzle:360}})};FakeApi.prototype.updateScore=function(a){};
FakeApi.prototype.getAvgScore=function(a){return this._success({avg:"undefined"==typeof FakeApi.avgScore?230:FakeApi.avgScore,version:"v0.4.9"})};
FakeApi.prototype.getLeaderboardScores=function(a){var b=[];for(a=0;100>a;a++)b.push({name:"Anonymous"+(0==a?"":"-"+a),score:Math.ceil(500*Math.random()),wordCount:Math.ceil(60*Math.random()),userId:a});b.sort(function(c,d){return c.score!=d.score?d.score-c.score:c.timestamp>d.timestamp?1:c.timestamp<d.timestamp?-1:0});return new Promise(function(c){setTimeout(function(){c({status:"success",data:{scores:b,favorites:[b[2],b[15]]}})},1E3)})};
FakeApi.prototype.setName=function(a){return"used"==a.args.name?this._success({success:!1,reason:"Sorry, that name is taken"}):this._success({success:!0})};FakeApi.prototype.submitError=function(a){return this._success()};FakeApi.prototype.sendFeedback=function(a){return this._success()};var fakeApi=new FakeApi;var Size=function(a,b){this.width=a;this.height=b},ReportingTags=function(){this.puzzle={puzzleSource:"daily",puzzleFormat:"standard"}};ReportingTags.prototype.getEntries=function(){return[[1,this.puzzle.puzzleSource],[2,this.puzzle.puzzleFormat]]};
var Ads=function(){var a=this,b;this._adsTemporarilyDisabled="1"==Util.getCookie("squaredle-disableAds")||(null!=(b=Store.getInteger("disableAdsUntil"))?b:0)>Date.now();this.showAds=!Store.needsTutorial()&&!this._adsTemporarilyDisabled&&(!Store.isPremium()&&!location.hostname.endsWith(".test")&&!location.pathname.includes("src/")||this._shouldForceAds());this._prevHeight=this._prevWidth=null;this._reportingTags=new ReportingTags;this._applyReportingTags();this._debouncingTimeout=-1;this._debounceCallback=
function(){clearTimeout(a._debouncingTimeout);a._debouncingTimeout=setTimeout(function(){return a.resizeAdContainers()},500)};onReady(function(){return a._setUp()})};
Ads.prototype.temporarilyDisable=function(){var a=Date.now()+216E6;Store.setInteger("disableAdsUntil",a);Util.setCookie("squaredle-disableAds","1",new Date(a));gtagTryCatch("event","temporarily_disable_ads");this.onPremium();this._adsTemporarilyDisabled=!0;Dialog.show("Ads disabled",'<p>Ads have been disabled for 2.5 days.</p>\n      <p><strong><a href="/" id="forceReload">Tap to reload</a></strong> to ensure this change takes effect.</p>\n      <p><strong>Thank you</strong> for the feedback!</p>\n      ',!0);
$("#forceReload").addEventListener("click",function(b){b.preventDefault();location.reload()})};Ads.prototype.destroyAds=function(){var a,b;null==(a=window.ramp)||null==(b=a.destroyUnits)||b.call(a,"all")};Ads.prototype.windowHasNewSize=function(){if(this._prevWidth==window.innerWidth&&this._prevHeight==window.innerHeight)return!1;this._prevWidth=window.innerWidth;this._prevHeight=window.innerHeight;return!0};
Ads.prototype.resizeAdContainers=function(){this.windowHasNewSize()?(this.destroyAds(),this._addAndDisplayUnits()):console.warn("Ignoring resize event because window size is the same as last time")};Ads.prototype.onPremium=function(){location.href.includes("forceAds")||"1"==Util.getCookie("sq-forceAds")||(this.showAds=!1,window.removeEventListener("resize",this._debounceCallback),this._hideAds(),this.destroyAds())};
Ads.prototype.updatePuzzle=function(a,b){this._reportingTags.puzzle={puzzleSource:a,puzzleFormat:b};this._applyReportingTags()};
Ads.prototype._setUp=function(){var a=this;this.showAds?(ramp.que.push(function(){a.windowHasNewSize();a._addAndDisplayUnits();window.addEventListener("resize",a._debounceCallback);var b;null==(b=gConsentManager)||b.onAdPlatformReady();gLog.ads("Ramp initialized")}),Util.promiseWithTimeout(Util.loadScriptAsync("https://cadmus.script.ac/d25lqe4mlyaln6/script.js",null).catch(function(b){console.error("Error loading clean ad script")}),1E4).catch(function(b){console.error("Timeout loading clean ad script")}).finally(function(){Util.loadScriptAsync("//cdn.intergient.com/1025020/74446/ramp.js",
null).catch(function(b){console.error("Error loading ramp.js");var c;null==(c=gConsentManager)||c.onAdPlatformFailure()})})):this._hideAds()};Ads.prototype._hideAds=function(){document.querySelector("#belowBoard").classList.add("noAd");Array.from(document.querySelectorAll(".pw-tag")).forEach(function(a){return a.hidden=!0})};
Ads.prototype._addAndDisplayUnits=function(){var a=[],b=[{selectorId:"btf-leaderboard",type:"med_rect_atf"},{type:"left_rail"},{type:"right_rail"}],c=[{selectorId:"btf-leaderboard",type:"med_rect_btf"},{type:"left_rail"},{type:"right_rail"}];840<window.innerHeight?a.push.apply(a,$jscomp.arrayFromIterable(b)):(a.push.apply(a,$jscomp.arrayFromIterable(c)),680<=window.innerHeight&&(c[0].type="med_rect_btf"));b=[{selectorId:"btf-leaderboard",type:680<=window.innerHeight?"leaderboard_atf":"med_rect_btf"}];
ramp.settings.device?console.log("Device type: "+ramp.settings.device):console.warn("No device setting!");a=["desktop","tablet"].includes(ramp.settings.device)?a:b;console.info("Ad unit specifications:",a);ramp.addUnits(a).then(function(){return ramp.displayUnits()}).catch(function(d){console.error("Error in ramp.displayUnits():");console.error(d);console.error("Trying again once.");ramp.displayUnits()})};
Ads.prototype._shouldForceAds=function(){return!location.search.includes("unForceAds")&&(location.pathname.includes("/src")||location.href.includes("forceAds")||"1"==Util.getCookie("sq-forceAds"))};
Ads.prototype._applyReportingTags=function(){var a=this._reportingTags.getEntries();try{var b;if("object"==typeof PageOS&&"function"==typeof(null==(b=PageOS)?void 0:b.setClientTag))for(var c=$jscomp.makeIterator(a),d=c.next();!d.done;d=c.next()){var e=$jscomp.makeIterator(d.value),f=e.next().value,g=e.next().value;PageOS.setClientTag(f,g)}else ramp.custom_tags=this._reportingTags.getEntries().map(function(h){h=$jscomp.makeIterator(h);h.next();return h.next().value})}catch(h){console.error(h)}};
var gAds=new Ads;var PopupManagerListener=function(){};PopupManagerListener.prototype.onPopupShow=function(a){};PopupManagerListener.prototype.onPopupClose=function(a){};
var PopupManager=function(){var a=this;this._lastPopup=this._curPopup=null;this._lastPopupShownTime=0;this._showingConfirm=!1;this._onCloseHooks=[];this._globalClosePopupClickListener=function(b){assert(a._curPopup&&!a._curPopup.hidden);!(gTryDebug(function(){return gConsentManager.isCmpVisible()},!1)||a._curPopup.contains(b.target)||$("#definition").contains(b.target)||$("#confirm").contains(b.target))&&200<(new Date).getTime()-a._lastPopupShownTime&&(a.close(!0),b.preventDefault())};this._listeners=
[];window.addEventListener("keydown",function(b){return a._onKeyDown(b)});onReady(function(){$$(".popup .closeBtn").forEach(function(b){b.addEventListener("click",function(c){c.preventDefault();a.close(!0)})})});this._delayClose=!1;this._delayCloseTimeout=-1;this._scrollTop=null};PopupManager.prototype.addListener=function(a){this._listeners.push(a)};PopupManager.prototype.removeListener=function(a){a=this._listeners.indexOf(a);-1!=a&&this._listeners.splice(a,1)};
PopupManager.prototype._onKeyDown=function(a){!$("#definition").hidden||"Escape"!=a.key&&"Esc"!=a.key||(this.close(!0),a.preventDefault())};PopupManager.prototype.isPopupOpen=function(a){return a?this._curPopup==a:!!this._curPopup};PopupManager.prototype.curPopup=function(){return this._curPopup};
PopupManager.prototype.show=function(a){var b=this;if(a.classList.contains("popup")&&!(this._curPopup&&(this._curPopup.classList.contains("uncloseable")||this._curPopup.classList.contains("important"))||this._showingConfirm)){gtagTryCatch("event","popup_view",{popup_title:a.id});document.body.style.overflow="hidden";document.body.addEventListener("animationend",function(){return document.body.style.overflow=""});var c=null;this._lastPopup==a&&"wordList"==a.id&&(c=this._scrollTop);this.close(!1);$("#overlay").hidden=
!1;$("#game").classList.add("blur");a.hidden=!1;this._curPopup=a;var d=a.querySelector('[role="tab"][aria-selected="true"]');if(d)d.focus(),d.blur();else if(d=a.querySelector("h2 .closeBtn"))d.focus(),d.blur();if(this._delayClose=a.classList.contains("delayClose")){var e=a.querySelector(".closeBtn");e.style.visibility="hidden";e.style.pointerEvents="none";clearTimeout(this._delayCloseTimeout);this._delayCloseTimeout=setTimeout(function(){b._delayClose=!1;e.style.visibility="";e.style.pointerEvents=
""},2E3)}this._listeners.forEach(function(f){return f.onPopupShow(a.id)});this._lastPopupShownTime=new Date;requestAnimationFrame(function(){return window.addEventListener("click",b._globalClosePopupClickListener)});null!=c&&requestAnimationFrame(function(){assert(null!=c);var f=b._curPopup.querySelector('.content .tabs [role="tabpanel"]:not([hidden])');f&&(f.scrollTop=c)})}};
PopupManager.prototype.close=function(a){if(!a||!this._delayClose)if(!a||!this._showingConfirm)if(window.removeEventListener("click",this._globalClosePopupClickListener),this._curPopup&&(!a||!this._curPopup.classList.contains("uncloseable"))){a&&gRouter.removeHash();(a=this._curPopup.querySelector('.content .tabs [role="tabpanel"]:not([hidden])'))&&"wordsTodayTab"==a.id&&(this._scrollTop=a.scrollTop);var b=this._curPopup.id;this._lastPopup=this._curPopup;this._curPopup.hidden=!0;this._curPopup=null;
$("#overlay").hidden=!0;$("#game").classList.remove("blur");a=this._onCloseHooks.slice();this._onCloseHooks=[];a.forEach(function(c){return c()});document.activeElement.blur();this._listeners.forEach(function(c){return c.onPopupClose(b)})}};PopupManager.prototype.addOnCloseHook=function(a){this._onCloseHooks.push(a)};PopupManager.prototype.onShowConfirm=function(){this._showingConfirm=!0};PopupManager.prototype.onCloseConfirm=function(){this._showingConfirm=!1};var gPopups=new PopupManager;var ConsentCategories=function(a,b,c){this.preferences=!!a;this.statistics=!!b;this.marketing=!!c};ConsentCategories.from=function(a){return new ConsentCategories(a.preferences,a.statistics,a.marketing)};ConsentCategories.prototype.all=function(){return this.preferences&&this.statistics&&this.marketing};
ConsentCategories.prototype.applyToGtag=function(){var a=this.marketing?"granted":"denied";gtagTryCatch("consent","update",{analytics_storage:this.statistics?"granted":"denied",ad_personalization:a,ad_storage:a,ad_user_data:a})};var Consent=function(a,b,c,d,e,f,g,h){this.source=a;this.method=b;this.regulation=c;this.region=d;this.created=e;this.notified=f;this.logged=g;this.categories=h};Consent.prototype.updateGtagConsent=function(){this.categories.applyToGtag()};
Consent.prototype.toObj=function(){var a,b;return{source:this.source,method:this.method,regulation:this.regulation,region:this.region,created:null!=(b=null==(a=this.created)?void 0:a.getTime())?b:null,notified:this.notified,categories:this.categories,logged:this.logged}};
Consent.prototype.save=function(){var a=this;Util.setCookieObj("squaredle-consent",this.toObj());if(!this.logged){var b,c=null==(b=this.created)?void 0:b.getTime();api.logConsent(this).then(function(d){var e;a==gConsentManager._consent&&(null==(e=a.created)?void 0:e.getTime())==c&&(a.logged=!0,Util.setCookieObj("squaredle-consent",a.toObj()))})}};Consent.Method={EXPLICIT:"explicit",IMPLIED:"implied"};
Consent.Regulation={GDPR:"GDPR",CPRA:"CPRA",LGPD:"LGPD",US_OTHER:"US-other",US_UNKNOWN:"US-unknown",NONE:"none",UNKNOWN:"unknown"};var DefaultConsent=function(){Consent.call(this,"default",Consent.Method.IMPLIED,Consent.Regulation.NONE,null,null,!1,!1,new ConsentCategories(!0,!0,!0))};$jscomp.inherits(DefaultConsent,Consent);DefaultConsent.prototype.save=function(){assertNotReached("DefaultConsent.save() should never be called")};
var TcfGdprConsent=function(a,b,c,d,e){Consent.call(this,"TCF",Consent.Method.EXPLICIT,Consent.Regulation.GDPR,null,b,!0,c,d);this.cmpId=a;this.gtagCategories=e};$jscomp.inherits(TcfGdprConsent,Consent);TcfGdprConsent.from=function(a){return new TcfGdprConsent(a.cmpId,a.created,a.logged,ConsentCategories.from(a.categories),a.gtagCategories)};TcfGdprConsent.prototype.updateGtagConsent=function(){gtagTryCatch("consent","update",this.gtagCategories)};
TcfGdprConsent.prototype.toObj=function(){return Object.assign(Consent.prototype.toObj.call(this),{cmpId:this.cmpId,gtagCategories:this.gtagCategories})};var CookiebotConsent=function(a,b,c,d,e,f,g,h){Consent.call(this,"Cookiebot",b,c,d,e,f,g,h);this.stamp=a};$jscomp.inherits(CookiebotConsent,Consent);CookiebotConsent.from=function(a){return new CookiebotConsent(a.stamp,a.method,a.regulation,a.region,a.created,a.notified,a.logged,ConsentCategories.from(a.categories))};
CookiebotConsent.prototype.toObj=function(){return Object.assign(Consent.prototype.toObj.call(this),{stamp:this.stamp})};var LegacyConsent=function(a){Consent.call(this,"legacy",Consent.Method.EXPLICIT,null,null,null,!0,!1,a)};$jscomp.inherits(LegacyConsent,Consent);LegacyConsent.from=function(a){a=Object.fromEntries(a.split(",").map(function(b){return b.split("=")}));return a.imported?null:new LegacyConsent(new ConsentCategories("true"==a.functional,"true"==a.performance,"true"==a.targeting))};var ConsentManager=function(){var a=this;this._consentListeners=[];Store.needsTutorial()||(this._consent=null,this._serverRegulation=Util.getCookie("sq-regulation"),this._pausedPageTimer=this._tcfCmpVisible=!1,this._cbot={loadingPromise:null,loading:!1,loaded:!1,wasVisible:!1},window.addEventListener("CookiebotOnDialogDisplay",function(b){return a._onCookiebotDialogDisplay(b)}),window.addEventListener("CookiebotOnConsentReady",function(b){return a._onCookiebotConsentReady(b)}),this._tcf={listenerId:null,
gdprApplies:null,checkGdprPromise:new Promise(function(b,c){window.googlefc=window.googlefc||{};window.googlefc.callbackQueue=window.googlefc.callbackQueue||[];window.googlefc.callbackQueue.push({CONSENT_API_READY:function(){gLog.ads("googlefc consent API ready");a._checkTcfApi();b()}})})},this._serverRegulation==Consent.Regulation.GDPR&&this._redirectPrivacyButton(),$("#consentLaunch").addEventListener("click",function(b){b.preventDefault();a._handleConsentLaunchRequest()}),gTryDebug(function(){return a._loadConsent()},
!1))};ConsentManager.prototype.getCategories=function(){var a,b;return null!=(b=null==(a=this._consent)?void 0:a.categories)?b:null};ConsentManager.prototype._redirectPrivacyButton=function(){$("#privacyBtn").setAttribute("href","#privacy")};ConsentManager.prototype.isCmpVisible=function(){return this._tcfCmpVisible||this.isCookiebotShowing()};ConsentManager.prototype.isCookiebotShowing=function(){var a,b,c;return null!=(c=null==(a=window.Cookiebot)?void 0:null==(b=a.dialog)?void 0:b.visible)?c:!1};
ConsentManager.prototype.addListener=function(a){this._consentListeners.push(a);this._consent&&a(this._consent)};ConsentManager.prototype._showGoogleFcCmp=function(){this._setConsentStatus("Showing consent manager...");__tcfapi("ping",2.2,function(a){"visible"!=a.displayStatus&&(gLog.ads("Showing googlefc"),window.googlefc.showRevocationMessage())})};ConsentManager.prototype._consentFromObj=function(a){switch(a.source){case "TCF":return TcfGdprConsent.from(a);case "Cookiebot":return CookiebotConsent.from(a)}return null};
ConsentManager.prototype._loadConsent=function(){var a=this,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:gLog.ads("Reading consent state...");if(b=Util.getCookieObj("squaredle-consent"))c=new Date(b.created),b.created=isNaN(c.getTime())?null:c,a._consent=a._consentFromObj(b),a._consent&&(a._applyConsentUpdate(),gLog.ads("Saved consent choices loaded."));if(gAds.showAds)return e.return();a._showConsentLaunchButton();if(a._consent)return e.return();
e.setCatchFinallyBlocks(2);return e.yield(a._parseTcfData(),4);case 4:if(d=e.yieldResult)return gTryDebug(function(){return a._applyTcData(d,"parsed")},!1),e.return();e.leaveTryBlock(3);break;case 2:e.enterCatchBlock();case 3:if(a._serverRegulation==Consent.Regulation.GDPR)return e.return(a._loadCookiebot());a._consent=a._importLegacyConsent();if(a._consent){if(!a._consent.categories.all())return e.return(a._loadCookiebot())}else a._consent=new DefaultConsent;a._applyConsentUpdate();e.jumpToEnd()}})};
ConsentManager.prototype._applyTcData=function(a,b){gLog.ads("Applying tc data from ",b);b=this._getTcDataGtagCategories(a);var c,d,e,f,g,h,k,l,m=(null==(c=a.publisher)?void 0:null==(d=c.consents)?void 0:d["1"])||(null==(e=a.publisher)?void 0:null==(f=e.legitimateInterests)?void 0:f["1"])||(null==(g=a.purpose)?void 0:null==(h=g.consents)?void 0:h["1"])||(null==(k=a.purpose)?void 0:null==(l=k.legitimateInterests)?void 0:l["1"]),q,r,n,p,t,u,y,w;c=(null==(q=a.publisher)?void 0:null==(r=q.consents)?void 0:
r["10"])||(null==(n=a.publisher)?void 0:null==(p=n.legitimateInterests)?void 0:p["10"])||(null==(t=a.purpose)?void 0:null==(u=t.consents)?void 0:u["10"])||(null==(y=a.purpose)?void 0:null==(w=y.legitimateInterests)?void 0:w["10"]);q=new ConsentCategories(m,c,"granted"===b.ad_personalization&&"granted"===b.ad_user_data);r=null;"useractioncomplete"==a.eventStatus?r=new Date:this._consent instanceof TcfGdprConsent&&(r=this._consent.created);this._consent=new TcfGdprConsent(a.cmpId||null,r,this._consent instanceof
TcfGdprConsent&&"tcloaded"==a.eventStatus?this._consent.logged:!1,q,b);this._consent.save();this._applyConsentUpdate();gLog.ads("Consent choices applied.")};
ConsentManager.prototype._parseTcfData=function(){var a,b,c=(null==(a=Util.getCookieObj("FCCDCF"))?void 0:null==(b=a[3])?void 0:b[0])||Util.getCookie("euconsent-v2");return c?Util.promiseWithTimeout(Util.loadScriptAsync("third_party/iab-tcstring.js"),3E3).then(function(d){var e=iab_TCString.decode(c);d=[1,3,4,7,10];return{cmpId:e.cmpId,purpose:{consents:Object.fromEntries(d.map(function(f){return[f.toString(),e.purposeConsents.has(f)]})),legitimateInterests:Object.fromEntries(d.map(function(f){return[f.toString(),
e.purposeLegitimateInterests.has(f)]}))},publisher:{consents:Object.fromEntries(d.map(function(f){return[f.toString(),e.publisherConsents.has(f)]})),legitimateInterests:Object.fromEntries(d.map(function(f){return[f.toString(),e.publisherLegitimateInterests.has(f)]}))},vendor:{consents:{755:e.vendorConsents.has(755)},legitimateInterests:{755:e.vendorLegitimateInterests.has(755)}}}},function(d){return null}):Promise.resolve(null)};
ConsentManager.prototype._importLegacyConsent=function(){var a=Util.getCookie("acceptedCookies");return a?LegacyConsent.from(a):null};
ConsentManager.prototype._checkTcfApi=function(){var a=this;"boolean"!=typeof this._tcf.gdprApplies&&"function"==typeof __tcfapi&&__tcfapi("ping",2.2,function(b){(a._tcf.gdprApplies=b.gdprApplies)?(gLog.ads("Adding TCF listener"),__tcfapi("addEventListener",2.2,a._onTcfEvent.bind(a)),a._redirectPrivacyButton()):(gLog.ads("GDPR does not apply"),a._consent||(a._consent=new DefaultConsent,a._applyConsentUpdate()));a._showConsentLaunchButton()})};
ConsentManager.prototype.onAdPlatformReady=function(){var a,b,c;gLog.ads(null!=(c="Ramp CC: "+(null==(a=window.PageOS)?void 0:null==(b=a.gdpr)?void 0:b.userCC))?c:"");var d;(null==(d=window.PageOS)?0:d.ccpaApplies)&&gLog.ads("Ramp CA: true");this._checkTcfApi()};ConsentManager.prototype.onAdPlatformFailure=function(){gLog.ads("Ramp failure");this._consent||this._serverRegulation!=Consent.Regulation.GDPR||this._loadCookiebot()};
ConsentManager.prototype._onTcfEvent=function(a,b){var c=this;b?(this._tcf.listenerId=a.listenerId,"cmpuishown"==a.eventStatus?(this._pausePageTimer(),this._tcfCmpVisible=!0):"useractioncomplete"==a.eventStatus&&(this._unpausePageTimer(),this._setConsentStatus(""),requestAnimationFrame(function(){c._tcfCmpVisible=!1})),a.gdprApplies?["tcloaded","useractioncomplete"].includes(a.eventStatus)&&this._applyTcData(a,a.eventStatus):!1===a.gdprApplies?__tcfapi("removeEventListener",2.2,function(d){d?c._tcf.listenerId=
null:console.error("Failed to remove TCF listener")},this._tcf.listenerId):console.error("No gdprApplies in tcData",a)):(console.error("Failed to get TCData in listener"),this._tcfCmpVisible=!1)};
ConsentManager.prototype._loadCookiebot=function(){var a=this;if(this._cbot.loaded)return Promise.resolve();this._setConsentStatus("Loading cookie manager...");var b=[{region:"US-06",cbid:"1e80fe2d-b7f9-4f0c-bd87-6f7e7c318b43"},{region:GDPR_COUNTRY_CODES.join(","),cbid:"e1dc6e5a-2f54-4d63-bd61-e8d7e761cd8d"}].map(function(c){return JSON.stringify(c)}).join(",");this._cbot.loading=!0;this._cbot.loadingPromise=Util.loadScriptAsync("https://consent.cookiebot.com/uc.js",null,{cbid:"7592db14-ceb1-42ec-8a25-717300d3680e",
consentmode:"disabled","consentmode-dataredaction":"false",georegions:b},"Cookiebot").then(function(c){a._cbot.loaded=!0}).finally(function(){return a._cbot.loading=!1});return this._cbot.loadingPromise};
ConsentManager.prototype._onCookiebotDialogDisplay=function(a){a=window.CookieConsentDialog||window.CookiebotDialog;expectEq(typeof a,"object")&&(this._pausePageTimer(),$$(".CybotCookiebotDialogDetailBodyContentCookieContainerButton:not([data-sqHandled])").forEach(function(b){b.setAttribute("disabled","trqe");b.addEventListener("click",function(d){d.stopPropagation();d.preventDefault()});var c;null==(c=b.querySelector("label"))||c.addEventListener("click",function(d){d.stopPropagation();d.preventDefault()});
b.dataset.sqHandled="true"}),expectEq(typeof a.cookieIntroTypeNecessary,"string")&&(a.cookieIntroTypeNecessary=a.cookieIntroTypeNecessary.replace(/<[^>]*>?/gm,"")),this._cbot.wasVisible=!0)};
ConsentManager.prototype._onCookiebotConsentReady=function(a){this._setConsentStatus("");var b;(null==(b=Cookiebot.dialog||window.CookieConsentDialog||window.CookiebotDialog)?0:b.visible)||this._unpausePageTimer();a=null;b=this._cbot.wasVisible;var c=null,d=!1;this._consent instanceof CookiebotConsent&&(a=this._consent.created,b=this._consent.notified||b,c=this._consent.stamp,d=this._consent.logged);this._cbot.wasVisible&&(a=new Date,d=!1);var e=Consent.Regulation.UNKNOWN;Cookiebot.regulations.gdprApplies?
e=Consent.Regulation.GDPR:Cookiebot.regulations.ccpaApplies?e=Consent.Regulation.CPRA:Cookiebot.regulations.lgpdApplies?e=Consent.Regulation.LGPD:Cookiebot.userCountry.startsWith("US-")?e=Consent.Regulation.US_OTHER:Cookiebot.userCountry.startsWith("US")?e=Consent.Regulation.US_UNKNOWN:Cookiebot.userCountry&&(e=Consent.Regulation.NONE);this._consent=new CookiebotConsent(Cookiebot.consent.stamp,"explicit"==Cookiebot.consent.method?Consent.Method.EXPLICIT:Consent.Method.IMPLIED,e,Cookiebot.userCountry.toUpperCase(),
a,b,d,new ConsentCategories(Cookiebot.consent.preferences,Cookiebot.consent.statistics,Cookiebot.consent.marketing));this._applyConsentUpdate();if(this._cbot.wasVisible||Cookiebot.consent.stamp!=c)this._consent.save(),gLog.ads("Cookiebot choices saved.");this._cbot.wasVisible&&Cookiebot.regulations.ccpaApplies&&gAds.showAds&&(Cookiebot.consent.preferences&&Cookiebot.consent.statistics&&Cookiebot.consent.marketing||Dialog.show("CPRA Opt-Out",'To finish opting out of the sharing of your personal\n            information, please also select your preferences directly with our\n            advertising partner:<br><br>\n            <a href="https://www.playwire.com/ccpa-opt-out" target="_blank"\n            style="display: block; text-align: center">\n              Playwire CCPA opt-out\n            </a>\n            </div>'));
this._cbot.wasVisible=!1};
ConsentManager.prototype._getTcDataGtagCategories=function(a){var b,c,d=null==(b=a.vendor)?void 0:null==(c=b.consents)?void 0:c["755"],e,f;b=d||(null==(e=a.vendor)?void 0:null==(f=e.legitimateInterests)?void 0:f["755"]);f={ad_storage:["1","4"],ad_personalization:["3","4"],ad_user_data:["1","7"],analytics_storage:["1","10"]};e=Object.fromEntries(Object.keys(f).map(function(h){return[h,"denied"]}));f=$jscomp.makeIterator(Object.entries(f));var g=f.next();for(c={};!g.done;c={category$jscomp$1:void 0},
g=f.next())if(g=$jscomp.makeIterator(g.value),c.category$jscomp$1=g.next().value,g=g.next().value,d||b&&"personalization_storage"!=c.category$jscomp$1||"analytics_storage"==c.category$jscomp$1)g=g.every(function(h){return function(k){var l,m,q,r,n,p,t,u,y,w;return(null==(l=a.purpose)?void 0:null==(m=l.consents)?void 0:m[k])||"personalization_storage"!=h.category$jscomp$1&&(null==(q=a.purpose)?void 0:null==(r=q.legitimateInterests)?void 0:r[k])&&(!(null==(n=a.publisher)?0:n.consents)||(null==(p=a.publisher)?
void 0:null==(t=p.consents)?void 0:t[k])||"personalization_storage"!=h.category$jscomp$1&&(!(null==(u=a.publisher)?0:u.legitimateInterests)||(null==(y=a.publisher)?void 0:null==(w=y.legitimateInterests)?void 0:w[k])))}}(c)),e[c.category$jscomp$1]=g?"granted":"denied";return e};ConsentManager.prototype._showConsentLaunchButton=function(){this._setConsentStatus("");$("#consentLaunch").hidden=!1};
ConsentManager.prototype._handleConsentLaunchRequest=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(gAds.showAds&&a._tcf.gdprApplies)return a._showGoogleFcCmp(),b.return();if(a.isCookiebotShowing())return b.return();a._cbot.loaded?(a._setConsentStatus("Showing cookie manager..."),Cookiebot.show()):a._loadCookiebot().then(function(c){var d;null==(d=Cookiebot)||d.show()},function(c){console.error("Failed to load Cookiebot:",c);setTimeout(function(){a._setConsentStatus("Error showing consent manager. Please check network connection and temporarily disable ad blockers.")},
500)});b.jumpToEnd()})};ConsentManager.prototype._pausePageTimer=function(){var a;if(null==(a=gPageTimer)?0:a.isStarted())gPageTimer.pause(),this._pausedPageTimer=!0};ConsentManager.prototype._unpausePageTimer=function(){var a;this._pausedPageTimer&&!1===(null==(a=gPageTimer)?void 0:a.isStarted())&&(this._pausedPageTimer=!1,gPageTimer.start())};ConsentManager.prototype._setConsentStatus=function(a){$("#consentStatus").textContent=a};
ConsentManager.prototype._applyConsentUpdate=function(){var a=this;assert(this._consent);this._consent instanceof DefaultConsent||this._consent.updateGtagConsent();this._consentListeners.forEach(function(b){return b(a._consent)})};var gConsentManager=gTryDebug(function(){return new ConsentManager},!1);window.plausible=function(a,b){(window.plausible.q||[]).push(arguments)};function gtagReconfig(){gtagTryCatch("set",{game:Config.game,registered:null!=GlobalStore.getEmail(),user_id:GlobalStore.getUserId(),version:gVersion,tutorial:Store.getTutorialValue()||"shown"});gtagTryCatch("set","user_properties",{registered:null!=GlobalStore.getEmail(),tutorial:Store.getTutorialValue()||"shown",ad_platform:"playwire"})}gtagReconfig();var SearchEvent=function(a){this._word=a;this._wordOfTheDay=!1};
SearchEvent.prototype.setWordType=function(a){this._wordType=a};SearchEvent.prototype.setWordResult=function(a){this._wordResult=a};SearchEvent.prototype.setWordOfTheDay=function(){this._wordOfTheDay=!0};SearchEvent.prototype.log=function(){var a=DateUtil.now();gtagTryCatch("event","search",{search_term:this._word,word_type:this._wordType,word_result:this._wordResult,word_of_the_day:this._wordOfTheDay,value:this._word.length,utc_hour:a.getUTCHours(),hour:a.getHours()})};
SearchEvent.WordType={kWord:"word",kOptionalWord:"optional_word",kNotAWord:"not_a_word"};SearchEvent.WordResult={kFound:"found_word",kAlreadyFound:"already_found_word",kNotAWord:"not_a_word"};var ButtonClickEvent={log:function(a){gtagTryCatch("event","button_click",{button:a});plausible("Button",{props:{button:a}})}};var AchievementItem,AchievementsModel=function(a,b){this._store=a;this._achievementsMgr=b;this.all=[{id:"perfect",title:"Perfect %player",desc:"Finish a %puzzle without any incorrect words."},{id:"share",title:"Go Viral",desc:"Share your score."},{id:"speedy",title:"Speedy %player",desc:"Finish a %puzzle in under 10 minutes."},{id:"speedy5",title:"Supersonic %player",desc:"Finish a %puzzle in under 5 minutes."},{id:"kofi",title:"Drink Some Ko-fi",desc:'Check out our page on <a href="https://ko-fi.com/squaredle" target="_blank">Ko-fi</a>. (Donation not required, but appreciated!)'},
{id:"finishFriday",title:"Friday %player",desc:"Friday is often the hardest puzzle of the week.",syncKey:"friday"},{id:"finishSunday",title:"Sunday %player",desc:"Sunday %puzzles often have more words than other daily %puzzles.",syncKey:"sunday"},{id:"longWordFirst",title:"Show-Off",desc:"Find a long word (8+) as your first word in a puzzle.",game:"squaredle"},{id:"pangramFirst",title:"Show-Off",desc:"Find a pangram (using all letters) as your first word in a puzzle.",game:"bee"},{id:"longBonusWord",
title:"Language Connoisseur",desc:"Find a long bonus word (8+)."},{id:"finish5",title:"Pro %player",desc:"Finish 5 %puzzles.",target:5,sync:!1},{id:"finish20",title:"Epic %player",desc:"Finish 20 %puzzles.",target:20,sync:!1},{id:"finish50",title:"Elite %player",desc:"Finish 50 %puzzles.",target:50,syncKey:"finished"},{id:"finishWeek",title:"Daily %player",desc:"Solve every puzzle for a week.",target:7,syncKey:"week"},{id:"languageLearner",title:"Language Learner",desc:"Look up 5 words in the dictionary by tapping the word chip above the board.",
target:5,syncKey:"dictionaryLookups"},{id:"languageExplorer",title:"Language Explorer",desc:"Find 20 bonus words in one %puzzle.",target:20,syncKey:"bonusWords"},{id:"noRotate",title:"Stoic",desc:"Finish a puzzle without rotating the board."},{id:"rotator",title:"Epic Rotator",desc:"Rotate the board 10 times in one session.",secret:!0,game:"squaredle"},{id:"rotator",title:"Epic Shuffler",desc:"Shuffle the board 10 times in one session.",secret:!0,game:"bee"},{id:"timeTraveler",title:"Time Traveler",
desc:"Finish a puzzle from the archives.",premium:!0,game:"squaredle"},{id:"dejaVu",title:"D\u00e9j\u00e0 Vu",desc:"Replay a puzzle from the archives from scratch.",premium:!0,game:"squaredle"}];for(a=this.all.length;a--;)this.all[a].game&&this.all[a].game!=this._store.game&&this.all.splice(a,1);this._isSyncingAchievements=!1;gServerAchievements&&(this.syncAchievements(gServerAchievements),gServerAchievements=null);this._store.isDejaVu()&&(this.setIfIncomplete("dejaVu",1),this._store.clearDejaVu())};
AchievementsModel.prototype.syncAchievements=function(a){this._isSyncingAchievements=!0;var b=this.load();b.get("languageLearner").value=Math.max(b.get("languageLearner").value,a.dictionaryLookups);a.noRotate&&(b.get("noRotate").value=1);a.rotator&&(b.get("rotator").value=1);a.share&&(b.get("share").value=1);a.kofi&&(b.get("kofi").value=1);"squaredle"==this._store.game?a.longWordFirst&&(b.get("longWordFirst").value=1):"bee"==this._store.game&&a.pangramFirst&&(b.get("pangramFirst").value=1);a.longBonusWord&&
(b.get("longBonusWord").value=1);a.timeTraveler&&(b.get("timeTraveler").value=1);a.dejaVu&&(b.get("dejaVu").value=1);this._save(b);this._isSyncingAchievements=!1};
AchievementsModel.prototype.load=function(){var a=new Map,b=this._store.getItem("achievements");if(b)try{for(var c=JSON.parse(b),d=$jscomp.makeIterator(Object.getOwnPropertyNames(c)),e=d.next();!e.done;e=d.next()){var f=e.value;a.set(f,c[f])}}catch(g){}b=$jscomp.makeIterator(this.all);for(c=b.next();!c.done;c=b.next())c=c.value,a.has(c.id)||a.set(c.id,{value:0});return a};
AchievementsModel.prototype._save=function(a){if(!this._store.needsTutorial()){var b=this._store.getItem("achievements");a=JSON.stringify(Object.fromEntries(a));b!=a&&(this._store.setItem("achievements",a),!this._isSyncingAchievements&&GlobalStore.getUuid()&&api.postAchievements(this.getSyncAchievements()))}};
AchievementsModel.prototype.getSyncAchievements=function(){for(var a=this.load(),b={finished:a.get("finish50").value},c=$jscomp.makeIterator(this.all),d=c.next();!d.done;d=c.next())d=d.value,0!=d.sync&&(b[d.syncKey||d.id]=a.get(d.id).value);return b};AchievementsModel.getGlobalAchievements=function(){for(var a={squaredle:null,bee:null},b=$jscomp.makeIterator(["squaredle","bee"]),c=b.next();!c.done;c=b.next()){c=c.value;var d=new AchievementsModel(new GameStore(c));a[c]=d.getSyncAchievements()}return a};
AchievementsModel.prototype.updateGameAchievements=function(){for(var a=this._store.getStats().stats,b=this.load(),c=0,d=0,e="1979/01/01",f=!1,g=!1,h=$jscomp.makeIterator(Array.from(a.keys()).sort()),k=h.next();!k.done;k=h.next()){k=k.value;var l=(new Date(DateUtil.fixDstPuzzleDate(k))).getDay(),m=a.get(k),q=gPuzzleManager.puzzleStats.get(k);q&&(m.score>=q.maxScore?(c++,1==DateUtil.numDaysBetween(e,k)?d++:d=1,7==d&&(g=!0),k==DateUtil.origYesterdayDateStr&&(f=!0),0==m.nonWordCount&&this.setIfIncomplete("perfect",
1,b),0===l?this.setIfIncomplete("finishSunday",1,b):5===l&&this.setIfIncomplete("finishFriday",1,b),6E5>m.ms&&this.setIfIncomplete("speedy",1,b),3E5>m.ms&&this.setIfIncomplete("speedy5",1,b),e=k):k!=DateUtil.origTodayDateStr&&(d=0),20<=m.optionalWordCount?this.setIfIncomplete("languageExplorer",20,b):k==DateUtil.getTodayStr()&&this.setIfIncomplete("languageExplorer",this._store.getSolutionForKey(null,k).obscureWords.size,b))}g?this.setIfIncomplete("finishWeek",7,b):f?this.setIfIncomplete("finishWeek",
d,b):this.setIfIncomplete("finishWeek",0,b);a=$jscomp.makeIterator([5,20,50]);for(d=a.next();!d.done;d=a.next())this.setIfIncomplete("finish"+d.value,c,b);this._save(b)};
AchievementsModel.prototype.setIfIncomplete=function(a,b,c){var d=this.all.find(function(g){return g.id==a});if(!d)return!1;var e=c?c:this.load(),f=e.get(a);if(f)if(assert(d),f.value<(d.target||1))f.value=b;else return!1;else e.set(a,{value:b});this._achievementsMgr&&b>=(d.target||1)&&this._achievementsMgr.showAchievement(d);c||this._save(e);return!0};
AchievementsModel.prototype.increment=function(a){var b=this.load(),c=b.get(a),d=!1,e=this.all.find(function(f){return f.id==a});assert(e);c?(d=c.value>=(e.target||1),c.value++):(d=!1,b.set(a,{value:1}));this._save(b);return d||e.target&&!(c.value>=e.target)?null:e};
AchievementsModel.prototype.formatForGame=function(){for(var a=$jscomp.makeIterator(this.all),b=a.next();!b.done;b=a.next()){b=b.value;for(var c=$jscomp.makeIterator(Object.getOwnPropertyNames(Strings)),d=c.next();!d.done;d=c.next())d=d.value,b.title=b.title.replaceAll(d,Strings[d]),b.desc=b.desc.replaceAll(d,Strings[d])}};
var AchievementsMgr=function(){var a=this;null==gAchievementsMgr&&(gAchievementsMgr=this);this._model=new AchievementsModel(Store,this);this._model.formatForGame();this._numRotations=0;this._calculatingInitialAchievements=this._showingAchievements=!1;this._timeout=0;$("#achievement").addEventListener("click",function(b){$("#achievement").hidden=!0;a.show();var c=b.currentTarget.dataset.achievement;setTimeout(function(){$("#achievement-"+c).scrollIntoView({behavior:"smooth"})})});$$(".kofi-link").forEach(function(b){return b.addEventListener("click",
function(){return a._onKofiClick()})});Store.needsTutorial()||Store.getBoolean("initializedAchievements2")||setTimeout(function(){a._calculatingInitialAchievements=!0;a._model.updateGameAchievements();a._calculatingInitialAchievements=!1;Store.setBoolean("initializedAchievements2",!0)},2E3)};AchievementsMgr.prototype.syncAchievements=function(a){return this._model.syncAchievements(a)};
AchievementsMgr.prototype.show=function(){var a=this;this._showingAchievements=!0;this._model.updateGameAchievements();var b=this._model.load();this._model.all.sort(function(q,r){q=b.get(q.id).value>=("undefined"!=typeof q.target?q.target:1)?1:0;r=b.get(r.id).value>=("undefined"!=typeof r.target?r.target:1)?1:0;return q-r});for(var c='<div id="achievements">',d=$jscomp.makeIterator(this._model.all),e=d.next();!e.done;e=d.next()){e=e.value;var f=b.get(e.id)||{value:0},g=e.target||1,h="",k="";f.value>=
g?(h='<svg><use href="#icon-checkbox-marked-outline"></svg>',k="completed"):h='<svg><use href="#icon-checkbox-blank-outline"></svg>';var l=e.title,m="";e.secret&&f.value<g||(1<g&&f.value<g&&(m=f.value/g*100,m='\n          <div class="progressOutline">\n            <div class="progressFilled" style="width: '+(0<m?"calc("+m+"% + 2px)":"0")+'">\n              <span class="count">'+(f.value||"")+"</span>\n            </div>\n          </div>"),f="",e.premium&&(l='\n          <svg class="inline-icon"><use href="#icon-squared"></svg> '+
l,Store.isPremium()||(f='\n            <div class="achievementPremium">\n              Requires <a href="#">Squaredle Squared</a>.\n            </div>')),g="","undefined"!=typeof gGlobalAchievements[e.id]&&0<gGlobalAchievements[e.id]&&(g='\n          <div class="achievementGlobalPct">\n            '+gGlobalAchievements[e.id]+"% of players\n          </div>"),c+='\n        <div class="achievement '+k+'" id="achievement-'+e.id+'">\n          <div class="status">'+h+'</div>\n          <div class="info">\n            <div class="achievementTitle">'+
l+'</div>\n            <div class="achievementDesc">'+e.desc+"</div>\n            "+m+"\n            "+f+"\n            "+g+"\n          </div>\n        </div>")}Dialog.show("Achievements",c+"</div>");$("#achievement-kofi a").addEventListener("click",function(){return a._onKofiClick()});$$("#dialog .achievementPremium a").forEach(function(q){q.addEventListener("click",function(r){r.preventDefault();gPopups.show($("#premiumSignup"))})});this._showingAchievements=!1};
AchievementsMgr.prototype.showAchievement=function(a){var b=this;if(!(this._showingAchievements||this._calculatingInitialAchievements||Store.needsTutorial())){var c=$("#achievement");this._timeout&&(clearTimeout(this._timeout),c.classList.remove("fade-out"));c.dataset.achievement=a.id;c.querySelector(".title").textContent=a.title;c.querySelector(".desc").innerHTML=a.desc;c.hidden&&(c.hidden=!1,c.classList.add("fade-in"),this._timeout=setTimeout(function(){c.classList.add("fade-out");b._timeout=setTimeout(function(){c.hidden=
!0},5E3)},7E3))}};AchievementsMgr.prototype.setIfIncomplete=function(a,b,c){return this._model.setIfIncomplete(a,b,c)};AchievementsMgr.prototype.increment=function(a){(a=this._model.increment(a))&&this.showAchievement(a)};AchievementsMgr.prototype.onRotate=function(){this._numRotations++;10==this._numRotations&&this.setIfIncomplete("rotator",1)};AchievementsMgr.prototype.onShare=function(){this.setIfIncomplete("share",1)};
AchievementsMgr.prototype.onComplete=function(a){this._model.updateGameAchievements();0==a.rotations&&this.setIfIncomplete("noRotate",1);!gPuzzleManager.isTodayPuzzle&&gPuzzleManager.puzzleKey.match(/\d{4}\/\d{2}\/\d{2}/)&&this.setIfIncomplete("timeTraveler",1)};AchievementsMgr.prototype._onKofiClick=function(){this.setIfIncomplete("kofi",1)&&Dialog.isDialogOpen("Achievements")&&this.show()};var gAchievementsMgr=null,gServerAchievements=null;var PageTimer=function(a,b){var c=this;gPageTimer=this;this._lastDate=null;this._timeout=-1;this.solution=a;(this._isFinished=b)||null==this.solution.ms?this._isFinished&&null!=this.solution.ms&&this.showTime():(this._visibilityChangeListener=function(){return c._onVisibilityChange()},document.addEventListener("visibilitychange",this._visibilityChangeListener),gPopups.addListener(this),this.start())};PageTimer.prototype.canStart=function(){return!gPopups.isPopupOpen()&&"visible"==document.visibilityState};
PageTimer.prototype.start=function(){!this._isFinished&&this.canStart()&&(this._lastDate=new Date,this._tick())};PageTimer.prototype.pause=function(){assert(this.isStarted());this.updateTimer();this._lastDate=null;clearTimeout(this._timeout);this._timeout=-1};PageTimer.prototype.finish=function(){this.isStarted()&&this.pause();document.removeEventListener("visibilitychange",this._visibilityChangeListener);gPopups.removeListener(this);this._isFinished=!0};
PageTimer.prototype.isStarted=function(){return null!=this._lastDate};PageTimer.prototype.updateTimer=function(){assert(null!=this.solution.ms);var a=new Date,b=a.getTime()-this._lastDate.getTime();5E3<b&&(b=5E3);this.solution.ms+=b;this._lastDate=a;Store.showTimer()&&this.showTime()};
PageTimer.prototype.showTime=function(){assert(null!=this.solution.ms);var a=this.solution.ms/1E3,b=a/60,c=b/60,d=c/24;a=[Math.floor(d),Math.floor(c)%24,Util.leftPad(Math.floor(b)%60,"0",2),Util.leftPad(Math.floor(a)%60,"0",2)];1<=d?c=a[0]+"d "+a[1]+"h "+a[2]+"m "+a[3]+"s":(a=a.slice(1),1>c&&(a=a.slice(1)),c=a.join(":"));$("#timer").textContent=c};PageTimer.prototype.onPopupShow=function(){this.isStarted()&&this.pause()};PageTimer.prototype.onPopupClose=function(){this.start()};
PageTimer.prototype._tick=function(){var a=this;this.updateTimer();this._timeout=setTimeout(function(){return a._tick()},1E3)};PageTimer.prototype._onVisibilityChange=function(){assert(!this._isFinished);this.isStarted()&&"hidden"==document.visibilityState?(this.pause(),Store.updateSolutionMs(this.solution)):this.isStarted()||"visible"!=document.visibilityState||this.start()};var gPageTimer=null;var Dialog=function(a,b,c,d,e,f){this.titleHtml=a;this.messageHtml=b;this.uncloseable=void 0===c?!1:c};
Dialog.show=function(a,b,c,d,e,f){var g=$("#dialog");g.querySelector(".closeBtn").hidden=!!c;var h=g.querySelector(".content");g.querySelector(".title").innerHTML=a;h.innerHTML=b;g.classList.toggle("uncloseable",!!c);g.classList.toggle("delayClose",!!d);e&&(a=document.createElement("div"),a.classList.add("p","closeButtons"),b=document.createElement("button"),b.classList.add("basicButton"),b.textContent=e.label,b.addEventListener("click",function(k){gPopups.close();e.action()}),a.appendChild(b),b=
document.createElement("button"),b.classList.add("primaryButton"),b.textContent=f?f.label:"Close",b.addEventListener("click",function(k){gPopups.close();f&&f.action()}),a.appendChild(b),h.appendChild(a));gPopups.show(g);h.scrollTop=0};Dialog.isDialogOpen=function(a){return gPopups.isPopupOpen($("#dialog"))&&$("#dialog .title").innerHTML==a};
Dialog.showExcludedWord=function(a){Dialog.show("Excluded word","<p>This word is excluded from Squaredle. It doesn't count against\n        accuracy, but it doesn't earn points. Sorry!</p>\n        <p>It's in the excluded list because it might be:</p>\n        <ul>\n          <li>Age-inappropriate;</li>\n          <li>Offensive in one regional or widespread meaning but not another\n          (in which case it's best to err on the side of caution); or</li>\n          <li>A derogatory term for a protected group.</li>\n        </ul>\n        <p>(Many sensitive meanings are obscure &mdash; no judgment for trying\n        various words!)</p>\n        ",!1,
!1,a?{label:"Don't show again",action:function(){return GlobalStore.setBoolean("suppressSensitiveDialog",!0)}}:void 0)};Dialog.showWordListExplanation=function(){Dialog.show("Word list","\n<p>\nSquaredle now uses the official <strong>North American Scrabble Players word\nlist</strong> (NWL2023).\n</p>\n\n<p>\nNote:\n</p>\n\n<ul>\n<li>Squaredle words must be four or more letters.</li>\n<li>Squaredle accepts longer words than Scrabble, so words longer than 15\nletters may be valid even though they aren't part of NWL2023.</li>\n<li>Word definitions shown in Squaredle are for educational purposes only and\ndo not reflect whether derived words, like plural nouns, are in NWL2023.</li>\n<li>Past puzzles may not be updated to the new word list yet.</li>\n</ul>\n\n<p>We hope this change provides more consistency and objectivity in Squaredle\npuzzles. Many of the removed words were extremely obscure or had no definitions;\nhopefully, finding all the bonus words is now a bit more achievable!</p>\n    ")};
Dialog.Options={titleHtml:"",messageHtml:"",uncloseable:!1,delayClose:!1};var gBannedGuesses="abos amakwerekwere arse arsed arses arsing asshole baas baases backra backras bakra bakras ballbag ballbags ballsack bastard bastards batshit beaner beaners beastiality bender benders biatch biatches binghi binghis bint bints bitch bitched bitches bitchiness bitching bitchy blackamoor blackamoors blackfella blackfellas blowjob boche boches bogtrotter bogtrotters bohunk bohunks bollock bollocks boner boong boonga boongas boongs bosche bosches bossboy bossboys brushite buckra buckras buftie bufties bufty bukkake bulldike bulldikes bulldyke bulldykes bullshit bullshits bullshitted bullshitter bullshitters bullshitting bumboy bumboys buttmunch buttplug chickenshit chickenshits chinkie chinkies cholo cholos clit cocksucker cocksuckers coolie coolies cooly coon coons coonshit coonshits copperskin copperskins cracka crackas crap crapped crapper crapping craps crip crippledom crippledoms crips cummed cummer cumming cums cumshot cunt cunts cunty dago dagoes dagos darkey darkeys darkie darkies darky dick dicked dicking dicks dikey dikier dikiest dildo dipshit dipshits dogan dogans douche douchebag douchebags douches dyke dykes dykey dykier dykiest faggeries faggery faggier faggiest fagging faggot faggotier faggotiest faggotries faggotry faggots faggoty faggy fags fannies fanny fatass fatasses feck fecked fecking fecks fellate fellatio frig frigged frigging frigs fuck fucked fucker fuckers fuckface fuckfaces fuckhead fuckheads fucking fuckoff fuckoffs fucks fuckup fuckups fuckwit fuckwits fudgepacker gammat gammats gangbang gaylord gaysex gimp gimped gimping gimps ginzo ginzoes ginzos gipped gippies gipping gippo gippoes gippos gippy gips gobshite gobshites golliwog golliwogg golliwoggs golliwogs gollywog gollywogs gook gookeye gookeyes gooks gooky gookys goyim goyisch goyish goyishe goys gringa gringas gringo gringos guinea guineas gypo gypos gypped gypper gyppers gypping gyppo gyppos gyps gypsied gypsies gypster gypsters gypsy gypsying haole haoles harelip harelipped harelips hasbian hasbians heil heiled heiling heils hentai honkey honkeys honkie honkies honky hori horis horniest horny horseshit horseshits humping hunkey hunkeys hunkie hunkies incest incests incestuous incestuously incestuousness incestuousnesses injun injuns jackoff jerkoff jerries jerry jerrys jesuit jesuitic jesuitical jesuitically jesuitism jesuitisms jesuitries jesuitry jesuits jewboy jewboys jigaboo jigaboos jism jizm jizz kaffir kaffirs kafir kafirs kanaka kanakas kike kikes knobhead knobjocky kraut krauts langer langers lesbo lesbos leses lezes lezz lezza lezzas lezzes lezzie lezzies lezzy lubra lubras massa massas merde merdes mick micks mierda mindfuck mindfucked mindfucks minge minges moffie moffies mofo mong monged mongol mongolian mongolism mongolisms mongoloid mongoloids mongols mongs motherfucker motherfuckers motherfucking mulatress mulatresses mulatta mulattas mulatto mulattoes mulattos mulattress mulattresses munt munts muntu muntus nance nances nancier nancies nanciest nancified nancy neger negress negresses negro negroes negrohead negroheads negroid negroidal negroids negroism negroisms negrophil negrophile negrophiles negrophilism negrophilisms negrophilist negrophilists negrophils negrophobe negrophobes negrophobia negrophobias negros nellie nellies nelly nigga niggah niggahs niggas nigger niggerdom niggerdoms niggered niggerhead niggerheads niggerier niggeriest niggering niggerish niggerism niggerisms niggerling niggerlings niggers niggery niglet niglets nitchie nitchies nonce nonces nonhandicapped nonpapist nonpapists numbnuts nutsack nutsacks octaroon octaroons octoroon octoroons ofay ofays papish papisher papishers papishes papism papisms papist papistic papistical papistically papistries papistry papists peckerwood peckerwoods pedo pedophile pedophiles pedophilia pedos phonesex picaninnies picaninny piccanin piccaninnies piccaninny piccanins pickaninnies pickaninny pickney pickneys pikey pikeys piss polack polacks poofier poofiest poofs pooftah pooftahs poofter poofters poofy poove pooveries poovery pooves poovier pooviest poovy poperies popery popish popishly porn porno pornographic pornography pornos porns pouftah pouftahs poufter poufters pube pubes pussies pussy quadroon quadroons quarteroon quarteroons quashee quashees quashie quashies queerdom queerdoms quintroon quintroons raghead ragheads rape raped rapes raping rapist redneck rednecked rednecks redskin redskins reffo reffos retard retardate retardates retarded retards sambo sambos schizier schiziest schizo schizos schizy schizzier schizziest schizzy schvartze schvartzes schwartze schwartzes semimute semimutes shat sheeney sheeneys sheenie sheenies shegetz shemale shemales shicksa shicksas shiksa shiksas shikse shikseh shiksehs shikses shirtlifter shirtlifters shit shitbag shitbags shitcan shitcans shite shites shitface shitfaced shitfaces shithead shitholes shithteads shitlist shits shitshole shitstorm shitstorms shitte shitted shittier shittiest shittiness shitting shitty shkotzim shvartze shvartzes shylock shylocks skank skanks skanky skimo skimos slut sluts slutty spastics spaz spazz spazzed spazzes spazzing spic spick spicks spics spik spiks squaw squawman squawmen squaws taig taigs thot thots tits tittiefucker titties titty towelhead towelheads trannie trannies tranny twat twats twinkie twinkies umlungu umlungus wang wank wanked wanker wankier wankiest wanking wanks wanky welch welched welches welching welsh welshed welshes welshing wench wenches wetback wetbacks whitey whiteys whities whore wigga wiggas wigger wiggers willy woggish wogs wooftah wooftahs woofter woofters wops yids zambo zambos".split(" "),
gInappropriateWords="asshole ballsack batshit blowjob boner brushite bukkake bullshit bullshits bullshitted bullshitter bullshitters bullshitting buttmunch buttplug chickenshit chickenshits clit coonshit coonshits cummer cunt cunts cunty dildo dipshit dipshits fagging faggot fags feck fecked fecking fecks fellate fellatio frig frigged frigging frigs fuck fucked fucker fuckers fuckface fuckfaces fuckhead fuckheads fucking fuckoff fuckoffs fucks fuckup fuckups fuckwit fuckwits fudgepacker gangbang gaylord gaysex gobshite gobshites harelip hentai horniest horny horseshit horseshits jackoff jerkoff jism jizm jizz knobhead knobjocky merde merdes mierda mindfuck mindfucked mindfucks mofo motherfucker motherfuckers motherfucking nigga nigger piss porn porno pornographic pornography pornos porns pussies pussy shat shit shitbag shitbags shitcan shitcans shite shites shitface shitfaced shitfaces shithead shitholes shithteads shitlist shits shitshole shitstorm shitstorms shitte shitted shittier shittiest shittiness shitting shitty tittiefucker titties wang wank wanker wankier wankiest wanky wench whore willy".split(" ");var Hints=function(a){this._firstLetters=this._sort=!1;this._solution=a};$jscomp.global.Object.defineProperties(Hints.prototype,{sort:{configurable:!0,enumerable:!0,get:function(){return this._sort},set:function(a){if(this._sort=a)this._solution.everEnabledHints=!0,Store.setHasEnabledHints()}},firstLetters:{configurable:!0,enumerable:!0,get:function(){return this._firstLetters},set:function(a){if(this._firstLetters=a)this._solution.everEnabledHints=!0,Store.setHasEnabledHints()}}});
var ScoreTier,Solution=function(a,b,c,d){(this.puzzle=a)&&476==this.puzzle.id&&b&&22<b.size&&(b=new Set);this.words=b||new Set;this.obscureWords=c||new Set;this._isTemporary=d||!1;this._ms=this.nonWordCount=0;this.everEnabledHints=!1;this.hints=new Hints(this);this.shared=!1;this.changeId=this.rotations=this.revealsUsed=0;this.maxReveals=Store.isPremium()?5:1;if(a&&!Store.needsTutorial()){switch(a.id){case 77:this.maxReveals+=2;break;case 88:case 160:this.maxReveals+=5;break;case 524:this.maxReveals+=
4;break;case 547:case 553:this.maxReveals+=10;break;case 1377:case 2370:this.maxReveals+=15;break;case 1477:this.maxReveals+=5;break;default:81<=Array.from(a.board.join("")).filter(function(e){return"a"<=e&&"z">=e}).length&&(this.maxReveals+=15)}this.foundBWOTD()&&this.maxReveals++}if(this.puzzle){a=$jscomp.makeIterator(this.words);for(b=a.next();!b.done;b=a.next())b=b.value,this.puzzle.words.includes(b)||(this.words.delete(b),this.puzzle.optionalWords.includes(b)&&this.obscureWords.add(b));a=$jscomp.makeIterator(this.obscureWords);
for(b=a.next();!b.done;b=a.next())b=b.value,this.puzzle.optionalWords.includes(b)||(this.obscureWords.delete(b),this.puzzle.words.includes(b)&&this.words.add(b))}this.score=0;a=$jscomp.makeIterator(this.words);for(b=a.next();!b.done;b=a.next())this.score+=Solution.scoreWord(b.value);this._sawNewPuzzleVersion=!1};Solution.prototype.isEmpty=function(){return 0==this.words.size&&0==this.obscureWords.size};Solution.prototype.isSolved=function(){return this.words.size>=assert(this.puzzle).words.length};
Solution.prototype.has=function(a){return this.words.has(a)||this.obscureWords.has(a)};Solution.prototype.add=function(a){assert(this.puzzle&&this.puzzle.words.includes(a));assert(!this.obscureWords.has(a));if(this.words.has(a))return!1;this.words.add(a);this.score+=Solution.scoreWord(a);this._isTemporary||(Store.saveSolutionForCurPuzzle(this),this._postScore());return!0};
Solution.prototype.addObscure=function(a){assert(this.puzzle&&this.puzzle.optionalWords.includes(a));assert(!this.words.has(a));if(this.obscureWords.has(a))return!1;this.obscureWords.add(a);this.puzzle&&this.puzzle.wordOfTheDay&&this.puzzle.wordOfTheDay.term==a&&this.maxReveals++;this._isTemporary||(Store.saveSolutionForCurPuzzle(this),this._postScore());return!0};
Solution.prototype.addNonWord=function(){assert(this.puzzle);this.words.size!=this.puzzle.words.length&&(this.nonWordCount++,this._isTemporary||Store.saveSolutionForCurPuzzle(this))};Solution.prototype.saveAndPostScore=function(){this._isTemporary||(Store.saveSolutionForCurPuzzle(this),this._postScore())};
Solution.prototype.getScoreTier=function(a){a=this.score/a*100;var b=Solution.getScoreThresholds();return 100<=a?{level:6,tierName:"Complete!"}:a>=b[1]?{level:5,tierName:"Hints"}:a>=b[2]?{level:4,tierName:"Expert"}:a>=b[3]?{level:3,tierName:"Adept"}:0<a?{level:2,tierName:""}:{level:1,tierName:""}};Solution.prototype.getAccuracy=function(){return 0==this.words.size?0:this.words.size/(this.nonWordCount+this.words.size)};
Solution.prototype.useReveal=function(){assert(0<this.maxReveals-this.revealsUsed);this.revealsUsed++;this.saveAndPostScore()};Solution.prototype.foundBWOTD=function(){return this.puzzle&&this.puzzle.wordOfTheDay&&this.obscureWords.has(this.puzzle.wordOfTheDay.term)};Solution.prototype.onRotate=function(){null!==this.rotations&&this.rotations++};
Solution.prototype.devGetApiSolution=function(a){return{puzzleId:this.puzzle.id,puzzleVersion:this.puzzle.version,puzzleDate:a,words:Array.from(this.words),optionalWords:Array.from(this.obscureWords),nonWordCount:this.nonWordCount,ms:this.ms,shared:this.shared,revealsUsed:this.revealsUsed,enabledHints:this.everEnabledHints,changeId:this.changeId}};
Solution.prototype.mergeWithApiSolution=function(a){for(var b=!1,c=$jscomp.makeIterator(a.words),d=c.next();!d.done;d=c.next())d=d.value,this.words.has(d)||this.puzzle&&!this.puzzle.words.includes(d)||(this.words.add(d),b=!0);c=$jscomp.makeIterator(a.optionalWords);for(d=c.next();!d.done;d=c.next())d=d.value,this.obscureWords.has(d)||this.puzzle&&!this.puzzle.optionalWords.includes(d)||(this.obscureWords.add(d),b=!0);this.nonWordCount=a.nonWordCount;a.ms&&this.puzzle&&476!=this.puzzle.id?(null!=this.ms&&
this.ms<a.ms&&(this.ms=a.ms),this.revealsUsed=Math.max(this.revealsUsed,a.revealsUsed)):a.ms&&this.puzzle&&476==this.puzzle.id&&(this.ms=Math.max(this.ms,a.ms),b=!0);this.shared=this.shared||a.shared;this.everEnabledHints=this.everEnabledHints||(null==a.enabledHints?!0:a.enabledHints);this.changeId=Math.max(this.changeId,a.changeId);Store.saveSolutionForKey(this,a.puzzleDate);return b};
Solution.prototype._postScore=function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return api.syncSolution(a.getSyncObject()),!a._sawNewPuzzleVersion&&a.puzzle&&a.puzzle.version?c.yield(api.getPuzzleVersion(a.puzzle.id),3):c.jumpTo(0);b=c.yieldResult;b.major>(new VersionNumber(a.puzzle.version)).major&&(a._sawNewPuzzleVersion=!0);c.jumpToEnd()})};
Solution.prototype.getSyncObject=function(){return{puzzleId:this.puzzle.id,puzzleVersion:this.puzzle.version,words:Array.from(this.words),optionalWords:Array.from(this.obscureWords),nonWordCount:this.nonWordCount,ms:this.ms,shared:this.shared,revealsUsed:this.revealsUsed,enabledHints:this.everEnabledHints,changeId:this.changeId}};
Solution.scoreWord=function(a){if("bee"==Config.game){var b=a.length;7==(new Set(Array.from(a))).size&&(b+=7);return b}b=Solution._scores[a.length];return void 0===b?(a.length-1)*(a.length-2)/2:b};Solution.scoreWords=function(a){return a.reduce(function(b,c){return Solution.scoreWord(c)+b},0)};$jscomp.global.Object.defineProperties(Solution.prototype,{ms:{configurable:!0,enumerable:!0,get:function(){return this._ms},set:function(a){this._ms=a}}});
Solution._scores=[0,0,0,0,5,8,12,16,22,30,38,46,58,68,80,90,100];Solution.getScoreThresholds=function(){return Store.isLevelUpFasterEnabled()?[100,55,40,25]:[100,65,50,35]};var DefinitionView=function(a,b,c){this.origWord=a;this.definition=b;this.lexiconEntry=void 0===c?null:c;this._parent=this._keyDownListener=this._windowClickListener=this._closeClickListener=this._definitionLinkListener=null};
DefinitionView.prototype.show=function(a){var b=this;(a=void 0===a?null:a)||(a=$("#definition"));this._parent=a;a.querySelector(".definitionWord").textContent=this.definition.displayWord;try{var c;if(null==(c=this.lexiconEntry)?0:c.displayWord){var d;a.querySelector(".definitionWord").textContent=null==(d=this.lexiconEntry)?void 0:d.displayWord}}catch(h){console.error(h)}a.querySelector(".definitionWord").classList.remove("small");var e;c=null==(e=window.wordStats)?void 0:e[this.origWord];a.querySelector(".definitionStats").textContent=
c?"Found by "+Math.round(100*c.pctFound)+"% of players on average in "+c.numPuzzles+" daily puzzle"+(1==c.numPuzzles?"":"s")+" this year.":"";e=a.querySelector(".definitionNote");c=a.querySelector(".definitionNoteBody");c.textContent="";e.hidden=!0;var f;(null==(f=this.lexiconEntry)?0:f.note)?(f=this.lexiconEntry.note,this.definition.displayWord!=this.lexiconEntry.displayWord&&(f+="\n\n(As you can see, we haven't updated our dictionary code to account for diacritics yet!)"),c.innerHTML=MarkdownLite.toHtml(f),
e.hidden=!1):window.wordStats&&(f=gLexicon[this.origWord])&&(c.textContent=f,e.hidden=!1);f=!(this.definition instanceof UndefinedWordDefinition);a.querySelector(".definitionSource").hidden=!f;if(f){if(this.definition.isLicensed()){a.querySelector(".definitionEntry").innerHTML=this.definition.htmlDefinition();var g=a.querySelector("a.sound");g&&fetch(g.getAttribute("href")).then(function(h){200==h.status&&(g.hidden=!1,g.addEventListener("click",function(k){k.preventDefault();k.stopPropagation();gAudio.playDefinition(g.getAttribute("href"))}))})}else a.querySelector(".definitionEntry").innerHTML=
"";a.querySelector(".definitionLink .dictionaryWord").textContent=this.definition.displayWord;a.querySelector(".definitionLink").setAttribute("href",this.definition.getLink());this._definitionLinkListener=function(){return b._close()};a.querySelector(".definitionLink").addEventListener("click",this._definitionLinkListener);a.querySelector(".definitionContent .dictionaryName").innerHTML=this.definition.getDictionaryNameHtml()}else a.querySelector(".definitionEntry").textContent="Sorry, no definition found.";
this._windowClickListener=function(h){(h=document.elementFromPoint(h.clientX,h.clientY))&&$("#definition").contains(h)||b._close()};window.addEventListener("pointerdown",this._windowClickListener);this._closeClickListener=function(h){h.preventDefault();b._close()};a.querySelector("h2 a").addEventListener("click",this._closeClickListener);this._keyDownListener=function(h){if("Escape"==h.key||"Esc"==h.key)b._close(),h.preventDefault(),h.stopPropagation()};window.addEventListener("keydown",this._keyDownListener);
a.hidden=!1;a.querySelector(".definitionContent").scrollTop=0;$("#definition").scrollTop=0;f=a.querySelector("h2 a").getBoundingClientRect();e=a.getBoundingClientRect();f.x+f.width>e.x+e.width&&a.querySelector(".definitionWord").classList.add("small");"undefined"==typeof gAchievementsMgr||DefinitionView.lookedUpWords.has(this.origWord)||(gAchievementsMgr.increment("languageLearner"),DefinitionView.lookedUpWords.add(this.origWord))};
DefinitionView.prototype._close=function(){this._parent.querySelector(".definitionLink").removeEventListener("click",this._definitionLinkListener);window.removeEventListener("pointerdown",this._windowClickListener);this._parent.querySelector("h2 a").removeEventListener("click",this._closeClickListener);window.removeEventListener("keydown",this._keyDownListener);$("#definition").hidden=!0};
DefinitionView.fromDefinition=function(a,b,c,d,e){e=void 0===e?null:e;b=b.get(a)||c.get(a);!b&&d&&(b=d.collins&&d.collins.includes(a)?new CollinsWordDefinition(a):d["merriam-webster"]&&d["merriam-webster"].includes(a)?new MerriamWebsterWordDefinition(a):d.oxford&&d.oxford.includes(a)?new OxfordWordDefinition(a):new UndefinedWordDefinition(a));return b?new DefinitionView(a,b,e):new DefinitionView(a,new UndefinedWordDefinition(a),e)};DefinitionView.lookedUpWords=new Set;var WordOfTheDay=function(a,b,c,d,e){this.term=a;this.definition=b;this.definitionMd=c;this.pronunciation=d;this.image=void 0===e?null:e};WordOfTheDay.prototype.html=function(){var a=this.definition;this.definitionMd&&(a=MarkdownLite.toHtml(this.definitionMd+(this.image?"\n\n"+this.image:"")));return a};
var Puzzle=function(a,b,c,d,e,f,g,h,k,l,m,q,r,n){this.board=a;this.words=b;this.optionalWords=c;this.definitions=d?new Map(d.map(function(p){return[p.origWord,p]})):new Map;this.wiktDefinitions=e?new Map(e.map(function(p){return[p.origWord,p]})):new Map;this.dictionaryEntries=f;this.wordOfTheDay=g||null;this.difficulty=h||null;this.id=k||null;this.version=l||null;this.intro=m||null;this.message=q||null;this.credits=r||{};this.special=n||{speller:!1}};
Puzzle.prototype.toSerializableObject=function(){var a={board:this.board,words:this.words.sort(),optionalWords:this.optionalWords.sort(),definitions:Array.from(this.definitions.values()).map(function(b){return b.toObj()}),wiktDefinitions:Array.from(this.wiktDefinitions.values()).map(function(b){return b.toObj()}),dictionaryEntries:this.dictionaryEntries};this.wordOfTheDay&&this.wordOfTheDay.term&&(a.wordOfTheDay={term:this.wordOfTheDay.term,definition:this.wordOfTheDay.definition,definitionMd:this.wordOfTheDay.definitionMd,
pronunciation:this.wordOfTheDay.pronunciation});this.difficulty&&(a.difficulty=this.difficulty);this.intro&&(a.intro=this.intro);this.message&&(a.message=this.message);0<Object.getOwnPropertyNames(this.credits).length&&(a.credits=this.credits);0<Object.getOwnPropertyNames(this.special).length&&(a.special=this.special);return a};
Puzzle.prototype.hasSimilarWord=function(a){var b=Array.from(a.toLowerCase()).filter(function(g){return"a"<=g&&"z">=g}).join("");a=a.toLowerCase();for(var c=$jscomp.makeIterator([["1","i"],["!","i"],["@","a"],["3","e"],["$","s"],["5","s"],["0","o"]]),d=c.next();!d.done;d=c.next())d=d.value,a=a.replaceAll(d[0],d[1]);a=Array.from(a).filter(function(g){return"a"<=g&&"z">=g}).join("");c=this.words.slice();this.wordOfTheDay&&c.push(this.wordOfTheDay.term);if(-1!=c.indexOf(b)||-1!=c.indexOf(a))return!0;
c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next()){d=d.value;for(var e=$jscomp.makeIterator([b,a]),f=e.next();!f.done;f=e.next())if(f=Util.editDistance(f.value,d),4==d.length){if(0==f)return!0}else if(.25>=f/d.length)return!0}return!1};
Puzzle.prototype.getSpecialWordMessage=function(a){if(!Array.isArray(this.special.dialogWords))return this.special.dialogWords&&console.warn("Unexpected type for dialogWords: "+typeof this.special.dialogWords),null;for(var b=$jscomp.makeIterator(this.special.dialogWords),c=b.next();!c.done;c=b.next()){c=c.value;if(!Array.isArray(c.words)){console.log("Unexpected type for dialogWords.words: "+typeof c);break}if(c.words.includes(a)){a=c.message;if("object"!=typeof a||"string"!=typeof a.title||"string"!=
typeof a.body){console.log("Invalid message in dialogWords");break}return{title:MarkdownLite.toHtml(c.message.title),body:MarkdownLite.toHtml(c.message.body)}}}return null};
var tutorialWords=["play","find","tutorial"],tutorialBWs="airt alto aril lair lari liar lira lirot oral rail rial rialto rotl rout tora tori tour tout trail trial trou trout tutor urial".split(" "),tutorialPuzzles=[new Puzzle(["play","    ","    ","    "],tutorialWords,tutorialBWs),new Puzzle(["    ","  if","  nd","    "],tutorialWords,tutorialBWs),new Puzzle([" la ","tri ","ou  ","  t "],tutorialWords,tutorialBWs)];var WordDefinition=function(a){this.displayWord=this.origWord=a};WordDefinition.prototype.isLicensed=function(){return!1};WordDefinition.prototype.getDictionaryNameHtml=function(){assertNotReached("Child class should override this function");return""};WordDefinition.prototype.getLink=function(){assertNotReached("Child class should override this function");return""};WordDefinition.prototype.htmlDefinition=function(){assertNotReached("Child class should override this function");return""};
var UndefinedWordDefinition=function(a){WordDefinition.call(this,a)};$jscomp.inherits(UndefinedWordDefinition,WordDefinition);var wiktionaryPos={adj:"adjective",adv:"adverb",conj:"conjunction",det:"determiner",intj:"interjection",prep:"preposition",pron:"pronoun"},WiktionaryWordEntry=function(a,b){this.pos=a;this.definitions=b};WiktionaryWordEntry.prototype.toObj=function(){return{pos:this.pos,definitions:this.definitions}};WiktionaryWordEntry.fromObj=function(a){return new WiktionaryWordEntry(a.pos,a.definitions)};var WiktionaryWordDefinition=function(a,b,c){WordDefinition.call(this,a);this.meanings=b;this.audio=c};
$jscomp.inherits(WiktionaryWordDefinition,WordDefinition);WiktionaryWordDefinition.prototype.isLicensed=function(){return!0};WiktionaryWordDefinition.prototype.getDictionaryNameHtml=function(){return"Wiktionary (user-generated content)"};WiktionaryWordDefinition.prototype.getLink=function(){return"https://en.wiktionary.org/wiki/"+this.displayWord+"#English"};
WiktionaryWordDefinition.prototype.htmlDefinition=function(){var a="\n      <p>\n        <strong>"+this.displayWord+"</strong>";this.audio&&(a+=' <a hidden target="_blank" class="sound" data-button="definition-sound" href="'+(this.audio+'"><svg class="inline-icon"><use href="#icon-audio"></svg></a>'));a+="</p>";for(var b=$jscomp.makeIterator(this.meanings),c=b.next();!c.done;c=b.next()){c=c.value;a+="<em>"+(wiktionaryPos[c.pos]||c.pos)+"</em>";a+="<ol>";c=$jscomp.makeIterator(c.definitions);for(var d=
c.next();!d.done;d=c.next()){var e=d.value;d=[];var f="";"string"!=typeof e&&(d=e.tags||[],e=e.text);d.length&&(f+="(<i>"+Util.encodeEntities(d.join(", "))+"</i>) ");f+=Util.encodeEntities(e[0].toUpperCase()+e.slice(1));"."!=f[f.length-1]&&(f+=".");a+="<li>"+f+"</li>"}a+="</ol>"}return a};WiktionaryWordDefinition.prototype.toString=function(){return this.displayWord+"\n"+this.meanings.map(function(a){return"  "+a.pos+"\n"+a.definitions.map(function(b){return"  * "+b.toString()}).join("\n")}).join("\n")};
WiktionaryWordDefinition.prototype.toObj=function(){return{origWord:this.origWord,meanings:this.meanings.map(function(a){return a.toObj()}),audio:this.audio}};WiktionaryWordDefinition.fromObj=function(a){return new WiktionaryWordDefinition(a.origWord,a.meanings.map(function(b){return WiktionaryWordEntry.fromObj(b)}),a.audio)};var CollinsWordDefinition=function(a){WordDefinition.call(this,a)};$jscomp.inherits(CollinsWordDefinition,WordDefinition);CollinsWordDefinition.prototype.isLicensed=function(){return!1};CollinsWordDefinition.prototype.getDictionaryNameHtml=function(){return"Collins English Dictionary"};CollinsWordDefinition.prototype.getLink=function(){return"https://www.collinsdictionary.com/us/dictionary/english/"+this.displayWord};var MerriamWebsterWordDefinitionObj,MerriamWebsterWordDefinition=function(a){WordDefinition.call(this,a)};$jscomp.inherits(MerriamWebsterWordDefinition,WordDefinition);MerriamWebsterWordDefinition.prototype.isLicensed=function(){return!1};MerriamWebsterWordDefinition.prototype.getDictionaryNameHtml=function(){return"Merriam-Webster's Collegiate<sup>&reg;</sup> Dictionary"};MerriamWebsterWordDefinition.prototype.getLink=function(){return"https://www.merriam-webster.com/dictionary/"+this.displayWord};
MerriamWebsterWordDefinition.prototype.htmlDefinition=function(){assertNotReached("Not licensed");return""};MerriamWebsterWordDefinition.fromObj=function(a){return new MerriamWebsterWordDefinition(a.origWord)};MerriamWebsterWordDefinition.prototype.toObj=function(){return{origWord:this.origWord,word:this.origWord,shortDefinition:[""]}};var OxfordWordDefinition=function(a){WordDefinition.call(this,a)};$jscomp.inherits(OxfordWordDefinition,WordDefinition);OxfordWordDefinition.prototype.isLicensed=function(){return!1};OxfordWordDefinition.prototype.getDictionaryNameHtml=function(){return"Oxford Languages via Google"};OxfordWordDefinition.prototype.getLink=function(){return"https://www.google.com/search?q=define+"+encodeURIComponent(this.displayWord)};var Beta=function(){var a=this;this.isBeta=(location.pathname.includes("/beta")||location.pathname.includes("/alpha")||location.hostname.endsWith(".test"))&&!location.href.includes("pretendStable");this.isLiterallyBeta=location.pathname.includes("/beta");this._showedRedirectDialog=!1;this.useBetaPuzzle=this.isBeta&&null!=(new URL(location.href)).searchParams.get("betaPuzzle");this.hasBetaPuzzle=!1;this.isBeta&&($("#choosePuzzleBtn").hidden=!1);onReady(function(){return gTryDebug(function(){var b=
$("#enterExitBeta"),c=$("#enterExitBetaBtn"),d=b.querySelector(".updating");c.addEventListener("click",function(){d.textContent="Updating...";c.disabled=!0;GlobalStore.setUseBeta(!GlobalStore.useBeta());gSettings.maybePostSettings().then(function(){a._setUpBetaButtons();d.textContent="Updated!";var e=new URL(location.href);GlobalStore.useBeta()&&!a.isLiterallyBeta?e.pathname=e.pathname.replace("/","/beta/"):!GlobalStore.useBeta()&&a.isLiterallyBeta&&(e.pathname=e.pathname.replace("/beta",""));e.href!=
location.href&&api.setLocation(e.href,"beta")}).catch(function(){d.textContent="Network or server error"}).finally(function(){c.disabled=!1})})})})};
Beta.prototype.getBetaPuzzle=function(a){a=void 0===a?null:a;var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return assert(b.isBeta),d.yield(api.getBetaPuzzle(a),2);c=d.yieldResult;if(null==c)return b.useBetaPuzzle=!1,d.return();$("#choosePuzzleBtn").disabled=!1;b.useBetaPuzzle&&(c.difficulty=void 0,gPuzzleManager.setBetaPuzzle(c),$("#betaWatermark").hidden=!1,setTimeout(function(){Store.showedBetaPuzzleDialog()||gPopups.isPopupOpen()||(Dialog.show("Preview puzzle",
'<p>This is the <strong>preview puzzle</strong>. It\'s a sneak peek\n            of an upcoming puzzle for beta testers to try before we release\n            it publicly. Please try it out and send me\n            feedback&mdash;is it fun? How many difficulty stars? Any problems?\n            </p>\n            <p>A new preview puzzle is uploaded once or twice a week. When this\n            puzzle becomes the regular daily puzzle, your scores will be posted\n            to the leaderboard about 2 hours later. For more info, see the\n            <a href="/beta-faqs.html" target="_blank">Beta FAQs</a>.</p>\n            <p>To get back to the regular puzzle, tap the puzzle piece icon\n            <svg class="inline-icon"><use href="#icon-puzzle-star"></svg>\n            in the top left.</p>\n            <p>Thanks, and enjoy!</p>',
!1,!0),setTimeout(function(){return Store.setShowedBetaPuzzleDialog()},5E3))},2E3));onReady(function(){var e=$("#choosePuzzleBtn");if(b.useBetaPuzzle)e.querySelector("use").setAttribute("href","#icon-puzzle-star");else if(c.id!=Store.lastBetaPuzzleAdvertised()){Store.setLastBetaPuzzleAdvertised(c.id);var f=$("header #betaPuzzleBox");e.classList.add("throb");f.hidden=!1;[e,f].forEach(function(g){g.addEventListener("click",function(h){f.remove();e.classList.remove("throb")})})}$("#choosePuzzleBtn").addEventListener("click",
function(){var g=new URL(location.href);b.useBetaPuzzle?g.searchParams.delete("betaPuzzle"):(g.searchParams.set("betaPuzzle","1"),g.searchParams.delete("date"),g.searchParams.delete("level"));api.setLocation(g.href,"betaPuzzle")})});d.jumpToEnd()})};
Beta.prototype._setUpBetaButtons=function(){$("#enterExitBeta").hidden=!1;$(".updating").textContent="";GlobalStore.useBeta()?($("#enterExitBetaDesc").textContent="You're part of Squaredle Beta.",$("#enterExitBetaBtn").textContent="Opt out of Squaredle Beta"):($("#enterExitBetaDesc").textContent="You're authorized for Squaredle Beta. Would you like to opt in?",$("#enterExitBetaBtn").textContent="Opt in to Squaredle Beta")};
Beta.prototype.handleBetaStatus=function(){if(GlobalStore.isBetaAllowed())if(this._setUpBetaButtons(),this.isBeta||!GlobalStore.useBeta()||this._showedRedirectDialog||gPopups.isPopupOpen())this.isBeta&&this._showedRedirectDialog&&($("#outerContainer").style.opacity="",gPopups.close());else{var a=new URL(location.href);a.pathname="/beta/";this._showedRedirectDialog=!0;Dialog.show("Squaredle Beta",'<div class="p">You have access to\n          <a href="'+a.href+'">Squaredle Beta</a>!\n          Please update your bookmarks to point to\n          <a href="'+
a.href+'">squaredle.app/beta</a>.</div>\n          <div class="disclaimer">\n            <div class="p">If you installed Squaredle like an app,\n            you\'ll need to replace it so it points to the beta:</div>\n            <ol>\n              <li>Delete the app (make sure you DON\'T ask it to clear user data)\n              </li>\n              <li>Open Squaredle.app in a regular browser and proceed to the\n              beta</li>\n              <li>Once you\'re at the beta site, install it from the prompt or\n              find an option in the browser menu like "Install app" or "Create\n              shortcut"</li>\n            </ol>\n          </div>\n          <div class="p">If you have any questions, please\n            <a href="https://discord.gg/Pkad9p4rsq" target="_blank">\n              join the Discord!\n            </a>\n          </div>\n          ')}else $("#enterExitBeta").hidden=
!0,this.isLiterallyBeta&&!this._showedRedirectDialog&&($("#outerContainer").style.opacity="0",this._showedRedirectDialog=!0,Dialog.show("Beta access","<p>You're using the beta site, but you're not signed in with a user\n          that has access to the beta.</p>\n          <p>Please visit the main site at\n          <a href=\"https://squaredle.app\">squaredle.app</a>. The beta will open\n          up to more players soon!</p>\n          <p>If you think you should have access, visit the main site and make\n          sure you're signed in with an email address.</p>",
!0))};var gBeta=gTryDebug(function(){return new Beta});var SpecialPuzzleManager=function(){this.rendered=!1;this.puzzles=[{title:"lirpA looF",message:"April Fools! Can you spell all the words... in reverse?",puzzleName:"lirpa-loof",label:"yalP"},{title:"Valentine's Day 2025",message:"Are you there, Cupid?",puzzleName:"valentine-25",label:"Play \u2764\ufe0f"},{title:"Holiday (Word)Play",message:"Relive some childhood memories through this winter holiday\u2013themed puzzle.",puzzleName:"winter-24",label:"Celebrate the season"},{title:"1,000 Days",message:"A special puzzle to celebrate our 1,000th day.",
puzzleName:"1k",label:"That's a lot of days!"},{title:"Movember",message:"If you can't grow a mustache for men's health awareness in November, try playing this puzzle instead.",puzzleName:"movember",label:"Mo",release:"2024/11/11"},{title:"Monster Hunt",message:"Who will slay these creatures of the night?",puzzleName:"spooky3",label:"Begin the Hunt"},{title:"Pasta, Pasta, Pasta",message:"Enjoy some pasta over our World Pasta Day Squaredle.",puzzleName:"pasta",label:"Mangia!"},{title:"Avast",message:"We've sprinkled some pirate-themed words into our latest special\n      puzzle for Talk Like a Pirate Day.",
puzzleName:"arrrrr",label:"Arrrrr"},{title:"Summer Olympics 2024",message:"Join in the spirit of the Olympic Games by striving for\n      excellence, respecting others, and celebrating global friendships.",puzzleName:"olympics-24",label:"Let the Games Begin"},{title:"Eid al-Adha",message:"Celebrate the Feast of Sacrifice with Squaredle.",puzzleName:"hajj-24",label:"Join the Feast"},{title:"Arbor Day",message:"Plant a tree, then play this 10x10 puzzle! (The tree will\n        probably be all grown up when you're done.)",
puzzleName:"arbor-day-24",label:"Branch Out"},{title:"Poetry Contest",message:"Play the puzzle we used for our 2nd Anniversary\n      Poetry Contest.",puzzleName:"poetry",label:"To Play, Or Not to Play"},{title:"Rare Disease Day",message:"Raise awareness for patients, families and carers affected by\n      a rare disease.",puzzleName:"rare-disease",label:"Learn More"},{title:"Valentine's Day 2024",message:"For those of us who don't have a date tonight.",puzzleName:"valentine24",label:"Squaredle and Chill"},
{title:"New Year's Eve 2023",message:"Say goodbye to 2023.",puzzleName:"nye23",label:"Happy New Year"},{title:"Kwanzaa 2023",message:'From Dec. 26 to Jan. 1, Kwanzaa celebrates the Seven Principles\n        ("Nguzo Saba" in Swahili), core values of African heritage that\n        reinforce community among African Americans.',puzzleName:"kwanzaa23",label:"Happy Kwanzaa"},{title:"Hanukkah",message:"Celebrate Hanukkah 2023 with this special puzzle.",puzzleName:"hanukkah23",label:"Happy Hanukkah"},{title:"Thanksgiving",
message:"What are you thankful for?",puzzleName:"thanksgiving",label:"Play Thanksgiving Puzzle"},{title:"Toil and Trouble",message:"Happy Halloween!",puzzleName:"spooky2",label:"Boo"},{title:"Waffle Ingredients",message:"\n          A delicious word search!",puzzleName:"waffle-ingredients",label:"Let's Get Cookin'"},{title:"Medical",message:"\n          A puzzle seeded with all sorts of medical terms.",puzzleName:"medical",label:"Diagnose Me"},{title:"Secret Premium Puzzle",message:"\n      A secret puzzle for Squaredle Squared subscribers.",
puzzleName:"secret",label:"I Support Squaredle",isPremium:!0},{title:"Gemstones",message:"\n        Crystals & rocks & jewels, oh my!",puzzleName:"gemstones",label:"Oooh, Shiny"},{title:"Got Salt?",message:"\n        This 7x7 puzzle is supernaturally inspired and may cause possession.\n        Play at your own risk.",puzzleName:"otherworldly",label:"Join the Hunt"},{title:"British English",message:"A special puzzle that requires British English spelling.",puzzleName:"uk",label:"We Apologise in Advance"},
{title:"Waffle Squaredle #2",message:'\n          <a href="https://wafflegame.net/" target="_blank">Waffle</a> is a\n          Wordle-inspired game shaped like a waffle in which you swap\n          letters until you\'ve formed all six words.',message2:"Waffle #391 can be played as a Squaredle puzzle!",puzzleName:"waffle2",label:"Play Waffle Squaredle #2"},{title:"Valentine's",message:"Will you be my Valentine?",puzzleName:"valentine",label:"Play \u2764\ufe0f"},{title:"5-Star",message:"A 5-star puzzle.",
puzzleName:"5star",label:"Play"},{title:"Time",message:"Is time a fundamental part of the universe, or an emergent\n          or illusory phenomenon?",puzzleName:"time",label:"Time to Play"},{title:"Kwanzaa Squaredle",message:"Happy Kwanzaa!",puzzleName:"kwanzaa",label:"Play Kwanzaa Puzzle"},{title:"Christmas Squaredle",message:"Merry Christmas!",puzzleName:"xmas",label:"Play Christmas Puzzle"},{title:"Hanukkah",message:"A puzzle celebrating Hanukkah, a Jewish religious holiday and a\n      major 8-day cultural festival.",
puzzleName:"hannukah",label:"Play Hanukkah Puzzle"},{title:"Spooky Squaredle",message:"Play this puzzle... if you dare!",puzzleName:"spooky",label:"Boo!"},{title:"Special Puzzle",message:"Just a 72-word puzzle.",puzzleName:"special",label:"Play"},{title:"Reddit",message:'Eight words in this puzzle were crowdsourced from the\n          <a href="https://reddit.com/r/squaredle" target="_blank"\n            data-button="specialPuzzles-reddit">r/squaredle subreddit</a>.\n          <em>Hint: The _______ ______ at midnight.</em>',
puzzleName:"reddit",label:"Play Reddit Puzzle"},{title:"Discord",message:'The\n          <a href="https://discord.gg/Pkad9p4rsq" target="_blank"\n            data-button="specialPuzzles-discord">Squaredle Discord</a> is a great\n          spot to chat about Squaredle, get hints, suggest new features, and even\n          submit puzzles to be featured as future Squaredles. Try this\n          Discord-themed Squaredle, too!',puzzleName:"discord200",label:"Play Discord Puzzle"},{title:"500 Subscribers",
message:'Wow, we\'ve passed 500\n          <span class="notPremium">\n            <a href="#" class="premiumBtn" data-button="specialPuzzles-premium">\n              Squaredle Squared</a>\n          </span>\n          <span class="premium">Squaredle Squared</span>\n          subscribers! Here\'s a new puzzle and a special\n          <a href="https://blog.squaredle.app/making-of-squaredle" target="_blank">\n            blog post</a>.',puzzleName:"sub500",label:"Play 500 Subs Puzzle"},{title:"Waffle Squaredle",
message:'\n          <a href="https://wafflegame.net/" target="_blank">Waffle</a> is a\n          Wordle-inspired game shaped like a waffle in which you swap letters\n          until you\'ve formed all six words.',message2:"Waffle #138 can be played as a Squaredle puzzle!",puzzleName:"waffle",label:"Play Waffle Squaredle"},{title:"50 Subscribers",message:'In honor of our 50th\n          <span class="notPremium">\n            <a href="#" class="premiumBtn" data-button="specialPuzzles-premium">\n              Squaredle Squared</a>\n          </span>\n          <span class="premium">Squaredle Squared</span>\n          subscriber, play this special puzzle with over 200 words.',
puzzleName:"sub50",label:"Play 50 Subs Puzzle"},{title:"10x10",message:"\n            Members of the community developed this <strong>insane</strong> 10x10\n            Squaredle.",message2:" \n            <strong>Warning:</strong> This puzzle will consume your soul.\n      ",puzzleName:"10x10",label:"Abandon All Hope"},{title:"10x10 #2",message:"\n            This 10x10 actually has a bit of a theme.\n      ",puzzleName:"10x10-2",label:"Fire Hazard Ahead"}];Store.isPremium()||(this.puzzles=this.puzzles.filter(function(a){return!a.isPremium}))};
SpecialPuzzleManager.prototype.show=function(){this._render();gPopups.show($("#specialPuzzles"))};
SpecialPuzzleManager.prototype._render=function(){if(!this.rendered){this.rendered=!0;for(var a=$("#specialPuzzles .content"),b=$jscomp.makeIterator(this.puzzles),c=b.next();!c.done;c=b.next()){c=c.value;if(c.release&&("TBD"==c.release||c.release>gTodayDateStr))if(gBeta.isBeta){var d="Beta preview";d="TBD"==c.release?d+". Release date TBD":d+(". Releases on "+c.release);c.message+="<br><br><strong><em>("+d+".)</em></strong>"}else c.message="<em>Coming "+("TBD"==c.release?"soon":"on "+c.release)+":<br><br>"+
c.message+"</em>";a.appendChild(document.createElement("hr"));d=a;c.puzzleName.startsWith("10x10")&&(d=document.createElement("div"),d.classList.add("disclaimer"),a.appendChild(d));var e=document.createElement("h3");e.textContent=c.title;d.appendChild(e);e=document.createElement("div");e.classList.add("p");e.innerHTML=c.message;d.appendChild(e);c.message2&&(e=document.createElement("div"),e.classList.add("p"),e.innerHTML=c.message2,d.appendChild(e));if(!c.release||"TBD"!=c.release&&c.release<=gTodayDateStr||
gBeta.isBeta){e=document.createElement("div");e.classList.add("p");var f=document.createElement("a");f.setAttribute("href","?puzzle="+c.puzzleName);f.classList.add("primaryButton");c.isPremium&&(f.innerHTML='<svg class="inline-icon"><use href="#icon-premium"></svg> ');f.appendChild(document.createTextNode(c.label));e.appendChild(f);d.appendChild(e)}}}};var gSpecialPuzzleManager=new SpecialPuzzleManager;var PuzzleManager=function(){this.isTodayPuzzle=!0;this.isSpecialPuzzle=this.isWeeklyPuzzle=!1;gTryDebug(function(){if("undefined"==typeof gTodayDateStr||"undefined"==typeof gTodayDateStr||"undefined"==typeof gPuzzleConfig||"undefined"==typeof gPuzzleConfig.puzzles[gTodayDateStr])throw Error("Couldn't fetch puzzle.\nPlease reload or try again in a few minutes.\nSorry about that :-(");});this.puzzleKey=gTodayDateStr;this.puzzles=new Map;this.puzzleStats=new Map;this.archiveDate=this._betaPuzzle=null;
this.level="";DateUtil.setDates(gTodayDateStr,gYesterdayDateStr);this._setPuzzlesFromDataObj(gPuzzleConfig);this.puzzle=this.puzzles.get(this.puzzleKey)};
PuzzleManager.prototype._updatePuzzle=function(a,b,c){this.puzzleKey=a;this.puzzle=b;this.level=void 0===c?"":c;this.puzzleKey.startsWith("spooky")&&!Store.needsTutorial()&&document.body.classList.add("spooky");gAds.updatePuzzle(this.isWeeklyPuzzle?"weekly":this.isSpecialPuzzle?"special":this.archiveDate?"archive":"daily",this.level||(this.isWeeklyPuzzle?"weekly":this.isSpecialPuzzle?"special":"standard"))};
PuzzleManager.prototype.getPuzzle=function(a){return this._betaPuzzle&&a==DateUtil.getTodayStr()?this._betaPuzzle:this.puzzles.get(a)};PuzzleManager.prototype.getYesterdayDateStr=function(){var a=DateUtil.getYesterdayStr();if(!a)return"";this.isWeeklyPuzzle?a+="-weekly":this.level&&(assert("xp"==this.level),a+="-"+this.level);return a};PuzzleManager.prototype.getYesterdayPuzzle=function(){return this.puzzles.get(this.getYesterdayDateStr())};
PuzzleManager.prototype.setPuzzlesForDev=function(a,b,c){DateUtil.setDates(a,b);this.puzzleKey=a;this._setPuzzlesFromDataObj(c);this.puzzle=this.puzzles.get(this.puzzleKey);this.isTodayPuzzle=!1};
PuzzleManager.prototype.setArchivePuzzle=function(a,b,c){this.archiveDate=a;var d=a+(b?"-"+b:"");this.puzzles.delete(DateUtil.getTodayStr());DateUtil.getYesterdayStr()&&this.puzzles.delete(assert(DateUtil.getYesterdayStr()));DateUtil.setDates(a,"no-yesterday");a={puzzles:{},puzzleStats:{}};a.puzzles[d]=c;this._setPuzzlesFromDataObj(a);this._updatePuzzle(d,this.puzzles.get(d),b);this.isTodayPuzzle=!1;$("#drawerToday").hidden=!1};
PuzzleManager.prototype.fetchLevel=function(a){assert(""==a||"xp"==a);assert(!this.puzzleKey.includes("-"));var b=this.puzzleKey+(a?"-"+a:""),c=this.puzzles.get(b);if(!c)return alert("Unable to find level for puzzle"),gRouter.updateQueryParams({},["level"]),!1;this._updatePuzzle(b,c,a);this.level=a;return!0};
PuzzleManager.prototype.setSpecialPuzzle=function(a,b){this.puzzles.delete(DateUtil.getTodayStr());DateUtil.getYesterdayStr()&&this.puzzles.delete(assert(DateUtil.getYesterdayStr()));var c={puzzles:{},puzzleStats:{}};c.puzzles[a]=b;this._setPuzzlesFromDataObj(c);this.isTodayPuzzle=!1;this.isSpecialPuzzle=!0;this._updatePuzzle(a,this.puzzles.get(a));$("#drawerToday").hidden=!1;"1k"==a&&(window.wordStats={},Util.setIntervalImmediate(function(){api._fetchJson("1k.json").then(function(d){var e=d.version;
if(!window.wsVersion||e>window.wsVersion)for(window.wsVersion=e,d=$jscomp.makeIterator(d.words),e=d.next();!e.done;e=d.next())e=e.value,window.wordStats[e.word]=e})},6E5),Util.setIntervalImmediate(function(){api._fetchJson("1k-lexicon.json").then(function(d){var e=d.version;if(!window.lexiconVersion||e>window.lexiconVersion)window.lexiconVersion=e,gLexicon=d.lexicon})},6E5))};
PuzzleManager.prototype.setWeeklyPuzzles=function(a){this.puzzles.delete(DateUtil.getTodayStr());DateUtil.getYesterdayStr()&&this.puzzles.delete(assert(DateUtil.getYesterdayStr()));var b=Object.getOwnPropertyNames(a).sort().reverse();DateUtil.setDates(b[0].replace("-weekly",""),b[1]?b[1].replace("-weekly",""):null);this._setPuzzlesFromDataObj({puzzles:a,puzzleStats:{}});this.isSpecialPuzzle=this.isTodayPuzzle=!1;this.isWeeklyPuzzle=!0;this._updatePuzzle(b[0],this.puzzles.get(b[0]));$("#drawerToday").hidden=
!1};PuzzleManager.prototype.getBetaPuzzle=function(){return assert(this._betaPuzzle)};PuzzleManager.prototype.setBetaPuzzle=function(a){this._betaPuzzle=this._getPuzzleFromApiPuzzle(a);this.isTodayPuzzle=!1;this._updatePuzzle("beta-"+a.id,this._betaPuzzle)};PuzzleManager.prototype.playPastPuzzle=function(a){gRouter.updateQueryParams({date:a.replaceAll("/","-")},["betaPuzzle","puzzle","level"])};
PuzzleManager.prototype.playTodayPuzzle=function(a){var b=["date","betaPuzzle","puzzle"];(void 0===a?0:a)&&b.push("level");gRouter.updateQueryParams({},b)};PuzzleManager.prototype.playLevel=function(a){var b={};this.archiveDate&&(b.date=this.archiveDate.replaceAll("/","-"));a&&(b.level=a);gRouter.updateQueryParams(b,["betaPuzzle","puzzle","level"])};
PuzzleManager.prototype.deleteSolution=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return d.yield(Util.confirm('\n      <div class="p">Replay this puzzle?</div>\n      <div class="p">Your word list will be cleared.</div>\n      <div class="p">Your leaderboard position will <strong>freeze</strong> and\n      can no longer change, even if you do better this time.</div>',"Replay","Cancel"),2);case 2:if(!d.yieldResult){d.jumpTo(3);
break}ButtonClickEvent.log("replay-confirm");(c=a==b.puzzleKey)&&gPageTimer.finish();Store.deleteSolution(a);return d.yield(api.deleteSolution(a,c),4);case 4:return d.return(!0);case 3:return ButtonClickEvent.log("replay-cancel"),d.return(!1)}})};
PuzzleManager.prototype._setPuzzlesFromDataObj=function(a){for(var b=$jscomp.makeIterator(Object.getOwnPropertyNames(a.puzzles)),c=b.next();!c.done;c=b.next())c=c.value,this.puzzles.set(c,this._getPuzzleFromApiPuzzle(a.puzzles[c]));b=$jscomp.makeIterator(Object.getOwnPropertyNames(a.puzzleStats));for(c=b.next();!c.done;c=b.next())c=c.value,this.puzzleStats.set(c,a.puzzleStats[c]);this.puzzleKey.startsWith("spooky")&&!Store.needsTutorial()&&document.body.classList.add("spooky")};
PuzzleManager.prototype.migrateBetaPuzzle=function(){if(!this._betaPuzzle){var a=this.puzzles.get(this.puzzleKey);assert(a);a.id&&Store.migrateBetaSolutionToKey(a.id,this.puzzleKey)}};
PuzzleManager.prototype._getPuzzleFromApiPuzzle=function(a){var b=null;if(a.wordOfTheDay){var c,d;b=new WordOfTheDay(a.wordOfTheDay.term,a.wordOfTheDay.definition||"",a.wordOfTheDay.definitionMd||"",a.wordOfTheDay.pronunciation||"",null!=(d=null==(c=a.special)?void 0:c.wotdImage)?d:null)}c=a.words;d=a.optionalWords;var e="5pyf0gcrl1a9oe3ui8d2htn67sqjkxbmw4vzPYFGCRLAOEUIDHTNSQJKXBMWVZ".split(""),f=function(r){var n=e.indexOf(r);return-1==n?r:e[(n-12+e.length)%e.length]},g="undefined"==typeof a.definitions?
"":Array.from(a.definitions).map(f).join(""),h="undefined"==typeof a.wiktDefinitions?"":Array.from(a.wiktDefinitions).map(f).join(""),k="undefined"==typeof a.dictionaryEntries?"":Array.from(a.dictionaryEntries).map(f).join("");"string"==typeof a.wordScores&&(c=Array.from(a.wordScores).map(f).join(""));"string"==typeof a.optionalWordScores&&(d=Array.from(a.optionalWordScores).map(f).join(""));var l=[];0<g.length&&(l=assertInstanceOf(JSON.parse(atob(g)),Array).map(function(r){return MerriamWebsterWordDefinition.fromObj(r)}));
g=[];0<h.length&&(h=JSON.parse(atob(h)))&&(g=assertInstanceOf(h,Array).map(function(r){return WiktionaryWordDefinition.fromObj(r)}));h={};0<k.length&&(k=JSON.parse(atob(k)))&&(h=assertInstanceOf(k,Object));k={};if("undefined"!=typeof a.special){k=a.special;if(k.targetWords&&0<k.targetWords.length){var m=atob(Array.from(k.targetWords).map(f).join("")).split(",");k.targetWords=m}if(k.emojis){m=$jscomp.makeIterator(Object.getOwnPropertyNames(k.emojis));for(var q=m.next();!q.done;q=m.next())q=q.value,
k.emojis[q]=atob(Array.from(k.emojis[q]).map(f).join("")).split(",")}}return new Puzzle(a.board,0<c.length?atob(c).split(","):[],0<d.length?atob(d).split(","):[],l,g,h,b,a.difficulty,a.id,a.version,a.intro||void 0,a.message||void 0,a.credits||void 0,k||void 0)};window.wordStats=null;var gPuzzleManager=new PuzzleManager,gLexicon={};var Random=function(a){this.seed(a)};Random.prototype.seed=function(a){a=function(b){for(var c=1779033703^b.length,d=0;d<b.length;d++)c=Math.imul(c^b.charCodeAt(d),3432918353),c=c<<13|c>>>19;return function(){c=Math.imul(c^c>>>16,2246822507);c=Math.imul(c^c>>>13,3266489909);return(c^=c>>>16)>>>0}}(a);this._rand=function(b,c,d,e){return function(){b>>>=0;c>>>=0;d>>>=0;e>>>=0;var f=b+c|0;b=c^c>>>9;c=d+(d<<3)|0;d=d<<21|d>>>11;e=e+1|0;f=f+e|0;d=d+f|0;return(f>>>0)/4294967296}}(a(),a(),a(),a())};
Random.prototype.next=function(){return this._rand()};Random.prototype.nextUntil=function(a){return Math.floor(this.next()*a)};Random.prototype.shuffle=function(a){for(var b=a.length-1;0<b;b--){var c=this.nextUntil(b+1),d=a[b];a[b]=a[c];a[c]=d}return a};Random.prototype.shuffled=function(a){a=a.slice();this.shuffle(a);return a};Random.prototype.from=function(a){return a[this.nextUntil(a.length)]};var AudioManager=function(){var a=this;this._tracks="danger-storm-by-kevin-macleod-from-filmmusic-io.mp3 edm-detection-mode-by-kevin-macleod-from-filmmusic-io.mp3 half-mystery-by-kevin-macleod-from-filmmusic-io.mp3 hypnothis-by-kevin-macleod-from-filmmusic-io.mp3 impact-prelude-by-kevin-macleod-from-filmmusic-io.mp3 odyssey-by-kevin-macleod-from-filmmusic-io.mp3 raving-energy-by-kevin-macleod-from-filmmusic-io.mp3 screen-saver-by-kevin-macleod-from-filmmusic-io.mp3 the-lift-by-kevin-macleod-from-filmmusic-io.mp3".split(" ");
this._clicks=["zapsplat_household_light_switch_click_001_68747.mp3","zapsplat_household_wall_mounted_switch_click_001_80312.mp3","zapsplat_technology_camera_dslr_switch_on_or_off_canon_eos_6d_001_42614.mp3","zapsplat_technology_camera_dslr_switch_on_or_off_canon_eos_6d_002_42615.mp3"];this._definitionAudio=new Audio;this._clickAudios=Util.isIOs?[]:this._clicks.map(function(c){var d=new Audio;d.src="/audio/effects/click/"+c;return d});this._rand=new Random((new Date).getTime().toString());this._clickSound=
this._rand.from(this._clicks);this._playlist=this._rand.shuffle(this._tracks);this._playlistIdx=-1;this._soundEffectsAudio=new Audio;this._musicAudio=new Audio;var b=Store.getBoolean("music-muted");this._hasPlayedSoundEffect=this._audioAllowed=!1;this._musicMuted=null==b?!1:b;b=Store.getInteger("music-volume");null==b&&(b=75);this._musicVolume=b;this._musicAudio.volume=b/100;this._soundEffectsMuted=!!Store.getBoolean("soundEffects-muted");b=Store.getInteger("soundEffects-volume");null==b&&(b=50);
this._soundEffectsVolume=b;this._soundEffectsAudio.volume=this._soundEffectsVolume/100;this._clickAudios.forEach(function(c){return c.volume=a._soundEffectsVolume/100});this._autoplayAudio=!!Store.getBoolean("audio-autoplay");this._musicAudio.autoplay=!1;this._musicAudio.addEventListener("ended",function(c){return a._setNextTrack()});document.addEventListener("visibilitychange",function(c){return a._onVisibilityChange(c)});this._boardReady=!1};
AudioManager.prototype._onUpdateMusicMuted=function(a){a?this._musicAudio.pause():(-1==this._playlistIdx&&this._setNextTrack(),this._musicAudio.play(),this._musicAudio.autoplay=!0)};AudioManager.prototype.onBoardReady=function(){var a=this;this._boardReady=!0;this._autoplayAudio&&(this._enableAudio(),Util.isIOs&&window.addEventListener("click",function c(){a.playBonus();window.removeEventListener("click",c)}))};
AudioManager.prototype.startMusic=function(){var a=this;this._maybePlayMusic().catch(function(b){var c=function(){window.removeEventListener("pointerdown",c);a._maybePlayMusic()};window.addEventListener("pointerdown",c)})};AudioManager.prototype.playFoundWord=function(a){this._playSoundEffect("/audio/effects/success/"+(4>=a.length?"1.mp3":5==a.length?"2.mp3":6==a.length?"3.mp3":7==a.length?"4.mp3":"5.mp3"))};AudioManager.prototype.playBonus=function(){this._playSoundEffect("/audio/effects/bonus.mp3")};
AudioManager.prototype.playError=function(){this._playSoundEffect("/audio/effects/cancel.mp3")};AudioManager.prototype.playComplete=function(){this._playSoundEffect("/audio/effects/complete.mp3")};AudioManager.prototype.onLetter=function(){if(!this.soundEffectsMuted&&this._audioAllowed&&!Util.isIOs){var a=this._rand.from(this._clickAudios);a.currentTime=0;a.play()}};AudioManager.prototype.onShowSettings=function(){this._audioAllowed||this._enableAudio()};
AudioManager.prototype._enableAudio=function(){this._audioAllowed=!0;this._onUpdateMusicMuted(Store.getBoolean("music-muted")||!1);this.startMusic();this._musicAudio.autoplay=!0;Util.isIOs&&this.playBonus();this._hasPlayedSoundEffect=!0};AudioManager.prototype.playDefinition=function(a){this._lowerMusicForAudio(this._definitionAudio);this._definitionAudio.src=a;this._definitionAudio.play()};
AudioManager.prototype._setNextTrack=function(){this._playlistIdx++;this._playlistIdx>=this._playlist.length&&(this._playlistIdx=0,this._playlist=this._rand.shuffle(this._tracks));this._musicAudio.src="/audio/music/mp3/64/"+this._playlist[this._playlistIdx]};AudioManager.prototype._onVisibilityChange=function(a){"visible"==document.visibilityState?this._audioAllowed&&!this.musicMuted&&this._musicAudio.play():this._musicAudio.pause()};
AudioManager.prototype._maybePlayMusic=function(){return this._musicMuted?Promise.resolve():this._musicAudio.play()};AudioManager.prototype._playSoundEffect=function(a){!this.soundEffectsMuted&&this._audioAllowed&&(this._lowerMusicForAudio(this._soundEffectsAudio),this._soundEffectsAudio.src=a,this._soundEffectsAudio.currentTime=0,this._soundEffectsAudio.play())};
AudioManager.prototype._lowerMusicForAudio=function(a){var b=this,c=function(d){a.removeEventListener("ended",c);b._musicAudio.volume=b.musicVolume/100};a.addEventListener("ended",c);this._musicAudio.volume=this.musicVolume/100/4};
$jscomp.global.Object.defineProperties(AudioManager.prototype,{musicMuted:{configurable:!0,enumerable:!0,get:function(){return this._musicMuted},set:function(a){this._musicMuted=a;Store.setBoolean("music-muted",a);this._onUpdateMusicMuted(a)}},musicVolume:{configurable:!0,enumerable:!0,get:function(){return this._musicVolume},set:function(a){this._musicVolume=a;Store.setInteger("music-volume",a);this._musicAudio.volume=a/100;this.musicMuted=0==a}},soundEffectsMuted:{configurable:!0,enumerable:!0,
get:function(){return this._soundEffectsMuted},set:function(a){this._soundEffectsMuted=a;Store.setBoolean("soundEffects-muted",a);this._soundEffectsMuted||this._hasPlayedSoundEffect||(this._hasPlayedSoundEffect=!0,this.playBonus(),this._enableAudio())}},soundEffectsVolume:{configurable:!0,enumerable:!0,get:function(){return this._soundEffectsVolume},set:function(a){this._soundEffectsVolume=a;Store.setInteger("soundEffects-volume",a);this._soundEffectsAudio.volume=a/100;this._clickAudios.forEach(function(b){return b.volume=
a/100});this.soundEffectsMuted=0==a}},autoplayAudio:{configurable:!0,enumerable:!0,get:function(){return this._autoplayAudio},set:function(a){this._autoplayAudio=a;Store.setBoolean("audio-autoplay",a)}}});var gAudio=new AudioManager;var Archive=function(){this._initialized=!1};
Archive.prototype.show=function(){var a=this;this._initialized||this._initialize();for(var b=Store.getArchiveStats(),c=$("#archive #archiveEntries"),d=new Date(DateUtil.origTodayDateStr+" 12:00:00"),e=Store.dateToDateStr(d),f=new Intl.DateTimeFormat(navigator.language,{month:"long"}),g=[],h=null,k=null;"2022/03/06"<=e;){var l=new Date(DateUtil.fixDstPuzzleDate(e)+" 12:00:00");h&&l.getFullYear()==k.firstDate.getFullYear()||(h={label:l.getFullYear().toString(),months:[]},g.push(h));k&&l.getMonth()==
k.firstDate.getMonth()?k.firstDate=d:(k={label:f.format(l),firstDate:l,lastDate:d,puzzles:[]},h.months.push(k));k.puzzles.push({dateStr:e,label:DateUtil.fixDstPuzzleDate(e).slice(8)+" | "+DateUtil.shortDayOfWeek(d)});d=new Date(d.getTime()-864E5);e=Store.dateToDateStr(d)}var m=c.querySelector("ul.tree");this._addYear(g[0],b);d=$jscomp.makeIterator(g.slice(1));e=d.next();for(f={};!e.done;f={year$jscomp$4:void 0},e=d.next())f.year$jscomp$4=e.value,setTimeout(function(n){return function(){return a._addYear(n.year$jscomp$4,
b)}}(f));m.children[0].querySelector("details").setAttribute("open","");var q=$("#hideCompletedPuzzles");q.checked=Store.hideCompletedPuzzles();c.classList.toggle("hideCompleted",q.checked);q.addEventListener("change",function(n){n=q.checked;c.classList.toggle("hideCompleted",n);Store.setHideCompletedPuzzles(n)});var r=$("#archiveExpandAll");r.addEventListener("click",function(){if(r.classList.toggle("expanded")){r.textContent="Collapse all";for(var n=$jscomp.makeIterator(m.querySelectorAll("details")),
p=n.next();!p.done;p=n.next())p.value.setAttribute("open","")}else for(r.textContent="Expand all",n=$jscomp.makeIterator(m.querySelectorAll("details")),p=n.next();!p.done;p=n.next())p.value.removeAttribute("open")});gPopups.show($("#archive"));gPopups.addListener(this)};Archive.prototype.onPopupShow=function(a){};Archive.prototype.onPopupClose=function(a){"archive"==a&&(gPopups.removeListener(this),$("#archive #archiveEntries").querySelector("ul.tree").innerHTML="")};
Archive.prototype._initialize=function(){for(var a=$("#archiveClassics"),b=$jscomp.makeIterator([{name:"N Vwls Pzzl",key:"classic-novowels",date:new Date(2023,2,11),description:"Ths pzzl dsn't hv ny vwls. Ply t tdy!"},{name:"Meow",key:"classic-meow",date:new Date(2023,7,8),description:"This puzzle has a purrfect theme. Play it right meow!"},{name:"Triangle",key:"classic-triangle",date:new Date(2022,7,29),description:"The first puzzle to not resemble a square."},{name:"Figure 8",key:"classic-figure8",
date:new Date(2022,8,6),description:"An early player-created Squaredle with a thematic shape."},{name:"Person Derelict",key:"classic-personderelict",date:new Date(2024,1,22),description:"One of our most popular Bonus Word of the Day definitions."}]),c=b.next();!c.done;c=b.next()){c=c.value;var d=document.createElement("dt"),e=document.createElement("a");e.setAttribute("href","?puzzle="+c.key);e.textContent=c.name;d.appendChild(e);e=document.createElement("span");e.textContent=c.date.toLocaleDateString();
d.appendChild(e);a.appendChild(d);d=document.createElement("dd");d.innerHTML=c.description;a.appendChild(d)}this._initialized=!0};
Archive.prototype._addYear=function(a,b){var c=this,d=$("#archive #archiveEntries").querySelector("ul.tree"),e=document.createElement("li"),f=document.createElement("details");f.innerHTML="2022"<a.label?"<summary>"+a.label+"</summary>":"<summary>\n             "+a.label+'\n             <em class="disclaimer">(Word lists are weirder in older puzzles)</em>\n           </summary>';e.appendChild(f);var g=document.createElement("ul");a=$jscomp.makeIterator(a.months);for(var h=a.next(),k={};!h.done;k={fulfilled:void 0,
monthList:void 0,month$jscomp$3:void 0},h=a.next()){k.month$jscomp$3=h.value;h=document.createElement("li");var l=document.createElement("details");l.innerHTML="<summary>"+k.month$jscomp$3.label+"</summary>";h.appendChild(l);k.monthList=document.createElement("ul");for(var m=$jscomp.makeIterator(k.month$jscomp$3.puzzles),q=m.next(),r={};!q.done;r={puzzle$jscomp$14:void 0},q=m.next())r.puzzle$jscomp$14=q.value,q=document.createElement("li"),q.classList.add("entry"),q.dataset.dateStr=r.puzzle$jscomp$14.dateStr,
q.innerHTML='<div><span class="puzzleLabel">'+r.puzzle$jscomp$14.label+"</span></div>",q.addEventListener("click",function(n){return function(){Store.isPremium()?(ButtonClickEvent.log("archive-playPuzzle"),c._onRequestDate(n.puzzle$jscomp$14.dateStr)):(ButtonClickEvent.log("archive-playPuzzle-premium"),gPopups.show($("#premiumSignup")))}}(r)),k.monthList.appendChild(q);g.appendChild(h);l.appendChild(k.monthList);k.fulfilled=!1;l.addEventListener("toggle",function(n){return function(p){if(!n.fulfilled)for(n.fulfilled=
!0,p=0;p<n.monthList.children.length;p++){var t=n.month$jscomp$3.puzzles[p].dateStr,u=b.scores.get(t),y=gPuzzleManager.puzzleStats.get(t),w=n.monthList.children[p],v=document.createElement("span");v.classList.add("stars");y&&y.difficulty&&(Util.addStars(v,y.difficulty),w.children[0].appendChild(v));v=document.createElement("div");var z=document.createElement("div");z.classList.add("progressBar");var B=document.createElement("div");B.classList.add("progressBarFilled");z.appendChild(B);var A=0;u&&(A=
100*u/y.maxScore,A=Math.max(2,A));u=A+"%";100<=A&&(u="calc(100% + 2px)",w.classList.add("completed"));B.style.width=u;u="var(--form-background-color)";70<=A?u="#43a047":50<=A?u="var(--secondary)":25<=A&&(u="var(--primary)");B.style.backgroundColor=u;v.appendChild(z);"2025/03/08"===t&&(z=document.createElement("p"),z.style.marginLeft="0.5em",z.style.marginBottom="0",z.textContent="This puzzle was sucked into a Daylight Saving Time Warp!",100>A&&(z.textContent+=" It doesn't break your streak."),v.appendChild(z));
z=document.createElement("div");B=document.createElement("button");B.classList.add("primaryButton","disclaimer");B.textContent="Launch";z.appendChild(B);100<=A&&(A=document.createElement("button"),A.classList.add("primaryButton","disclaimer"),A.textContent="Restart",A.addEventListener("click",c._onRequestRestartSolution_.bind(c,t)),z.appendChild(A));v.appendChild(z);w.appendChild(v)}}}(k))}g.children[0].querySelector("details").setAttribute("open","");f.appendChild(g);d.appendChild(e)};
Archive.prototype._onRequestDate=function(a){a==DateUtil.origTodayDateStr?gPuzzleManager.playTodayPuzzle(!0):gPuzzleManager.playPastPuzzle(a)};
Archive.prototype._onRequestRestartSolution_=function(a,b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress){b.stopPropagation();if(!Store.isPremium())return gPopups.show($("#premiumSignup")),ButtonClickEvent.log("archive-restartPuzzle-premium"),d.return();ButtonClickEvent.log("archive-restartPuzzle");return d.yield(gPuzzleManager.deleteSolution(a),2)}d.yieldResult&&(Store.setDejaVu(),c._onRequestDate(a));d.jumpToEnd()})};var gArchive=new Archive;var Settings=function(){var a=this;onReady(function(){$$(".settingsBtn").forEach(function(p){return p.addEventListener("click",function(t){t.preventDefault();gPopups.show($("#settings"))})});a._applySettingsFromStore();var e=$("#darkModeToggle");e.addEventListener("change",function(){var p=e.checked;document.body.classList.toggle("light",!p);Store.setIsDarkMode(p);gtagTryCatch("event","set_dark_mode",{value:p});a.maybePostSettings()});var f=$("#rightHandedToggle");f.addEventListener("change",function(){var p=
f.checked;$("#outerContainer").classList.toggle("lefty",!p);Store.setIsRightHanded(p);gtagTryCatch("event","set_right_handed",{value:p});a.maybePostSettings()});var g=$("#largerUsageCountsToggle");g.addEventListener("change",function(){var p=g.checked;document.body.classList.toggle("larger",p);Store.setIsLargerUsageCounts(p);gtagTryCatch("event","set_larger_usage_counts",{value:p})});var h=$("#showTimerToggle");h.addEventListener("change",function(){var p=h.checked;$("#timer").style.visibility=p?
"":"hidden";Store.setShowTimer(p);gtagTryCatch("event","set_show_timer",{value:p});a.maybePostSettings()});$("#audioBtn").addEventListener("click",function(){gPopups.show($("#audioSettings"));gAudio.onShowSettings()});for(var k=$("#themeColorSelect"),l=$("#themeFontSelect"),m=$("#rotate45Toggle"),q=$("#levelUpFasterToggle"),r=$jscomp.makeIterator(l.options),n=r.next();!n.done;n=r.next())n=n.value,n.style.fontFamily=a._getFontFromValue(n.value);k.addEventListener("change",function(){var p=k.value;
Store.setThemeColor(p);a._applyTheme();gtagTryCatch("event","set_theme",{value:p})});l.addEventListener("change",function(){Store.isPremium()?(Store.setThemeFont(l.value),a._applyFont(),gtagTryCatch("event","set_font",{value:l.value})):(l.value=l.options[0].value,gPopups.show($("#premiumSignup")))});m.addEventListener("change",function(){Store.isPremium()?(Store.setRotate45Enabled(m.checked),$("#rotateReload").hidden=!1,gtagTryCatch("event","set_rotate45enabled",{value:m.checked})):(m.checked=!1,
gPopups.show($("#premiumSignup")))});$("#rotateReloadBtn").addEventListener("click",function(p){p.preventDefault();api.reload("rotateReloadBtn")});q.addEventListener("change",function(){if(Store.isPremium()){var p=q.checked;Store.setLevelUpFasterEnabled(p);document.body.classList.toggle("levelUpFaster",p);$("#levelUpFasterReload").hidden=!1;window.dispatchEvent(new CustomEvent("updateScoreVisuals"));gtagTryCatch("event","set_level_up_faster_enabled",{value:p})}else q.checked=!1,gPopups.show($("#premiumSignup"))});
$("#levelUpFasterReloadBtn").addEventListener("click",function(p){p.preventDefault();api.reload("levelUpFasterReloadBtn")})});var b=$("#musicVolume");gAudio.musicMuted?b.value=0:($("#musicMute use").setAttribute("href","#icon-audio"),b.value=gAudio.musicVolume);$("#musicMute").addEventListener("click",function(){gAudio.musicMuted=!gAudio.musicMuted;gAudio.musicMuted?($("#musicMute use").setAttribute("href","#icon-audio-muted"),b.value=0):($("#musicMute use").setAttribute("href","#icon-audio"),b.value=
gAudio.musicVolume)});b.addEventListener("input",function(){gAudio.musicVolume=parseInt(b.value,10);gAudio.musicMuted?$("#musicMute use").setAttribute("href","#icon-audio-muted"):$("#musicMute use").setAttribute("href","#icon-audio")});var c=$("#soundEffectsVolume");gAudio.soundEffectsMuted?($("#soundEffectsMute use").setAttribute("href","#icon-audio-muted"),c.value=0):c.value=gAudio.soundEffectsVolume;$("#soundEffectsMute").addEventListener("click",function(){gAudio.soundEffectsMuted=!gAudio.soundEffectsMuted;
gAudio.soundEffectsMuted?($("#soundEffectsMute use").setAttribute("href","#icon-audio-muted"),c.value=0):($("#soundEffectsMute use").setAttribute("href","#icon-audio"),c.value=gAudio.soundEffectsVolume,gAudio.onLetter())});c.addEventListener("input",function(){gAudio.soundEffectsVolume=parseInt(c.value,10);gAudio.soundEffectsMuted?$("#soundEffectsMute use").setAttribute("href","#icon-audio-muted"):$("#soundEffectsMute use").setAttribute("href","#icon-audio")});c.addEventListener("change",function(){return gAudio.onLetter()});
var d=$("#autoEnableAudioToggle");d.checked=gAudio.autoplayAudio;$("#autoEnableAudioDesc").hidden=!d.checked;d.addEventListener("change",function(){gAudio.autoplayAudio=d.checked;$("#autoEnableAudioDesc").hidden=!d.checked})};Settings.prototype.maybePostSettings=function(){return GlobalStore.getEmail()?api.postSettings(this.getSyncSettings()):Promise.resolve()};
Settings.prototype.getSyncSettings=function(){return{isDarkMode:Store.isDarkMode(),isRightHanded:Store.isRightHanded(),showTimer:Store.showTimer(),useBeta:GlobalStore.useBeta()}};Settings.getGlobalSettings=function(){for(var a={bee:null,squaredle:null},b=$jscomp.makeIterator(Object.getOwnPropertyNames(a)),c=b.next();!c.done;c=b.next()){c=c.value;var d=new GameStore(c);d.hasAnyEntries()&&(a[c]={isDarkMode:d.isDarkMode(),isRightHanded:d.isRightHanded(),showTimer:d.showTimer(),useBeta:GlobalStore.useBeta()})}return a};
Settings.prototype.applySyncSettings=function(a){null!=a.isDarkMode&&Store.setIsDarkMode(a.isDarkMode);null!=a.isRightHanded&&Store.setIsRightHanded(a.isRightHanded);null!=a.showTimer&&Store.setShowTimer(a.showTimer);GlobalStore.setIsBetaAllowed(a.isBetaAllowed);GlobalStore.setUseBeta(a.useBeta);Store.setIsPremium(a.isPremium);Util.setCookie("sq-premium",Store.isPremium()?"1":"0");Store.setBoolean("didTrial",a.didTrial);document.body.classList.toggle("premium",a.isPremium);this._applySettingsFromStore()};
Settings.prototype._applySettingsFromStore=function(){var a=$("#darkModeToggle"),b=Store.isDarkMode();a.checked=b;document.body.classList.toggle("light",!b);Util.setCookie("sq-dark",b?"1":"0");a=$("#rightHandedToggle");b=Store.isRightHanded();a.checked=b;$("#outerContainer").classList.toggle("lefty",!b);a=$("#largerUsageCountsToggle");b=Store.isLargerUsageCounts();a.checked=b;document.body.classList.toggle("larger",b);a=$("#showTimerToggle");b=Store.showTimer();a.checked=b;$("#timer").style.visibility=
b?"":"hidden";gBeta.handleBetaStatus();$("#themeColorSelect").value=Store.getThemeColor();this._applyTheme();Store.isPremium()&&($("#themeFontSelect").value=Store.getThemeFont(),$("#rotate45Toggle").checked=Store.isRotate45Enabled(),a=$("#levelUpFasterToggle"),b=Store.isLevelUpFasterEnabled(),a.checked=b,document.body.classList.toggle("levelUpFaster",b));this._applyFont();a=Store.getInteger("premiumSignupTime");a=!Store.isPremium()&&null!=a&&36E5>(new Date).getTime()-a;$("#premiumSignupProcessing").hidden=
!a;$("#signup-intro").classList.toggle("hide",a);a&&($("#premiumSignupPlatform").textContent=Store.getString("premiumSignupPlatform"));Store.getBoolean("didTrial")&&$$(".trialAvailable").forEach(function(c){return c.hidden=!0})};
Settings.prototype._applyTheme=function(){var a=Store.getThemeColor(),b=$("#themeColorSelect");if(!Store.needsTutorial()&&document.body.classList.contains("spooky"))document.body.classList.add("orange");else{b=$jscomp.makeIterator(b.options);for(var c=b.next();!c.done;c=b.next())c=c.value,document.body.classList.toggle(c.value,c.value==a)}document.querySelector('meta[name="theme-color"]').setAttribute("content",getComputedStyle(document.body).getPropertyValue("--primary"));b=$("#darkModeToggle");
"beige"==a||"gold"==a?(document.body.classList.remove("light"),Store.setIsDarkMode(!0),b.checked=!0,b.disabled=!0):b.disabled=!1};
Settings.prototype._applyFont=function(){if(Store.isPremium()){var a=Store.getThemeFont(),b=this._getFontFromValue(a);$("#game").style.fontFamily=b;for(var c=$jscomp.makeIterator(["wordly","hand","meow"]),d=c.next();!d.done;d=c.next())d=d.value,$("#game").classList.toggle("font-"+d,a==d);$("#wordCountArea").style.fontFamily=b;$("#themeFontSelect").style.fontFamily=b;$("#wordCountArea").classList.toggle("wideFont",["typed","meow","serif"].includes(a))}};
Settings.prototype._getFontFromValue=function(a){switch(a){case "roboto":return"RobotoWeb, sans-serif";case "wordly":return"ClearSansWeb, RobotoWeb, sans-serif";case "mono":return"InconsolataWeb, Courier New, monospace";case "serif":return"MerriweatherWeb, Georgia, serif";case "roman":return"GaramondWeb, Times New Roman, serif";case "typed":return"SpecialEliteWeb, Courier New, monospace";case "cursive":return"DancingScriptWeb, Segoe Script, Lucida Handwriting, serif";case "script":return"NautilusWeb, Segoe Script, Lucida Handwriting, serif";
case "hand":return"KalamWeb, Comic Sans MS, Comic Sans, sans-serif";case "meow":return"MeowWeb, Comic Sans MS, Comic Sans, sans-serif";default:assertNotReached("Font "+a+" not found")}};var gSettings=new Settings;var HelpTopic,HelpTopics=[{name:"Game",subtopics:[{name:" Words"},{name:"Gameplay"},{name:"Bug report"},{name:"Feature suggestion"},{name:"Other"}]},{name:"Ads",subtopics:[{name:"Ads still showing after purchase"},{name:"Misbehaving ads",description:"Some players have reported ads that break parts of the game. Your reports help us identify these issues.",toggle:{label:"Disable ads for 2 days",checked:!0,postSubmit:function(a){a&&gAds.temporarilyDisable()}}}]},{name:"Billing",text:"Billing and Refunds"}];var HelpPage=function(){var a=this;this.form=$("#feedbackForm");this.topicEl=$("#feedbackTopic");this.commentsEl=$("#comments");this.commonEl=$("#feedbackCommon");this.emailEl=this.commonEl.querySelector("#feedbackEmail");this.subtopicSectionEl=$("#feedbackSubsection");this.statusEl=$("#feedbackSubmissionStatus");this.selectedSubtopic=this.selectedTopic=this.subtopicToggleEl=this.subtopicEl=null;for(var b=$jscomp.makeIterator(HelpTopics),c=b.next();!c.done;c=b.next())c=c.value,this.topicEl.add(new Option(c.text||
c.name,c.name,!1,!1));this.topicEl.addEventListener("change",function(d){a.setTopic(HelpTopics.find(function(e){return e.name===a.topicEl.value}))});this.updateAccountStatus();this.form.addEventListener("submit",function(d){return a.onSubmit(d)})};
HelpPage.prototype.onSubmit=function(a){var b=this;a.preventDefault();$$(".feedbackResult").forEach(function(g){return g.hidden=!0});a=this.selectedTopic;var c=this.selectedSubtopic,d={comments:this.commentsEl.value.trim(),topic:a.name};c&&(d.subtopic=c.name);this.subtopicToggleEl&&(d.appliedAction=this.subtopicToggleEl.checked);GlobalStore.getEmail()?d.email=GlobalStore.getEmail():d.replyTo=this.emailEl.value.trim();if("undefined"!=typeof d.replyTo&&(0===d.replyTo.length||255<d.replyTo.length||!d.replyTo.match(/^[^@]+@[^@]+\.[^@]+$/)))this._setSubmissionStatus("error",
"Please enter a valid email address.");else if(a=this.commentsEl.maxLength,4>d.comments.length||d.comments.length>a)this._setSubmissionStatus("error",4>d.comments.length?"Please add some detailed comments.":"Please limit details to "+a+" characters.");else{a=$("#submitFeedback");var e=[this.topicEl,this.subtopicEl,this.subtopicToggleEl,this.commentsEl,this.emailEl,a].filter(function(g){return g});a=$jscomp.makeIterator(e);for(var f=a.next();!f.done;f=a.next())f.value.disabled=!0;this._setSubmissionStatus("info",
"Submitting feedback...");api.sendFeedback(d).then(function(g){g.data?"invalidEmail"==g.data.error?b._setSubmissionStatus("error","Please enter a valid email address."):b._setSubmissionStatus("error","Unknown error."):(b._setSubmissionStatus("success","Feedback sent. Thank you!"),b.commentsEl.value="",b.emailEl.value="",b.setTopic(null),"Misbehaving ads"==d.subtopic&&api.uploadString(document.documentElement.outerHTML))},function(g){b._setSubmissionStatus("error","Network or server error. Please try again.")}).finally(function(){var g,
h;null==c||null==(g=c.toggle)||null==(h=g.postSubmit)||h.call(g,d.appliedAction);g=$jscomp.makeIterator(e);for(h=g.next();!h.done;h=g.next())h.value.disabled=!1})}};HelpPage.prototype.show=function(){gPopups.show($("#about"))};HelpPage.prototype.showFeedback=function(){gPopups.show($("#about"));onReady(function(){return setTimeout(function(){$('button[aria-controls="feedbackTab"]').click()})})};HelpPage.prototype.updateAccountStatus=function(){};
HelpPage.prototype.setTopic=function(a){this.selectedTopic=a;a||(this.topicEl.selectedIndex=0);this._setSubtopic(null);var b;null==(b=this.subtopicEl)||b.remove();this.subtopicToggleEl=this.subtopicEl=null;this.subtopicSectionEl.innerHTML="";var c;(null==a?0:null==(c=a.subtopics)?0:c.length)&&this._populateSubtopics();this.commonEl.hidden=!a||!!a.subtopics};
HelpPage.prototype._setSubtopic=function(a){this.selectedSubtopic=a;var b=this.subtopicSectionEl;b.innerHTML="";b.hidden=!a;if(a){if(a.description){var c=document.createElement("div");c.textContent=a.description;c.classList.add("details");b.appendChild(c)}a.toggle&&(a=DomUtil.createToggle(a.toggle.label,a.toggle.checked),this.subtopicToggleEl=a.querySelector('input[type="checkbox"]'),b.appendChild(a));this.commonEl.hidden=!1}};
HelpPage.prototype._populateSubtopics=function(){var a=this;assert(this.selectedTopic.subtopics);var b=document.createElement("select");b.id="feedbackSubtopic";b.setAttribute("autocomplete","off");var c=new Option("Subject","",!0,!0);c.disabled=!0;b.add(c);c=$jscomp.makeIterator(this.selectedTopic.subtopics);for(var d=c.next();!d.done;d=c.next())d=d.value,b.add(new Option(d.text||d.name,d.name));b.addEventListener("change",function(){a._setSubtopic(a.selectedTopic.subtopics.find(function(e){return e.name===
b.value}))});this.subtopicEl=b;this.topicEl.insertAdjacentElement("afterend",b);b.scrollIntoView()};HelpPage.prototype._setSubmissionStatus=function(a,b){this.statusEl.textContent=b;this.statusEl.classList.toggle("error","error"==a);this.statusEl.hidden=!1;this.statusEl.scrollIntoView({behavior:"smooth"})};var gHelpPage=new HelpPage;var Coord=function(a,b){this.row=a;this.col=b},PuzzleSolver=function(a,b){this._puzzle=a;this._solution=b;this.size=this._puzzle.board.length;this._coords=[];this._letters=new Map;for(a=0;a<this.size;a++)for(this._coords.push([]),b=0;b<this.size;b++){this._coords[a].push(new Coord(a,b));var c=this._puzzle.board[a][b];this._letters.has(c)||this._letters.set(c,[]);this._letters.get(c).push(this._coords[a][b])}this._bitmap=this._genBitmap();this._wordCoords=new Map;a=$jscomp.makeIterator(this._puzzle.words);
for(b=a.next();!b.done;b=a.next())this._wordCoords.set(b.value,[]);this._findWords();"undefined"!=typeof gPuzzleManager&&(this.wordsToHint=(new Random(gPuzzleManager.puzzleKey)).shuffled(this._puzzle.words),this.wordsToHint.sort(function(d,e){return 6<d.length||6<e.length?d.length-e.length:0}))};PuzzleSolver.prototype.getWordCoords=function(a){return(a=this._wordCoords.get(a))?a.slice().reverse():null};
PuzzleSolver.prototype.getUnnecessaryCoords=function(){for(var a=new Set(this._coords.flat()),b=$jscomp.makeIterator(this._wordCoords.entries()),c=b.next();!c.done;c=b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;if(!this._solution||!this._solution.has(c))for(c=$jscomp.makeIterator(d),d=c.next();!d.done;d=c.next())a.delete(d.value)}return a};
PuzzleSolver.prototype.getCoordUses=function(){for(var a=new Map(this._coords.flat().map(function(e){return[e,0]})),b=$jscomp.makeIterator(this._wordCoords.entries()),c=b.next();!c.done;c=b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;if(!this._solution||!this._solution.has(c))for(c=$jscomp.makeIterator(d),d=c.next();!d.done;d=c.next())d=d.value,a.set(d,a.get(d)+1)}return a};
PuzzleSolver.prototype.getCoordFirstCounts=function(){for(var a=new Map(this._coords.flat().map(function(e){return[e,0]})),b=$jscomp.makeIterator(this._wordCoords.entries()),c=b.next();!c.done;c=b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;this._solution&&this._solution.has(c)||(c=d[d.length-1],a.set(c,a.get(c)+1))}return a};PuzzleSolver.prototype.findWord=function(a){return this._findWord(a,a)};
PuzzleSolver.prototype._genBitmap=function(){for(var a=[],b=0;b<this.size;b++)a.push(Array(this.size)),a[b].fill(null);return a};
PuzzleSolver.prototype._findWord=function(a,b,c,d){if(0==a.length)return!0;for(var e=[],f=$jscomp.makeIterator(this._letters.get(a[0])),g=f.next();!g.done;g=f.next())g=g.value,void 0==c?e.push(g):(assert(void 0!=d),(this._puzzle.special.speller||1>=Math.abs(g.row-c)&&1>=Math.abs(g.col-d))&&e.push(g));d=$jscomp.makeIterator(e);for(e=d.next();!e.done;e=d.next())if(f=e.value,e=f.row,f=f.col,this._puzzle.special.speller||null==this._bitmap[e][f]){if(this._bitmap[e][f]=void 0==c?0:1,g=this._findWord(a.slice(1),
b,e,f),this._bitmap[e][f]=null,g)return this._wordCoords.get(b).push(this._coords[e][f]),!0}else if(this._puzzle.special.loop&&1==a.length&&0==this._bitmap[e][f])return this._wordCoords.get(b).push(this._coords[e][f]),!0;return!1};PuzzleSolver.prototype._findWords=function(){for(var a=$jscomp.makeIterator(this._puzzle.words),b=a.next();!b.done;b=a.next())b=b.value,this._solution&&this._solution.has(b)||this._findWord(b,b)};var WordList=function(a,b,c,d,e){var f=this;this._node=$("#wordList");this.game=a;this._solution=b;this._yesterdaySolution=d;this._puzzle=this.game.puzzle;this._yesterdayPuzzle=c;this._isTutorial=e;this._allowHints=!1;this._lastWeekWords=null;this._hintSortEl=this._node.querySelector("#hintSort");this._hintFirstLettersEl=this._node.querySelector("#hintFirstLetters");this._hintSortEl.addEventListener("change",function(){var h=f._hintSortEl.checked;gtagTryCatch("event",h?"enable_hint":"disable_hint",
{label:"Sort missing words"});f._solution.hints.sort=h;f._solution.saveAndPostScore();f._render(!0)});this._hintFirstLettersEl.addEventListener("change",function(){var h=f._hintFirstLettersEl.checked;gtagTryCatch("event",h?"enable_hint":"disable_hint",{label:"Show first letters"});f._solution.hints.firstLetters=h;f._solution.saveAndPostScore();f._render(!0)});this._hintSortEl.checked=this._solution.hints.sort;this._hintFirstLettersEl.checked=this._solution.hints.firstLetters;$("#showWordsInFoundOrderToggle").addEventListener("change",
function(h){h=h.target.checked;$("#wordsInFoundOrder").hidden=!h;h&&$("#wordsInFoundOrder").scrollIntoView({behavior:"smooth"})});$("#yesterdayShowWordsInFoundOrderToggle").addEventListener("change",function(h){h=h.target.checked;$("#yesterdayWordsInFoundOrder").hidden=!h;h&&$("#yesterdayWordsInFoundOrder").scrollIntoView({behavior:"smooth"})});[$("#wordsInFoundOrder"),$("#yesterdayWordsInFoundOrder")].forEach(function(h){return h.addEventListener("click",function(k){if("SPAN"==k.target.tagName){var l=
k.target.textContent.split(", ")[0];setTimeout(function(){return DefinitionView.fromDefinition(l,f._puzzle.wiktDefinitions,f._puzzle.definitions,f._puzzle.dictionaryEntries).show()})}})});gBeta.useBetaPuzzle?$("#replayPuzzleTeaser").hidden=!0:$("#replayCurPuzzle").addEventListener("click",function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return Store.isPremium()?h.yield(gPuzzleManager.deleteSolution(gPuzzleManager.puzzleKey),3):(gPopups.show($("#premiumSignup")),
h.jumpTo(0));h.yieldResult&&api.reload("replayCurPuzzle");h.jumpToEnd()})});this._yesterdayPuzzle&&!gBeta.useBetaPuzzle&&(new Board($("#yesterdayBoard"),this._yesterdayPuzzle.board,this._yesterdayPuzzle),this._resizeYesterdayBoardWhenVisible(),""==gPuzzleManager.level?$("#wordList-yesterday-play").addEventListener("click",function(h){Store.isPremium()?gPuzzleManager.playPastPuzzle(assert(DateUtil.getYesterdayStr())):gPopups.show($("#premiumSignup"))}):$("#wordList-yesterday-play").hidden=!0,$("#wordList-yesterday-show").addEventListener("click",
function(h){$("#yesterdayLinks").hidden=!0;$("#yesterdayReveal").hidden=!1}),gPuzzleManager.isWeeklyPuzzle&&api.getLastWeekWords().then(function(h){f._lastWeekWords=h;f._render(!1)}));this._yesterdayPuzzle||($('#wordList button[aria-controls="wordsYesterdayTab"]').hidden=!0);gBeta.useBetaPuzzle?$('#wordList button[aria-controls="wordsTodayTab"] .notExtraNarrow').textContent="Preview":gPuzzleManager.isSpecialPuzzle?($('#wordList button[aria-controls="wordsTodayTab"] .notExtraNarrow').textContent="Current",
$('#wordList button[aria-controls="wordsPastTab"] .notExtraNarrow').textContent="More"):gPuzzleManager.isWeeklyPuzzle&&($('#wordList button[aria-controls="wordsTodayTab"] .notExtraNarrow').textContent="This week",$('#wordList button[aria-controls="wordsYesterdayTab"] .notExtraNarrow').textContent="Last week",$('#wordList button[aria-controls="wordsPastTab"]').hidden=!0);DateUtil.origTodayDateStr!=DateUtil.getTodayStr()||gPuzzleManager.isSpecialPuzzle?$("#wordList-past-today").addEventListener("click",
function(h){gPuzzleManager.playTodayPuzzle()}):$("#wordList-past-today").hidden=!0;$("#wordList-past-archives").addEventListener("click",function(h){assert(Store.isPremium());gArchive.show()});gPuzzleManager.archiveDate&&($('#wordList button[aria-controls="wordsTodayTab"] .notExtraNarrow').textContent=DateUtil.fixDstPuzzleDate(gPuzzleManager.archiveDate),$('#wordList button[aria-controls="wordsPastTab"] .notExtraNarrow').textContent="Archive");this._puzzle.wordOfTheDay||($("#wordList #helpTextBwotd").hidden=
!0);DateUtil.getSecondsToHints().then(function(h){if(!f._allowHints){setTimeout(function(){f._allowHints||0!=$("#wordList").offsetHeight&&f._render(!0)},Math.max(0,1E3*h));var k=setInterval(function(){f._allowHints?clearInterval(k):DateUtil.shouldAllowHints&&(clearInterval(k),f._render(!0))},1E4)}});var g=setInterval(function(){for(var h=$jscomp.makeIterator($$("#wordsTodayTab .wordLengths li")),k=h.next();!k.done;k=h.next())if(k=k.value,k.textContent!=k.dataset.word){clearInterval(g);Dialog.show("Translate detected",
"<p>It looks like you're using a translation plug-in, such as Google\n            Translate. This plug-in changes the words that are shown in the word\n            list.</p>\n            <p>Since this is a word game, please disable your translator for\n            this website and then refresh the page. Otherwise, you will\n            encounter unexpected behavior.</p>",!0,!1,{label:"Refresh",action:function(){return api.reload("translateWarning")}});break}},5E3)};
WordList.prototype.show=function(){this._render(!0);this._yesterdayPuzzle&&this._render(!1);$("#wordList .content").classList.add("show");gPopups.show($("#wordList"))};WordList.prototype.enableHints=function(){this._allowHints=!0};
WordList.prototype._render=function(a){function b(){for(var m=$jscomp.makeIterator(k.children),q=m.next();!q.done;q=m.next())if(q=q.value.querySelector("ul")){for(var r=0,n=$jscomp.makeIterator(q.children),p=n.next();!p.done;p=n.next())r=Math.max(r,p.value.offsetWidth);0!=r&&(q.style.display="grid",q.style.gridTemplateColumns="repeat(auto-fill, minmax("+r+"px, 1fr))")}k.style.opacity=""}var c=this,d=a?this._puzzle:this._yesterdayPuzzle,e=assert(a?this._solution:this._yesterdaySolution);DateUtil.shouldAllowHints&&
(this._allowHints=!0);$("#wordListHintsLater").hidden=this._allowHints||this._isTutorial;$("#wordListHints").hidden=this._isTutorial||!this._allowHints||this._solution.isSolved();var f=$(a?"#wordsTodayTab":"#wordsYesterdayTab");if(a){var g=Math.max(0,this._solution.maxReveals-this._solution.revealsUsed),h=$("#revealsRemaining");h.querySelector("span").textContent=g;0<g?(h.querySelector("svg").hidden=!Store.isPremium(),$("#revealsRemainingUpgrade").hidden=!0,$("#revealsRemainingHelpUpgrade").hidden=
!1):($("#revealsRemainingUpgrade").hidden=Store.isPremium(),$("#revealsRemainingHelpUpgrade").hidden=!0)}var k=assert(f.querySelector(".wordLengths"));k.innerHTML="";f=new Map;g=$jscomp.makeIterator(d.words);for(h=g.next();!h.done;h=g.next())h=h.value,f.has(h.length)||f.set(h.length,[]),f.get(h.length).push({word:h,found:e.has(h)});f=[].concat($jscomp.arrayFromIterable(f));f.sort(function(m,q){return m[0]-q[0]});if(a&&gPuzzleManager.puzzleKey.startsWith("waffle-ingredients")){g=[];h=$jscomp.makeIterator("eggs milk flour sugar salt vanilla baking powder".split(" "));
for(var l=h.next();!l.done;l=h.next())l=l.value,g.push({word:l,found:e.has(l)});f.unshift(["Ingredients",g])}else if(d.special.targetWords&&!Store.needsTutorial()){g=[];h=$jscomp.makeIterator(d.special.targetWords);for(l=h.next();!l.done;l=h.next())l=l.value,g.push({word:l,found:e.has(l)});f.unshift(["Clues",g])}f=$jscomp.makeIterator(f);for(g=f.next();!g.done;g=f.next())h=g.value,g=h[0],h=h[1],h.sort(function(m,q){return!a||c._allowHints&&c._solution.hints.sort?m.word.localeCompare(q.word):m.found?
q.found?m.word.localeCompare(q.word):-1:q.found?1:0}),k.appendChild(this._createSectionWithWords(g+("number"==typeof g?" letters":""),h,a,!1));(f="undefined"==typeof d.wordOfTheDay?null:d.wordOfTheDay)&&k.appendChild(this._createSectionWithWords("Bonus Word of the Day",[{word:f.term,found:e.has(f.term),wordOfTheDay:f}],a,!0,!0));a?0<d.optionalWords.length&&k.appendChild(this._createSectionWithWords("Bonus words found",Array.from(e.obscureWords).sort().map(function(m){return{word:m,found:!0}}),a,!0,
!1)):k.appendChild(this._createSectionWithWords("Bonus words",Array.from(d.optionalWords).sort().map(function(m){return{word:m,found:e.has(m)}}),a,!0,!1));k.style.opacity="0";requestAnimationFrame(function(){0<k.offsetHeight?b():"undefined"==typeof IntersectionObserver?k.style.opacity="":(new IntersectionObserver(function(m,q){0<m[0].intersectionRatio&&(q.unobserve(k),b())})).observe(k)});this._puzzle.credits.author&&($("#wordsAuthor").hidden=!1,$("#wordsAuthor span").textContent="Puzzle created by "+
this._puzzle.credits.author);d=a?$("#wordsInFoundOrder div"):$("#yesterdayWordsInFoundOrder div");d.textContent="";f=Array.from((a?this._solution:this._yesterdaySolution).words);for(g=0;g<f.length;g++)h=document.createElement("span"),h.textContent=f[g],g<f.length-1&&(h.textContent+=", "),d.appendChild(h);d=a?$("#bonusWordsInFoundOrder"):$("#yesterdayBonusWordsInFoundOrder");d.textContent="";f=Array.from((a?this._solution:this._yesterdaySolution).obscureWords);for(g=0;g<f.length;g++)h=document.createElement("span"),
h.textContent=f[g],g<f.length-1&&(h.textContent+=", "),d.appendChild(h)};
WordList.prototype._createSectionWithWords=function(a,b,c,d,e){var f=this;e=void 0===e?!1:e;var g=this._allowHints&&this._solution.hints.firstLetters&&"Clues"!=a||d,h=this._allowHints&&this._solution.hints.sort&&"Clues"!=a||d||g,k=c&&!d&&0<this._solution.maxReveals-this._solution.revealsUsed&&0<b.length&&6>=b[0].word.length&&!this._isTutorial&&"Clues"!=a,l=document.createElement("section"),m=document.createElement("h3");m.textContent=a;l.appendChild(m);c&&d&&!e&&(a=document.createElement("div"),a.textContent=
b.length+" of "+this._puzzle.optionalWords.length+" found",a.style.fontStyle="italic",a.classList.add("disclaimer","p"),l.appendChild(a));e=document.createElement("ul");a=0;m=$jscomp.makeIterator(b);for(var q=m.next(),r={};!q.done;r={entry$jscomp$16:void 0,wordOfTheDay$jscomp$3:void 0,word$jscomp$31:void 0},q=m.next())if(r.entry$jscomp$16=q.value,!c||h||r.entry$jscomp$16.found){q=document.createElement("li");if(c&&!r.entry$jscomp$16.found){var n="*".repeat(r.entry$jscomp$16.word.length);if(g){var p=
Config.clueLength;12<=r.entry$jscomp$16.word.length?p=3:6<=r.entry$jscomp$16.word.length&&(p=2);d&&(p=Math.max(p,2));n=r.entry$jscomp$16.word.slice(0,p)+n.slice(p);p=0;10<=r.entry$jscomp$16.word.length?p=3:8<=r.entry$jscomp$16.word.length?p=2:7<=r.entry$jscomp$16.word.length&&(p=1);n=n.slice(0,r.entry$jscomp$16.word.length-p)+r.entry$jscomp$16.word.slice(r.entry$jscomp$16.word.length-p);d&&5<r.entry$jscomp$16.word.length&&(n+=" ("+r.entry$jscomp$16.word.length+" letters)")}q.textContent=n;q.dataset.word=
n;k?q.addEventListener("click",function(u){return function(){return f._revealWord(u.entry$jscomp$16.word)}}(r)):0<Math.max(0,this._solution.maxReveals-this._solution.revealsUsed)&&d?q.addEventListener("click",function(){return Util.alert("You can't reveal the Bonus Word of the Day, but sharing your score (Share icon at the top of the page) reveals some letters!")}):0<Math.max(0,this._solution.maxReveals-this._solution.revealsUsed)&&!d&&6<r.entry$jscomp$16.word.length&&q.addEventListener("click",function(){return Util.alert("Sorry, you can only reveal words of up to 6 letters.")})}else{n=
document.createElement("a");r.word$jscomp$31=r.entry$jscomp$16.word;p=r.word$jscomp$31;r.entry$jscomp$16.wordOfTheDay?(n.classList.add("secondary"),r.wordOfTheDay$jscomp$3=assertInstanceOf(r.entry$jscomp$16.wordOfTheDay,WordOfTheDay),n.href="#",n.addEventListener("click",function(u){return function(y){y.preventDefault();(new WordOfTheDayDetail(u.wordOfTheDay$jscomp$3,c?u.entry$jscomp$16.found:!1,c?f._puzzle.credits:f._yesterdayPuzzle.credits)).dispatch();ButtonClickEvent.log("wordOfTheDay")}}(r))):
(n.href="#",n.addEventListener("click",function(u){return function(y){ButtonClickEvent.log("wordDefinition");var w=c?f._puzzle:f._yesterdayPuzzle,v=null;try{var z;v=null==(z=w.special.lexicon)?void 0:z[u.word$jscomp$31]}catch(B){console.error(B)}setTimeout(function(){return DefinitionView.fromDefinition(u.word$jscomp$31,w.wiktDefinitions,w.definitions,w.dictionaryEntries,v).show()});y.preventDefault()}}(r)));n.textContent=p;q.appendChild(n);q.dataset.word=p;p=gYesterdayWords;"xp"==gPuzzleManager.level&&
(p=gYesterdayWordsXp);if(!c&&("undefined"!=typeof p||this._lastWeekWords)){p=this._lastWeekWords?this._lastWeekWords[r.word$jscomp$31]:p[r.word$jscomp$31];"undefined"==typeof p&&(p=0);var t=document.createElement("span");t.textContent=" "+p+"%";t.classList.add("percent");q.appendChild(t)}r.entry$jscomp$16.found||n.classList.add("missedWord")}e.appendChild(q)}else a++;0<e.children.length&&l.appendChild(e);a&&(g=document.createElement("div"),g.classList.add("wordGroupInfo"),e=document.createElement("span"),
e.textContent="+"+a+" word"+(1<a?"s":"")+" left",e.classList.add("missingCount"),g.appendChild(e),l.appendChild(g),k&&(e.textContent+=" - ",e=document.createElement("a"),e.textContent=1<a?"Reveal a random word":"Reveal word",e.setAttribute("href","#"),e.addEventListener("click",function(u){u.preventDefault();f._revealRandomWord(b.filter(function(y){return!y.found}))}),g.appendChild(e)));k&&h&&0<b.filter(function(u){return!u.found}).length&&(h=document.createElement("div"),h.textContent="Tap a missing word to reveal it",
h.classList.add("wordGroupInfo"),l.appendChild(h));c&&d&&1==b.length&&b[0].wordOfTheDay&&!b[0].found&&(d=document.createElement("div"),d.innerHTML='\n        <a href="#">Share</a> to get a hint for the Bonus Word of the Day.\n      ',d.querySelector("a").addEventListener("click",function(u){u.preventDefault();f.game.renderer.renderShare()}),d.classList.add("disclaimer"),l.appendChild(d));return l};
WordList.prototype._revealRandomWord=function(a){a=a.filter(function(b){return!b.found});assert(0<a.length);this._revealWord(a[Math.floor(Math.random()*a.length)].word)};
WordList.prototype._revealWord=function(a){var b=this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return c=b._solution.maxReveals-b._solution.revealsUsed,d=1==c?"Are you sure you want to use your "+(1==b._solution.maxReveals?"only":"last")+" reveal?":"Are you sure you want to use one of your "+c+" reveals?",e.yield(Util.confirm(d,"Reveal","Cancel"),2);if(!e.yieldResult)return e.return();b.game.hintWord(a);b._solution.useReveal();isWide()?b._render(!0):gPopups.close();
e.jumpToEnd()})};WordList.prototype._resizeYesterdayBoardWhenVisible=function(){var a=$("#yesterdayBoard");window.addEventListener("resize",function(){0<a.offsetWidth&&(a.style.height=a.offsetWidth+"px")});"undefined"!=typeof IntersectionObserver&&(new IntersectionObserver(function(b,c){0<b[0].intersectionRatio&&(a.style.height=a.offsetWidth+"px")})).observe(a)};var BoardListener=function(){};BoardListener.prototype.onRotate=function(){};BoardListener.prototype.onRotateEnd=function(){};BoardListener.prototype.updateWord=function(a,b){};BoardListener.prototype.onSubmitWord=function(a){};BoardListener.prototype.onCancelWord=function(){};
var Board=function(a,b,c,d){var e=this;this.size=b.length;var f;this._isLoop=null!=(f=null==c?void 0:c.special.loop)?f:!1;this._spacerImage=c&&c.special.spacerImage||null;this._listener=d;this.isSpeller=3==this.size&&" "==b[0][0]&&" "==b[0][2];this._node=null;this._pointerDown=this._isRotating=!1;this._usedLetters=[];this._pointerMoveListener=function(h){return e._onPointerMove(h)};this._octRotate=d&&Store.isRotate45Enabled();this._divisions=d&&this._octRotate?8:4;this._classPrefix=d&&this._octRotate?
"octRotate-":"rotate-";this._numWordsSubmitted=this._rotation=0;this._pointerImg=null;a.innerHTML="";a.innerHTML='\n      <div class="letters">\n        <div class="board">\n          <div class="letterBoxes"></div>\n        </div>\n      '+(this.isSpeller?'\n        <div class="buttonContainer">\n          <a href="#" class="leftButton" aria-label="shuffle">\n            <svg class="boardButton"><use href="#icon-shuffle"></svg>\n          </a>\n        </div>\n        <a href="#" class="rightButton buttonContainer" aria-label="delete">\n          <svg class="boardButton"><use href="#icon-backspace"></svg>\n        </a>\n        ':
'\n        <a href="#" class="leftButton buttonContainer" aria-label="puzzle">\n          <svg class="boardButton"><use href="#icon-puzzle"></svg>\n        </a>\n        <div id="puzzleSelector" hidden>\n        '+(Util.isIOs?'\n          <button class="primaryButton switchPuzzle" data-level="">\n            Switch to Squaredle\n          </button>\n          <button class="basicButton stay" data-level="">\n            Stay on Squaredle\n          </button>':'\n          <div class="switchPuzzle" data-level="">\n            Switch to Squaredle\n          </div>\n          <div class="stay" data-level="">\n            Stay on Squaredle\n          </div>')+
'</div>\n        <div class="buttonContainer rightButton">\n          <a href="#" class="" aria-label="rotate">\n            <svg class="boardButton"><use href="#icon-rotate-right"></svg>\n          </a>\n        </div>\n      ')+"\n      </div>\n    ";d&&gPuzzleManager.isTodayPuzzle?(c=a.querySelector("#puzzleSelector > .switchPuzzle"),f=a.querySelector("#puzzleSelector > .stay"),c="xp"==gPuzzleManager.level?f:c,c.textContent+=" Express",c.dataset.level="xp"):a.querySelector(".leftButton").hidden=
!0;6<this.size&&a.querySelector(".letters").classList.add("hugeGrid");this._node=a.children[0];a=this.$(".leftButton");c=this.$(".rightButton");d&&(this.isSpeller?(this._node.addEventListener("pointerdown",function(h){return e._onSpellerPointerDown(h)}),window.addEventListener("keydown",function(h){e._onSpellerKeyDown(h)})):(this._node.addEventListener("pointerdown",function(h){return e._onPointerDown(h)}),window.addEventListener("pointerup",function(h){return e._onPointerUp(h)}),window.addEventListener("keydown",
function(h){e._onKeyDown(h)})));if(d&&!Store.needsTutorial()){Store.hasRotated()&&this.$(".letterBoxes").classList.add("didRotate");c.addEventListener("click",function(h){var k=h.target;k.classList.contains("box")?(k.remove(),Store.setHasRotated()):((k=h.currentTarget.querySelector(".box"))&&k.remove(),e.isSpeller?(h.preventDefault(),e._spellerBackspace()):e._rotate(h))});var g=function(){if(!Store.hasRotated())if(gPopups.isPopupOpen()||2>e._numWordsSubmitted)setTimeout(g,1E4);else{var h=e.isSpeller?
$(".leftButton"):$(".rightButton");h.querySelector("svg").classList.add("throb");var k=document.createElement("div");k.classList.add("box","scoreBox",e.isSpeller?"arrow-left-center":"arrow-right-center");k.textContent=e.isSpeller?"Shuffle!":"Rotate!";h.appendChild(k)}};Store.hasPlayedDays(2)&&!Store.hasRotated()&&setTimeout(g,6E4);a.addEventListener("click",function(h){var k=h.target;if(k.classList.contains("box"))k.remove(),Store.setHasRotated();else{var l=h.currentTarget.querySelector(".box");l&&
l.remove();if(e.isSpeller)e._rotate(h);else if(h.preventDefault(),$("#puzzleSelector").hidden&&!$("#puzzleSelector").contains(k)){$("#puzzleSelector").hidden=!1;var m=function(q){$("#puzzleSelector").hidden=!0;q=q.target;q.classList.contains("switchPuzzle")&&gPuzzleManager.playLevel(q.dataset.level);document.body.removeEventListener("click",m)};setTimeout(function(){return document.body.addEventListener("click",m)})}}});gTryDebug(function(){return gAudio.onBoardReady()})}else a.remove(),c.remove();
this._letterCoords=new Map;this._hintCoords=[];this._hintLetterTimeouts=[];this._prevPositions="bee"==Config.game?[[1,0],[0,1],[2,1],[0,2],[1,2],[2,2]]:null;this.renderPuzzle(b)};Board.prototype.$=function(a){var b=this._node.querySelector(a);assert(b,"Element not found: "+a);return b};Board.prototype.$$=function(a){return Array.from(this._node.querySelectorAll(a))};
Board.prototype.animateCompletion=function(a){this.$(".board").classList.add("primary");a||this.$(".board").classList.add("celebrate");this._node.querySelectorAll(".unnecessaryWrapper").forEach(function(b){return b.style.opacity=""})};Board.prototype.markLetterUnnecessary=function(a){this.$$(".letterBoxes .letterContainer").filter(function(b){return b.querySelector(".letter").textContent[0]==a.toUpperCase()}).forEach(function(b){return b.classList.add("unnecessary")})};
Board.prototype.markCoordUnnecessary=function(a,b){a=this.$$(".letterBoxes .letterContainer")[a.row*this.size+a.col];b&&a.classList.add("unnecessaryOnFirstLoad");a.classList.add("unnecessary")};Board.prototype.setCoordUses=function(a,b){this.$$(".letterBoxes .letter")[a.row*this.size+a.col].parentElement.querySelector(".usageCount").textContent=0==b?"":5<this.size&&9<b?"+":b.toString()};
Board.prototype.setCoordFirsts=function(a,b){this.$$(".letterBoxes .letter")[a.row*this.size+a.col].parentElement.querySelector(".firstsCount").textContent=0==b?"":5<this.size&&9<b?"+":b.toString()};
Board.prototype.renderPuzzle=function(a){this._listener&&Store.needsTutorial()&&"p"==a[0][0]?(this._pointerImg=document.createElement("img"),this._pointerImg.id="pointerImg",this._pointerImg.setAttribute("src","icons/hand-pointer-black.png")):this._pointerImg&&(this._pointerImg.remove(),this._pointerImg=null);this._letterCoords=new Map;var b=this.$(".letterBoxes");4!=this.size&&(b.style.gridTemplateColumns=Array(this.size).fill("1fr").join(" "));b.querySelectorAll("div").forEach(function(m){return m.remove()});
this._listener&&$("#game").getBoundingClientRect();for(var c=0;c<this.size;c++)for(var d=0;d<this.size;d++){var e=document.createElement("div");e.classList.add("letterContainer");e.style.fontSize="calc(4/"+this.size+" * 1em)";var f=document.createElement("div");f.classList.add("letterBg");var g=document.createElement("div");g.classList.add("letterFg");var h=document.createElement("div");h.classList.add("letter");var k=document.createElement("div");k.classList.add("content");this._letterCoords.set(k,
new Coord(c,d));var l=document.createElement("div");l.classList.add("unnecessaryWrapper");l.textContent=a[c][d].toUpperCase();[" ","\u2191"].includes(l.textContent)&&(e.classList.add("unnecessaryOnFirstLoad","unnecessary"),"\u2191"==l.textContent?(e.classList.add("unusable"),l.textContent="\u2b06\ufe0f"):this._spacerImage?(e.classList.add("unusable","image"),k.style.backgroundImage='url("icons/'+this._spacerImage+'")'):e.classList.add("blank"));k.appendChild(l);h.appendChild(k);g.appendChild(h);h=
document.createElement("div");h.classList.add("usageCount");h.classList.add("countInfo");g.appendChild(h);h=document.createElement("div");h.classList.add("firstsCount");h.classList.add("countInfo");g.appendChild(h);e.appendChild(f);e.appendChild(g);b.appendChild(e)}this.isSpeller&&b.querySelector(".letterContainer:nth-of-type(5)").classList.add("spellerRequired")};
Board.prototype.hintWord=function(a){for(var b=$jscomp.makeIterator(this._hintLetterTimeouts),c=b.next();!c.done;c=b.next())clearTimeout(c.value);this._hintLetterTimeouts=[];b=$jscomp.makeIterator(this._hintCoords);for(c=b.next();!c.done;c=b.next())c=c.value,this.$$(".letterBoxes .letterContainer")[c.row*this.size+c.col].classList.remove("hinting","stopHinting","hintable");this._hintCoords=a;if(0!=this._hintCoords.length){a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())b=b.value,this.$$(".letterBoxes .letter")[b.row*
this.size+b.col].classList.add("hintable");this._animateWord()}};Board.prototype.spin=function(){var a=this.$(".letterBoxes"),b=function(){a.removeEventListener("animationend",b);a.classList.remove("spinning")};a.addEventListener("animationend",b);a.classList.add("spinning")};
Board.prototype.goInvisible=function(){var a=this.$(".board"),b=function(c){c.target==c.currentTarget&&"fade-out-in"==c.animationName&&(a.removeEventListener("animationend",b),a.style.animation="")};a.addEventListener("animationend",b);a.style.animation="fade-out-in 1s"};Board.prototype.spellerStartEgg=function(){this.$$(".letterBoxes .letterContainer")[4].style.visibility="hidden";this.$$(".letterBoxes .letterContainer")[4].style.pointerEvents="none"};
Board.prototype.spellerStopEgg=function(){this.$$(".letterBoxes .letterContainer")[4].style.visibility="";this.$$(".letterBoxes .letterContainer")[4].style.pointerEvents=""};
Board.prototype._animateWord=function(){var a=this;this._hintLetterTimeouts=[];for(var b=this._hintCoords,c=$jscomp.makeIterator(b),d=c.next();!d.done;d=c.next())d=d.value,this.$$(".letterBoxes .letterContainer")[d.row*this.size+d.col].classList.remove("hinting","stopHinting");var e="bee"==Config.game?500:450;c=e*(b.length+1);for(d={i$jscomp$46:0};d.i$jscomp$46<b.length;d={i$jscomp$46:d.i$jscomp$46,targetEl$jscomp$3:void 0},d.i$jscomp$46++){var f=b[d.i$jscomp$46];d.targetEl$jscomp$3=this.$$(".letterBoxes .letterContainer")[f.row*
this.size+f.col];this._hintLetterTimeouts.push(setTimeout(function(g){return function(){if(0<g.i$jscomp$46){var h=b[g.i$jscomp$46-1];h=a.$$(".letterBoxes .letterContainer")[h.row*a.size+h.col];h.classList.remove("hinting");h==g.targetEl$jscomp$3&&h.offsetWidth}g.targetEl$jscomp$3.style.animationDuration=e+"ms";g.targetEl$jscomp$3.classList.add("hinting","hintable")}}(d),e*(d.i$jscomp$46+1)))}this._hintLetterTimeouts.push(setTimeout(function(){a.$$(".letterBoxes .letter.hinting").forEach(function(g){g.classList.add("stopHinting");
g.classList.remove("hinting")});a._hintLetterTimeouts.push(setTimeout(function(){return a._animateWord()},1E3))},c))};Board.prototype._rotate=function(a){a.preventDefault();Store.setHasRotated();gtagTryCatch("event","rotate_board");this.$(".rightButton svg").classList.remove("throb");this._pointerDown=!1;this._node.classList.remove("dragging");this._removeLines();if(this._listener)this._listener.onRotate();this._isRotating=!0;this.isSpeller?this._shuffleLetters():this._rotateLetters()};
Board.prototype._rotateLetters=function(){var a=this,b=this.$(".letterBoxes"),c=(this._rotation+this._divisions)%this._divisions;this._octRotate&&b.classList.add("octRotate");b.classList.remove(this._classPrefix+c);this._rotation=(this._rotation+1)%this._divisions;b.classList.add(this._classPrefix+this._rotation);4<this._divisions&&document.body.classList.toggle("rotateOdd",1==this._rotation%2);var d=function(){b.removeEventListener("animationend",d);if(a._listener)a._listener.onRotateEnd();a._isRotating=
!1;b.classList.add("didRotate")};b.addEventListener("animationend",d)};
Board.prototype._shuffleLetters=function(){var a=this,b=this.$(".letterBoxes"),c=function(){b.children[1].removeEventListener("transitionend",c);if(a._listener)a._listener.onRotateEnd();a._isRotating=!1;b.classList.add("didRotate")};b.children[1].addEventListener("transitionend",c);for(var d=[[1,0],[0,1],[2,1],[0,2],[1,2],[2,2]],e=new Random((new Date).getTime().toString()),f=e.shuffled(d),g=0;this._prevPositions;){g++;for(var h=!1,k=0;k<f.length;k++)if(f[k][0]==this._prevPositions[k][0]&&f[k][1]==
this._prevPositions[k][1]){e.shuffle(f);h=!0;break}if(!h)break}console.log("Shuffled "+g+" times");this._prevPositions=f;for(e=0;e<d.length;e++)k=d[e],g=f[e],h=b.children[3*k[1]+k[0]],h.style.left=111*(g[0]-k[0])+"%",k=111*(g[1]-k[1]),h.style.top=0==g[0]%2?k-50+"%":k+"%"};
Board.prototype._onPointerDown=function(a){if(!this._isRotating&&this._node.contains(a.target)){var b=null;a.target.classList.contains("content")?b=a.target:a.target.classList.contains("unnecessaryWrapper")?b=a.target.parentElement:a.target.classList.contains("usageCount")?b=a.target.parentElement.querySelector(".content"):a.target.classList.contains("letter")&&(b=a.target.querySelector(".content"));b&&" "!=b.textContent[0]&&(a.preventDefault(),document.addEventListener("pointermove",this._pointerMoveListener),
this._pointerDown=!0,0==this._usedLetters.length&&this._startWord(),this._onLetter(b))}};
Board.prototype._onPointerMove=function(a){if(!this._isRotating&&this._pointerDown){var b=document.elementFromPoint(a.clientX,a.clientY);if(b&&this._node.contains(b)){var c=null;b.classList.contains("content")?c=b:b.classList.contains("unnecessaryWrapper")?c=b.parentElement:b.classList.contains("usageCount")?c=b.parentElement.querySelector(".content"):b.classList.contains("letter")&&(c=b.querySelector(".content"));if(c&&![" ","\u2191"].includes(c)){b=c.parentElement.getBoundingClientRect();var d=
Math.sqrt(Math.pow(a.clientX-(b.left+(b.right-b.left)/2),2)+Math.pow(a.clientY-(b.top+(b.bottom-b.top)/2),2)),e=.5;c.parentElement.parentElement.parentElement.classList.contains("unnecessary")&&!this.$(".board").classList.contains("primary")&&(e=.2);1==this._rotation%2&&8==this._divisions&&(e/=2);d>e*(b.right-b.left)||(a.preventDefault(),a.stopPropagation(),this._onLetter(c))}}else this._listener.updateWord(this._getWord(),!1),100<this._node.getBoundingClientRect().top-a.clientY&&this._onPointerUp(a)}};
Board.prototype._onPointerUp=function(a){if(this._pointerDown)if(document.removeEventListener("pointermove",this._pointerMoveListener),this._pointerDown=!1,this._node.classList.remove("dragging"),100<this._node.getBoundingClientRect().top-a.clientY){if(this._listener)this._listener.onCancelWord();this._removeLines()}else this._submitWord()};
Board.prototype._onSpellerPointerDown=function(a){if(!this._isRotating&&this._node.contains(a.target)){var b=null;a.target.classList.contains("content")?b=a.target:a.target.classList.contains("unnecessaryWrapper")?b=a.target.parentElement:a.target.classList.contains("usageCount")?b=a.target.parentElement.querySelector(".content"):a.target.classList.contains("letter")&&(b=a.target.querySelector(".content"));b&&" "!=b.textContent[0]&&(a.preventDefault(),this._onSpellerLetter(b))}};
Board.prototype._onKeyDown=function(a){var b=this;if(this._node.getRootNode()!=this._node&&!(gPopups.isPopupOpen()||this._isRotating||a.metaKey||a.ctrlKey||a.altKey)){var c=function(h){return b.$$(".letter .content").filter(function(k){return k.textContent[0]==h}).filter(function(k){if(0==b._usedLetters.length)return!0;if(b._usedLetters.includes(k)&&(!b._isLoop||3>b._usedLetters.length||k!=b._usedLetters[0])||b._isLoop&&3<=b._usedLetters.length&&b._usedLetters[0]==b._usedLetters[b._usedLetters.length-
1])return!1;var l=b._usedLetters.slice(-1)[0];k=b._letterCoords.get(k);l=b._letterCoords.get(l);return 1>=Math.abs(l.row-k.row)&&1>=Math.abs(l.col-k.col)}).sort(function(k,l){return k.parentElement.parentElement.parentElement.classList.contains("unnecessary")?1:l.parentElement.parentElement.parentElement.classList.contains("unnecessary")?-1:0})},d=function(h,k,l){if(!h.length)return!0;var m=b.$$(".letter .content").filter(function(r){if(r.textContent[0]!=h[0]||k.includes(r)&&(!b._isLoop||3>k.length||
r!=k[0])||b._isLoop&&3<=k.length&&k[k.length-1]==k[0])return!1;if(!l)return!0;r=b._letterCoords.get(r);var n=b._letterCoords.get(l);return 1>=Math.abs(n.row-r.row)&&1>=Math.abs(n.col-r.col)});if(!m.length)return!1;m=$jscomp.makeIterator(m);for(var q=m.next();!q.done;q=m.next()){q=q.value;k.push(q);if(d(h.slice(1),k,q))return!0;k.pop()}return!1},e,f,g;if(1==(null==(e=a.key)?void 0:e.toUpperCase().length)&&"A"<=(null==(f=a.key)?void 0:f.toUpperCase())&&"Z">=(null==(g=a.key)?void 0:g.toUpperCase()))if((e=
document.activeElement)&&e.blur(),c=c(a.key.toUpperCase()),0<c.length)a=c[0],0==this._usedLetters.length&&this._startWord(),this._onLetter(a,!0);else{if(c=[],d(this._usedLetters.map(function(h){return h.textContent}).join("")+a.key.toUpperCase(),c,null))for(this._usedLetters.forEach(function(h){return h.parentElement.parentElement.parentElement.classList.remove("used","loopEnd")}),this._usedLetters=[],Array.from($$(".lineOrDot")).forEach(function(h){return h.remove()}),a=$jscomp.makeIterator(c),e=
a.next();!e.done;e=a.next())e=e.value,this._onLetter(e,!0,e!=c[c.length-1])}else if(" ;Space;Spacebar;Shift;Alt;Control".split(";").includes(a.key)||"Space"==a.code)0!=this._usedLetters.length&&(e=this._usedLetters.pop(),e.parentElement.parentElement.parentElement.classList.remove("used","loopEnd"),$(".lineOrDot:last-of-type").remove(),c=c(e.textContent[0]),e=(c.indexOf(e)+1)%c.length,this._onLetter(c[e],!0),a.preventDefault());else if("Enter"==a.key||"Return"==a.key)0!=this._usedLetters.length&&
(this._pointerDown=!1,this._node.classList.remove("dragging"),this._submitWord());else if("Backspace"==a.key||"Delete"==a.key)0!=this._usedLetters.length&&(a=this._usedLetters.pop(),a.parentElement.parentElement.parentElement.classList.remove(this._isLoop&&3<=this._usedLetters.length&&a==this._usedLetters[0]?"loopEnd":"used"),0==this._usedLetters.length?(this._pointerDown=!1,this._node.classList.remove("dragging"),this._submitWord()):($(".lineOrDot:last-of-type").remove(),this._listener&&this._listener.updateWord(this._getWord(),
!0)));else if(("Esc"==a.key||"Escape"==a.key)&&0!=this._usedLetters.length&&(this._pointerDown=!1,this._node.classList.remove("dragging"),this._removeLines(),this._listener))this._listener.onCancelWord()}};Board.prototype._submitWord=function(){var a=this._getWord();if(this._listener)this._listener.onSubmitWord(a);this._removeLines();this._numWordsSubmitted++};
Board.prototype._onSpellerKeyDown=function(a){if(this._node.getRootNode()!=this._node&&!(gPopups.isPopupOpen()||this._isRotating||a.metaKey||a.ctrlKey||a.altKey))if(1==a.key.toUpperCase().length&&"A"<=a.key.toUpperCase()&&"Z">=a.key.toUpperCase()){var b=document.activeElement;b&&b.blur();(b=this.$$(".letter .content").find(function(c){return c.textContent[0]==a.key.toUpperCase()}))&&this._onSpellerLetter(b,!0)}else if("Enter"==a.key||"Return"==a.key)this.spellerEnter();else if("Backspace"==a.key||
"Delete"==a.key)this.spellerBackspace();else if(("Esc"==a.key||"Escape"==a.key)&&0!=this._usedLetters.length&&(this._removeLines(),this._listener))this._listener.onCancelWord()};Board.prototype.spellerBackspace=function(){0!=this._usedLetters.length&&(this._usedLetters.pop().parentElement.parentElement.parentElement.classList.remove("used"),0==this._usedLetters.length?this._submitWord():this._listener&&this._listener.updateWord(this._getWord(),!0))};
Board.prototype.spellerEnter=function(){0!=this._usedLetters.length&&this._submitWord()};Board.prototype._startWord=function(){$$(".lineOrDot").forEach(function(a){return a.remove()});this._node.classList.add("dragging")};
Board.prototype.spookyShowCurrentWord=function(){var a=this;this.$$(".letterBoxes .letterContainer .content").forEach(function(b){a._usedLetters.includes(b)&&(b=b.querySelector(".unnecessaryWrapper"),b.classList.contains("spookyFade")&&(b.classList.remove("spookyFade"),b.offsetHeight),b.classList.add("spookyFade"))})};
Board.prototype._removeLines=function(){this._usedLetters.forEach(function(b){return b.parentElement.parentElement.parentElement.classList.remove("used","loopEnd")});this._usedLetters=[];var a=Array.from($$(".lineOrDot"));a.forEach(function(b){return b.classList.add("fading")});setTimeout(function(){return a.forEach(function(b){return b.remove()})},5E3)};Board.prototype._getWord=function(){return this._usedLetters.map(function(a){return a.textContent[0]}).join("")};
Board.prototype._onLetter=function(a,b,c){if(1<this._usedLetters.length&&a==this._usedLetters[this._usedLetters.length-2])a=this._usedLetters.pop(),a.parentElement.parentElement.parentElement.classList.remove(this._isLoop&&a==this._usedLetters[0]?"loopEnd":"used"),$(".lineOrDot:last-of-type").remove(),this._listener&&this._listener.updateWord(this._getWord(),b);else{var d=this._isLoop&&3<=this._usedLetters.length&&a==this._usedLetters[0]&&a!=this._usedLetters[this._usedLetters.length-1];if(!(this._usedLetters.includes(a)&&
!d||32<=this._usedLetters.length))if(0==this._usedLetters.length){if(!c)gAudio.onLetter();this._usedLetters.push(a);a.parentElement.parentElement.parentElement.classList.add("used");this._listener&&this._listener.updateWord(this._getWord(),b);b=document.createElement("div");b.classList.add("lineOrDot","dot");d=a.getBoundingClientRect();a=window.scrollX+d.left+(d.right-d.left)/2;d=window.scrollY+d.top+(d.bottom-d.top)/2;$("#lines").appendChild(b);b.style.left=a-b.offsetWidth/2+"px";b.style.top=d-b.offsetHeight/
2+"px"}else{var e=this._usedLetters.slice(-1)[0];if(!(this._isLoop&&3<this._usedLetters.length&&e==this._usedLetters[0])){var f=this._letterCoords.get(a).row,g=this._letterCoords.get(a).col,h=this._letterCoords.get(e).row,k=this._letterCoords.get(e).col;if(!(1<Math.abs(h-f)||1<Math.abs(k-g))){if(!c)gAudio.onLetter();c=0;h==f?k>g&&(c=180):c=h>f?k==g?270:k>g?225:315:k==g?90:k>g?135:45;f=document.createElement("div");g=a.getBoundingClientRect();k=e.getBoundingClientRect();f.classList.add("lineOrDot",
"line");e=window.scrollX+k.left+(k.right-k.left)/2;h=window.scrollX+g.left+(g.right-g.left)/2;k=window.scrollY+k.top+(k.bottom-k.top)/2;g=window.scrollY+g.top+(g.bottom-g.top)/2;f.style.top="calc("+1*k+"px - var(--height) / 2)";f.style.left="calc("+1*e+"px)";f.style.width="calc("+Math.sqrt(Math.pow(h-e,2)+Math.pow(g-k,2))+"px + 2 * var(--unit))";f.style.transformOrigin="left";c+=360*this._rotation/this._divisions;f.style.transform="rotate("+c+"deg)";$("#lines").appendChild(f);this._usedLetters.push(a);
a=a.parentElement.parentElement.parentElement;a.classList.add("used");d&&a.classList.add("loopEnd");this._listener&&this._listener.updateWord(this._getWord(),b)}}}}};Board.prototype._onSpellerLetter=function(a,b){32<=this._usedLetters.length||(gAudio.onLetter(),this._usedLetters.push(a),a.parentElement.parentElement.parentElement.classList.add("used"),this._listener&&this._listener.updateWord(this._getWord(),b),a.parentElement.parentElement.parentElement.classList.remove("used"))};
Board.prototype._spellerBackspace=function(){this._usedLetters.pop();this._listener&&this._listener.updateWord(this._getWord(),!1)};var CopyToClipboard={copy:function(a){return Promise.resolve(CopyToClipboard._copyCompat(a))},_copyCompat:function(a){var b=document.createElement("textarea");b.value=a;b.style.top="0";b.style.left="0";b.style.position="fixed";document.body.appendChild(b);b.focus();b.select();a=!1;try{a=document.execCommand("copy")}catch(c){}b.remove();return a}};var Tutorial=function(a){this._game=a;this._phase=1};Tutorial.prototype.handleWord=function(a){return 1==this._phase&&"play"==a?(this._phase2(),"Nice!"):2==this._phase&&"find"==a?(this._phase3(),"Good find!"):4==this._phase&&"tutorial"==a?(this._phase5(),"You're ready!"):null};
Tutorial.prototype.onKeyboardWord=function(a){1==this._phase&&"PLAY"==a?$("#tutorialMsg").textContent="Press Enter to submit a word":4==this._phase&&("TUTORIAL".startsWith(a)?$("#tutorialMsg").textContent="Finish by spelling TUTORIAL!":$("#tutorialMsg").textContent="Stuck? Press Backspace")};
Tutorial.prototype._phase2=function(){var a=this;this._phase=2;gtagTryCatch("event","tutorial_begin");gtag("set","tutorial","tutorialStarted");setTimeout(function(){$("#tutorialMsg").classList.remove("blink");$("#tutorialMsg").classList.add("blink");$("#tutorialMsg").textContent="You can spell in any direction. Spell FIND";a._game.setPuzzle(tutorialPuzzles[1])},1E3)};
Tutorial.prototype._phase3=function(){var a=this;isWide()?this._phase4():(this._phase=3,$("#tutorialMsg").textContent="Tap the word count above",$("#board").classList.add("disabled"),$("#wordCountArea").classList.add("blink"),$("#wordCountArea").addEventListener("click",function(){a._phase4()}))};
Tutorial.prototype._phase4=function(){var a=this;$("#wordCountArea").classList.remove("blink");this._phase=4;$("#tutorialMsg").classList.remove("blink");setTimeout(function(){$("#board").classList.remove("disabled");$("#tutorialMsg").textContent="Finish by spelling TUTORIAL!";$("#tutorialMsg").classList.add("blink");a._game.setPuzzle(tutorialPuzzles[2])},1E3)};
Tutorial.prototype._phase5=function(){gtagTryCatch("event","tutorial_complete");this._phase=5;$("#tutorialMsg").textContent="Good luck!";Store.setDidTutorial();gtag("set","tutorial",Store.getTutorialValue());setTimeout(function(){return api.reload("tutorial")},2E3)};var GameUI=function(a){var b=this;this._game=a;this._isSpeller=this._game.puzzle.special.speller;this._lastLoggedResize=null;this._numLoggedResizes=0;window.addEventListener("resize",function(){return b.resizeBoard()});window.addEventListener("gestureend",function(c){b.resizeBoard()});window.addEventListener("orientationchange",function(){setTimeout(function(){return b.resizeBoard()});for(var c=10;2E3>c;c*=2)setTimeout(function(){return b.resizeBoard()},c)});$("#wordDefiner").addEventListener("click",
function(c){c=c.currentTarget;var d,e=(c.dataset.lookupWord||(null==(d=c.querySelector("#wordDefinerWord"))?void 0:d.textContent)||"").replaceAll("'","");if(b._game.puzzle.wordOfTheDay&&b._game.puzzle.wordOfTheDay.term==e)(new WordOfTheDayDetail(b._game.puzzle.wordOfTheDay,!0,b._game.puzzle.credits)).dispatch();else{var f=null;try{var g;f=null==(g=b._game.puzzle.special.lexicon)?void 0:g[e]}catch(h){console.error(h)}setTimeout(function(){return DefinitionView.fromDefinition(e,b._game.puzzle.wiktDefinitions,
b._game.puzzle.definitions,b._game.puzzle.dictionaryEntries,f).show()})}});this._pointerDownY=this._pointerDownX=0;this._pointerMoveListener=null;this._isSpeller&&$("#word").addEventListener("click",function(c){return b._onSpellerWordClick(c)})};GameUI.prototype.getBoard=function(){return $("#board")};
GameUI.prototype.setUp=function(a){100<=a&&$("#wordCountArea").classList.add("smaller");this._game.findingWaffleIngredients()?($("#maxWordCount").textContent="7",$("#wordsLabel").innerHTML="&nbsp;ingredients",$("#progressCell").style.display="none"):this._game.findingClues()?($("#maxWordCount").textContent=this._game.puzzle.special.targetWords.length,$("#wordsLabel").innerHTML="&nbsp;clues",$("#progressCell").style.display="none"):($("#maxWordCount").textContent=a,$("#wordsLabel").innerHTML="&nbsp;words",
$("#progressCell").style.display="")};
GameUI.prototype.resizeBoard=function(){var a=this.getBoard();a.style.width="";a.style.height="";$("#game").classList.add("calcHeight");var b=a.offsetHeight;$("#game").classList.remove("calcHeight");var c=1/1.2408;var d=isWide()?$("#game").offsetWidth:window.innerWidth;b=Math.floor(Math.min(b,d*c,500*c,"bee"==Config.game?300:Infinity));a.style.width=b+"px";a.style.height=b+"px";a.style.fontSize=Math.round(.13*b)+"px";document.body.style.setProperty("--unit",.014*b+"px")};
GameUI.prototype.hideMessages=function(){$("#spacer").hidden=!1;$("#word").hidden=!0;$("#status").hidden=!0;$("#wordText").style.fontSize="100%";$("#wordDefiner").classList.remove("show");$("#wordDetails").classList.remove("show");$("#incorrectWord").classList.remove("show")};
GameUI.prototype.showCurrentWord=function(a,b){this.hideMessages();$("#spacer").hidden=!0;b=$("#word");b.hidden=!1;var c=$("#wordText");for(c.textContent=a;c.offsetWidth>b.offsetWidth;)a=parseInt(c.style.fontSize,10),c.style.fontSize=a-10+"%"};
GameUI.prototype.showStatus=function(a,b,c){this.hideMessages();$("#spacer").hidden=!0;var d=$("#status");d.classList.remove("secondary");d.hidden=!1;d.classList.remove("fade-in-out");d.classList.add("fade-in-out");d=$("#statusText");d.innerHTML=a;d.classList.toggle("small",!0===b);a=$("#statusIcon");c?(a.innerHTML=' <svg><use href="#icon-help-outline"></svg>',d.onclick=c,a.classList.toggle("small",!0===b),a.onclick=c,$("#incorrectWord").onclick=c):(a.innerHTML="",a.onclick=null,d.onclick=null,$("#incorrectWord").onclick=
null)};GameUI.prototype.setWordValid=function(a){$("#word").classList.toggle("valid",a)};
GameUI.prototype.showWordDefiner=function(a){var b,c=null==(b=this._game.puzzle.special.lexicon)?void 0:b[a];$("#wordDefinerWord").textContent=(null==c?void 0:c.displayWord)||a;delete $("#wordDefiner").dataset.lookupWord;$("#wordDetails").hidden=!0;window.wordStats?gLexicon[a]?($("#wordDetails").hidden=!1,$("#wordDetails use").setAttribute("href","#icon-star")):window.wordStats[a]&&($("#wordDetails").hidden=!1,$("#wordDetails use").setAttribute("href","#icon-chart")):c&&($("#wordDetails").hidden=
!1,$("#wordDetails use").setAttribute("href","#icon-star"),$("#wordDefiner").dataset.lookupWord=a);setTimeout(function(){return $("#wordDefiner").classList.add("show")})};GameUI.prototype.showIncorrectWord=function(a){$("#incorrectWordText").textContent=a;$("#incorrectWord").classList.add("show")};GameUI.prototype.animateGotWord=function(){$("#status").classList.add("secondary");$("#wordCountArea").classList.remove("afterGotWord");setTimeout(function(){return $("#wordCountArea").classList.add("afterGotWord")})};
GameUI.prototype.updateScoreVisuals=function(a){$("#curWordCount").textContent=a.numWords;$("#prevWordCount").textContent=a.prevNumWords;a.prevNumWords<a.numWords&&($("#wordCount").classList.remove("updating","animating"),$("#wordCount").classList.add("updating"),requestAnimationFrame(function(){$("#wordCount").classList.add("animating");$("#curWordCount").addEventListener("transitionend",function(){$("#wordCount").classList.remove("updating","animating")})}));$("#curObscureWordCount").textContent=
a.numOptionalWords;$("#obscureWordCount").classList.toggle("hide",0==a.numOptionalWords);$("#progress #filled").classList.toggle("filled0",3>a.tierLevel);$("#progress #filled").classList.toggle("filled1",3==a.tierLevel);$("#progress #filled").classList.toggle("filled2",4==a.tierLevel);$("#progress #filled").classList.toggle("filled3",5<=a.tierLevel);1<a.scorePercent&&(100>a.scorePercent?$("#progress #filled").style.width=a.scorePercent+"%":$("#progress #filled").style.width="calc(100% + 2px)")};
GameUI.prototype._onSpellerPointerDown=function(a){var b=this;this._pointerMoveListener||(a.preventDefault(),this._pointerDownX=a.clientX,this._pointerDownY=a.clientY,this._pointerMoveListener=function(c){return b._onSpellerPointerMove(c)},document.addEventListener("pointermove",this._pointerMoveListener))};
GameUI.prototype._onSpellerPointerMove=function(a){a.preventDefault();var b=this._pointerDownX-a.clientX;20<b&&b>Math.abs(this._pointerDownY-a.clientY)&&(document.removeEventListener("pointermove",this._pointerMoveListener),this._pointerMoveListener=null,this._game.onUiBackspace())};GameUI.prototype._onSpellerPointerUp=function(a){this._pointerMoveListener&&(a.preventDefault(),document.removeEventListener("pointermove",this._pointerMoveListener),this._pointerMoveListener=null,this._game.onUiEnter())};
GameUI.prototype._onSpellerWordClick=function(a){a.preventDefault();this._game.onUiEnter()};var WordOfTheDayDetail=function(a,b,c){this.wordOfTheDay=a;this.found=b;this.credits=c};WordOfTheDayDetail.prototype.dispatch=function(){window.dispatchEvent(new CustomEvent("wordOfTheDay",{detail:this}))};
var Game=function(a,b,c,d,e){var f=this;this.renderer=a;this.state=b;this.puzzle=c;this.solution=this._solution=d;if(this._isTutorial=e)this._tutorial=new Tutorial(this);this._puzzleSolver=e?null:new PuzzleSolver(this.puzzle,d);this._hintingWord=this._timer=null;this._isTutorial||"number"!=typeof this.puzzle.difficulty||this.renderer.showDifficulty();this._prevScore=d.score;this._prevWordCount=d.words.size;if(this._wasWaffleIngredients=this.findingWaffleIngredients())this._prevWordCount=this.countWaffleIngredients();
this._prevOptionalWordCount=d.obscureWords.size;this._missingCenterLetterCount=0;this.gameUi=new GameUI(this);this._wordEmojis=function(){var h={"\ud83e\udd23":"lmao lmfao rofl roflmao roflmfao lolol".split(" "),"\ud83d\ude02":["laugh","laughing","laughter","laughed","laughs"],"\ud83d\ude03":"smile smiles smiled smiling happy happier happiest happily".split(" "),"\u2639":"frown frowns frowning sadder saddest sadly".split(" "),"\ud83d\ude38":"cats feline felines kitten kittens kitty kitties meow meows meowed meowing nyan purr purrs purred purring yowl yowls yowled yowling".split(" "),
"\ud83d\udc08":["hiss","hisses","hissed","hissing"],"\ud83d\udc36":"dogs doggy doggies canine canines woof woofed woofs woofing bark barked barks barking collie snoot snoots bowwow bowwows puppy puppies protec attac".split(" "),"\ud83d\udc4d":"thumb thumbs approve approves approved approval approvals approver approving".split(" "),"\ud83d\ude1b":["tongue","tongues","blep"],"\ud83d\udc30":"rabbit rabbits hare hares bunny bunnies".split(" "),"\ud83e\udd67":"pies pied pastry pastries bake baked baker bakers bakes baking".split(" "),
"\ud83d\udeb2":"bicycle bicycles bicycler bicyclers bicycling cycle cycled cycles cycling cycler cyclers bike biker bikers bikes biked biking ride rider riders rides rode riding".split(" "),"\ud83d\udcb2":"earn earner earners earns earned earning dollar dollars money moneys monied currency currencies cost costs price pricing prices priced sale sales sell sells selling sold seller sellers".split(" "),"\ud83d\udc26":"bird birds birder birders birded birding tern terns wren wrens gull gulls seagull seagulls raven ravens hawk hawks dove doves pigeon pigeons crow crows robin robins jays sparrow sparrows tits booby boobies thrush thrushes loon loons".split(" "),
"\ud83c\udfb5":"note notes music musical sing sings singer singers sang sung song songs duet duets".split(" "),"\ud83d\udc51":"crown crowns crowned crowning king kings queen queens royal royalty".split(" "),"\ud83d\udcc9":["hodl","hodls","hodled","hodling"],"\ud83e\uddc7":["waffle","waffles","eggo","eggos"],"\ud83e\udd5a":["eggs","omelet","omelets","omelette","omelettes"],"\ud83e\udd81":["lion","lions","lioness","lionesses"],"\ud83d\udc3b":"bear bears teddy teddies cubs grizzly grizzlies".split(" "),
"\ud83d\udc0d":"snake snakes python pythons anaconda anacondas asps cobra cobras slither slithers slithering slithered".split(" "),"\ud83c\udff9":["arrow","arrows"],"\ud83d\udd25":"fire fires fiery flame flames flamed flaming afire".split(" "),"\ud83d\udc2f":["tiger","tigers","tigress","tigresses"],"\ud83d\udc34":"horse horses horsey horseys horsie horsies filly fillies".split(" "),"\ud83e\udd84":["unicorn","unicorns"],"\ud83e\udd8c":"deer deers buck bucks reindeer reindeers stag stags".split(" "),
"\u26bd":"ball balls soccer sport sports athlete athletics".split(" "),"\ud83c\udfae":"game games gaming gamed gamer gamers gamepad gamepads".split(" "),"\u2764\ufe0f":"heart hearts love loves loved loving lovingly romance romances romancing romanced romantic".split(" "),"\ud83d\ude18":"lover lovers kiss kisses kissed kissing".split(" "),"\ud83e\udd70":["heartfelt"],"\ud83d\udfe5":["square","squares"],"\ud83c\udf6f":["honey"],"\ud83d\udc1d":["bees","honeybee","honeybees","bumblebee","bumblebees"],
"\ud83c\udf37":["tulip","tulips"],"\ud83e\uddd0":["suss"],"\ud83e\udd43":["malort"],"\ud83e\udd95":"dino dinos dinosaur dinosaurs sauropod sauropods".split(" "),"\ud83c\udf33":["tree","trees"],"\ud83c\uddec\ud83c\udde7":["brexit"],"\ud83c\udf40":["clover","clovers"],"\u2618\ufe0f":["shamrock","shamrocks"],"\ud83c\udf08":["rainbow","rainbows"],"\u2728":["sparkle","sparkled","sparkling","sparkles"]};"2023/02/12"==gPuzzleManager.puzzleKey&&(h["\ud83c\udfc8"]="chief chiefs eagle eagles huddle fumble fumbles offense defense".split(" "));
for(var k=new Map,l=$jscomp.makeIterator(Object.getOwnPropertyNames(h)),m=l.next();!m.done;m=l.next()){m=m.value;for(var q=$jscomp.makeIterator(h[m]),r=q.next();!r.done;r=q.next())k.set(r.value,m)}return k}();var g=function(){f.gameUi.setUp(f.puzzle.words.length);f._setUpBoard();if(!f._isTutorial){var h=f._solution.isSolved();f._timer=new PageTimer(f._solution,h)}f._updateScore(!0);window.addEventListener("updateScoreVisuals",function(k){f._updateScoreVisuals()})};Promise.all(readyPromises).then(function(){return gTryDebug(g)})};
Game.prototype.onSubmitWord=function(a){a=a.toLowerCase();var b=this._tutorial&&this._tutorial.handleWord(a);if(b)this.gameUi.showStatus(b),this._solution.add(a),this._updateScore(!1),isWide()&&this._wordList.show();else if(4>a.length)1>=a.length?this.gameUi.hideMessages():(this.gameUi.showStatus("Too short"),this.gameUi.setWordValid(!1));else{["welch","welsh"].includes(a)&&!GlobalStore.getBoolean("welch")&&(Dialog.show('A note on "'+a+'"','<p>To welch, or to welsh, means to avoid payment or renege on a deal.\n        </p>\n        <p>It\'s a derogatory word, which just means that it\'s an insult. For\n        instance, Wiktionary defines "jerk" as "<em>(Canada, US, slang,\n        derogatory) A person with unlikable or obnoxious qualities and behavior,\n        typically mean, self-centered or disagreeable</em>. That\'s fine.</p>\n        <p>We try to mark words as sensitive when they have clear racist, sexist,\n        ableist, etc. histories -- words which are usually tagged "offensive" or\n        "ethnic slur" or "vulgar" in the dictionary.</p>\n        <p>Some people conjecture that the word "welch"/"welsh"\n        originated as a racist term, to quote the OED, "on account of alleged\n        dishonesty of Welsh people". There\'s no hard evidence that the term was\n        actually derived in this way, but a few people have pointed this out so\n        far. In the future we\'ll make both word forms "sensitive", meaning they\n        won\'t count as words or bonus words but also won\'t ding your\n        accuracy.</p>\n        <p>As always, thanks for playing and thank you for sending in your\n        feedback!</p>',
!1,!1),setTimeout(function(){return GlobalStore.setBoolean("welch",!0)},3E3));b=document.body.classList.contains("spooky")&&!this._solution.has(a)&&(this.puzzle.words.includes(a)||this.puzzle.optionalWords.includes(a));var c=new SearchEvent(a),d="";if(this.puzzle.special.emojis)for(var e=$jscomp.makeIterator(Object.getOwnPropertyNames(this.puzzle.special.emojis)),f=e.next();!f.done;f=e.next())if(f=f.value,this.puzzle.special.emojis[f].includes(a)){d=f;break}!d&&this._wordEmojis.has(a)&&(d=this._wordEmojis.get(a));
f="";d&&(f='&nbsp;<span class="emoji"><span>'+d+"</span></span>");d=e=!1;if(this._solution.has(a))c.setWordResult(SearchEvent.WordResult.kAlreadyFound),this.puzzle.words.includes(a)?(this.gameUi.showStatus("Already found"+f,!0),c.setWordType(SearchEvent.WordType.kWord)):(this.gameUi.showStatus("Already found (bonus)"+f,!0),c.setWordType(SearchEvent.WordType.kOptionalWord)),this.gameUi.setWordValid(!1),e=!0;else if(this.puzzle.words.includes(a))c.setWordResult(SearchEvent.WordResult.kFound),c.setWordType(SearchEvent.WordType.kWord),
0==this._solution.words.size&&("squaredle"==Config.game&&8<=a.length?gAchievementsMgr.setIfIncomplete("longWordFirst",1):"bee"==Config.game&&7==(new Set(Array.from(a))).size&&gAchievementsMgr.setIfIncomplete("pangramFirst",1)),this._solution.add(a),this._updateSquareHints(!1),"bee"==Config.game&&7==(new Set(Array.from(a))).size?this.gameUi.showStatus("Pangram! +"+Solution.scoreWord(a)+" points",!0):(e=Solution.scoreWord(a),this.gameUi.showStatus("+"+e+" point"+(1<e?"s":"")+f)),this.gameUi.setWordValid(!0),
this.gameUi.animateGotWord(),this._updateScore(!1),this._solution.score>=this.state.maxScore?(gAudio.playComplete(),gAchievementsMgr.onComplete(this._solution)):gAudio.playFoundWord(a),a==this._hintingWord&&this._board.hintWord([]),isWide()&&this._wordList.show(),e=!0;else if(this.puzzle.optionalWords.includes(a))c.setWordResult(SearchEvent.WordResult.kFound),c.setWordType(SearchEvent.WordType.kOptionalWord),this._solution.addObscure(a),"leet"==a?this.gameUi.showStatus("l33t (bonus!)"+f,!0):a.includes("dgement")?
this.gameUi.showStatus("Bonus (dialectal)!"+f,!0):this.gameUi.showStatus("Bonus word found!"+f,!0),this.gameUi.setWordValid(!0),this._updateScore(!1),8<=a.length&&gAchievementsMgr.setIfIncomplete("longBonusWord",1),gAudio.playBonus(),isWide()&&this._wordList.show(),["welch","welsh"].includes(a)||GlobalStore.showedBonusWordDialog()||this.puzzle.wordOfTheDay&&a==this.puzzle.wordOfTheDay.term||($("#bonusWordFound").hidden=!1,gPopups.show($("#bonusWordDialog")),GlobalStore.setShowedBonusWordDialog()),
e=!0;else if("perpetualmotion"==a)this.gameUi.hideMessages(),this._board.spin();else if("squaredle squaredles squaredled squaredleing squardling squaredler squaredlers".split(" ").includes(a)||"arrrrr"==gPuzzleManager.puzzleKey&&["jollyroger","skullandbones"].includes(a))this.gameUi.hideMessages(),this._board.spin();else if(this._maybeShowSpecialDialogForWord(a))this.gameUi.hideMessages();else{c.setWordResult(SearchEvent.WordResult.kNotAWord);c.setWordType(SearchEvent.WordType.kNotAWord);f="Not in list"+
f;var g=!1,h=null;if("valentine-25"==gPuzzleManager.puzzleKey&&"allmine bemine callme imme kissme marryme youreit".split(" ").includes(a)){var k=";            BIG FAN;            EMAIL ME;            HUG ME;            LETS KISS;            ME + YOU;            MY BOO;            PROUD OF U;            QT PIE;            TXT ME;            UR CUTE;            UR MINE;            UR SWEET;            XOXO;            YOUDA BEST;            ".split(";").map(function(l){return l.trim()}).filter(function(l){return l});
do f=k[Math.floor(Math.random()*k.length)];while(f.replaceAll(" ","").toLowerCase().includes(a))}else this.puzzle.special.speller&&!a.includes(this.puzzle.board[1][1])?(this._missingCenterLetterCount++,1==this._missingCenterLetterCount||3==this._missingCenterLetterCount?f='Missing "'+this.puzzle.board[1][1].toUpperCase()+'"':2==this._missingCenterLetterCount||4==this._missingCenterLetterCount?(f="Must use center square",g=!0):5<=this._missingCenterLetterCount&&15>=this._missingCenterLetterCount?(f=
"Use the middle letter!;...seriously?;Don't make me do it;I'm warning you;Now look what you've done;Are you sorry?;It's OK.;Do you promise to behave?;I forgive you.;But you promised!;You broke my heart.".split(";")[this._missingCenterLetterCount-5],g=15<f.length,9==this._missingCenterLetterCount?this._board.spellerStartEgg():13==this._missingCenterLetterCount&&this._board.spellerStopEgg()):25==this._missingCenterLetterCount?(f="...are you still there?",g=!0,this._missingCenterLetterCount=0):(f="...",
g=!0)):gBannedGuesses.includes(a)?(f="Excluded word",g=!0,h=function(){Dialog.showExcludedWord(!1)},GlobalStore.getBoolean("suppressSensitiveDialog")||Dialog.showExcludedWord(!0)):(h=function(){Dialog.showWordListExplanation()},d=!0,this._solution.addNonWord(),g=!0);this.gameUi.showStatus(f,g,h);this.gameUi.setWordValid(!1);gAudio.playError()}/^(invisib(le|ly|ility)|disappear(s|ed|ing|ances?)?)$/.test(a)&&this._board.goInvisible();e&&!this._isTutorial&&(0<this.puzzle.definitions.size||0<this.puzzle.wiktDefinitions.size)?
this.gameUi.showWordDefiner(a):d&&this.gameUi.showIncorrectWord(a);this.puzzle.wordOfTheDay&&a==this.puzzle.wordOfTheDay.term&&(c.setWordOfTheDay(),(new WordOfTheDayDetail(this.puzzle.wordOfTheDay,!0,this.puzzle.credits)).dispatch());b&&this._board.spookyShowCurrentWord();c.log()}};Game.prototype.onCancelWord=function(){this.gameUi.showStatus("Cancel");this.gameUi.setWordValid(!1);gtagTryCatch("event","cancel_search")};Game.prototype.setPuzzle=function(a){this.puzzle=a;this._board.renderPuzzle(this.puzzle.board)};
Game.prototype.hintRandomUnfoundWord=function(){for(var a=$jscomp.makeIterator(this._puzzleSolver.wordsToHint),b=a.next();!b.done;b=a.next())if(b=b.value,!this._solution.has(b)){this.hintWord(b);return}console.warn("No words left to hint")};Game.prototype.hintWord=function(a){this._hintingWord&&this._board.hintWord([]);this._hintingWord=a;this._board.hintWord(assert(this._puzzleSolver.getWordCoords(a)))};
Game.prototype._updateSquareHints=function(a){assert(!this._isTutorial);var b=this._puzzleSolver.getUnnecessaryCoords();b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())this._board.markCoordUnnecessary(c.value,a);a=this._solution.getScoreTier(this.state.maxScore);if(!(3>a.level)){b=$jscomp.makeIterator(this._puzzleSolver.getCoordFirstCounts().entries());for(c=b.next();!c.done;c=b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;this._board.setCoordFirsts(c,
d)}if(!(4>a.level)){b=$jscomp.makeIterator(this._puzzleSolver.getCoordUses().entries());for(c=b.next();!c.done;c=b.next())c=c.value,this._board.setCoordUses(c[0],c[1]);5>a.level||this._wordList&&this._wordList.enableHints()}}};Game.prototype.onUiBackspace=function(){this._board.spellerBackspace()};Game.prototype.onUiEnter=function(){this._board.spellerEnter()};Game.prototype.updateWord=function(a,b){this.gameUi.showCurrentWord(a,b||!1);this.gameUi.setWordValid(3<a.length&&"Cancel"!=a);if(b&&this._isTutorial)this._tutorial.onKeyboardWord(a)};
Game.prototype.onRotate=function(){this.gameUi.hideMessages();$("#game").classList.add("boardRotating")};Game.prototype.onRotateEnd=function(){$("#game").classList.remove("boardRotating");gAchievementsMgr.onRotate();this._solution.onRotate()};
Game.prototype.countWaffleIngredients=function(){for(var a=0,b=$jscomp.makeIterator("eggs milk flour sugar salt vanilla".split(" ")),c=b.next();!c.done;c=b.next())this._solution.has(c.value)&&a++;b=$jscomp.makeIterator(["baking","powder"]);for(c=b.next();!c.done;c=b.next())this._solution.has(c.value)&&(a+=.5);return a};
Game.prototype.countClues=function(){var a=0;if(this.puzzle.special.targetWords)for(var b=$jscomp.makeIterator(this.puzzle.special.targetWords),c=b.next();!c.done;c=b.next())this._solution.has(c.value)&&a++;return a};Game.prototype.findingWaffleIngredients=function(){return gPuzzleManager.puzzleKey.startsWith("waffle-ingredients")?7>this.countWaffleIngredients():!1};Game.prototype.findingClues=function(){return"mitmh"==gPuzzleManager.puzzleKey&&!Store.needsTutorial()};
Game.prototype.showWordList=function(){this._wordList.show()};Game.prototype.initWordList=function(a,b){this._wordList=new WordList(this,this._solution,a,b,this._isTutorial);5<=this._solution.getScoreTier(this.state.maxScore).level&&this._wordList.enableHints()};
Game.prototype._updateScoreVisuals=function(){this.findingWaffleIngredients()||this.findingClues()?this.gameUi.updateScoreVisuals({numWords:this.findingWaffleIngredients()?this.countWaffleIngredients():this.countClues(),prevNumWords:this._prevWordCount,numOptionalWords:0,tierLevel:1,scorePercent:0}):this.gameUi.updateScoreVisuals({numWords:this._solution.words.size,prevNumWords:this._prevWordCount,numOptionalWords:this._solution.obscureWords.size,tierLevel:this._solution.getScoreTier(this.state.maxScore).level,
scorePercent:this._solution.score/this.state.maxScore*100})};
Game.prototype._updateScore=function(a){var b=this;this._wasWaffleIngredients&&!this.findingWaffleIngredients()&&(this._wasWaffleIngredients=!1,this.gameUi.setUp(this.puzzle.words.length),Dialog.show("All ingredients found!","\n<p><em>Flour, milk, eggs, baking powder, sugar, salt, vanilla... Enjoy your waffles!</em></p>\n<p>Continue working on this massive puzzle, or try today's regular Squaredle?</p>\n"+(4>Store.numDaysPlayed()?"(New players: Try the regular Squaredle first. You can always get back here from the Special Puzzles menu.)":""),
!1,!0,{label:"Keep going",action:function(){}},{label:"Play today's Squaredle",action:function(){gPuzzleManager.playTodayPuzzle()}}));var c=Solution.getScoreThresholds(),d=this._solution.score/this.state.maxScore*100,e=this._prevScore/this.state.maxScore*100,f=this._solution.getScoreTier(this.state.maxScore);this._updateScoreVisuals();this._prevWordCount<this._solution.words.size&&(this._prevWordCount=this._solution.words.size);this.findingWaffleIngredients()&&(this._prevWordCount=this.countWaffleIngredients());
this._prevOptionalWordCount<this._solution.obscureWords.size&&(this._prevOptionalWordCount=this._solution.obscureWords.size,this._prevOptionalWordCount==this.puzzle.optionalWords.length&&($("#allBonusWordsCount").textContent=this.puzzle.optionalWords.length,gPopups.show($("#allBonusWordsFound"))));this._prevOptionalWordCount>=.8*this.puzzle.optionalWords.length&&$("#allBonusWordsFound .content img").setAttribute("src","images/fist-pump.png");1<d&&!this._isTutorial&&(this._solution.score>=this.state.maxScore&&
(a||d!=e)&&(this._board.animateCompletion(a),a||(setTimeout(function(){gPopups.isPopupOpen()||gTryDebug(function(){return b.renderer.renderShare()})},1500),gtagTryCatch("event","gameComplete"),gtagTryCatch("event","conversion",{send_to:"AW-10976814591/0CIrCLLJ8tkDEP_Lk_Io"})),assert(this._timer),this._timer.finish()),a=c.find(function(g){return d>=g}),c=c.find(function(g){return e>=g}),a!=c&&("Hints"==f.tierName&&DateUtil.shouldAllowHints||setTimeout(function(){b.renderer.maybeShowExplainer("levelUp"+
f.tierName)},500),gtagTryCatch("event","level_up",{level:f.level})));this._prevScore!=this._solution.score&&gtagTryCatch("event","post_score",{score:this._solution.score,level:gPuzzleManager.puzzleKey});this._prevScore=this._solution.score};Game.prototype._setUpBoard=function(){this._board=new Board(this.gameUi.getBoard(),this.puzzle.board,this.puzzle,this);this._isTutorial||this._updateSquareHints(!0)};
Game.prototype._maybeShowSpecialDialogForWord=function(a){a=this.puzzle.getSpecialWordMessage(a);if(!a)return!1;Dialog.show(a.title,a.body);return!0};var Leaderboards=function(a,b,c){var d=this;this.state=a;this.puzzle=b;this.solution=c;var e=this._leaderboardScores=null;$("#leaderboardName").addEventListener("focus",function(k){k.currentTarget.select()});var f=function(){clearTimeout(e);var k=$("#leaderboardName").value;$("#leaderboardsNameError").hidden=!0;k!=GlobalStore.getName()&&(0<k.length&&3>k.length||14<k.length?($("#leaderboardsNameError").textContent="Name must be between 3 and 14 letters long",$("#leaderboardsNameError").hidden=!1):
Array.from(k).some(function(l){l=l.charCodeAt(0);return 33>l||127==l||168<l&&224>l||238<l})?($("#leaderboardsNameError").textContent="Invalid characters",$("#leaderboardsNameError").hidden=!1):api.setName(k).then(function(l){l.data.success?(GlobalStore.setName(k),gTryDebug(function(){return d.show()})):($("#leaderboardsNameError").textContent=l.data.reason,$("#leaderboardsNameError").hidden=!1)},function(l){$("#leaderboardsNameError").textContent="Network error";$("#leaderboardsNameError").hidden=
!1}))};$("#leaderboardName").addEventListener("blur",f);a=$jscomp.makeIterator(["keyup","change"]);for(b=a.next();!b.done;b=a.next())b=b.value,$("#leaderboardName").addEventListener(b,function(k){clearTimeout(e);var l=2E3;k instanceof KeyboardEvent&&("Enter"==k.key||"Return"==k.key)&&(l=0);e=setTimeout(f,l)});b=$$('input[type="radio"][name="sortRadio"]');a=Store.getLeaderboardSort();b=$jscomp.makeIterator(b);var g=b.next();for(c={};!g.done;c={radio:void 0},g=b.next())g=g.value,c.radio=g,c.radio.value==
a&&(c.radio.checked=!0),g.addEventListener("change",function(k){return function(l){k.radio.checked&&(Store.setLeaderboardSort(k.radio.value),d._showPage())}}(c));$("#favoritesToggle").addEventListener("change",function(){var k=$("#favoritesToggle").checked;$("#leaderboards table").classList.toggle("favorites",k);d._scrollYourRowIntoView();ButtonClickEvent.log(k?"favoritesOn":"favoritesOff")});$("#leaderboards table").addEventListener("click",function(k){var l,m,q,r,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress){if(!k.target)return p.return();l=k.target;if(("use"==l.tagName||"svg"==l.tagName)&&!Store.isPremium())return gPopups.show($("#premiumSignup")),p.return();for(;l&&"TR"!=l.tagName;)l=l.parentElement;if(!l||"TR"!=l.tagName)return p.return();m=l.querySelector(".star");if(!m)return p.return();q=m.textContent==filledStar;r=parseInt(m.dataset.userId,10);if(r==GlobalStore.getUserId())return p.return();if(!q)return ButtonClickEvent.log("favoritesAdd"),GlobalStore.addFavorite(r),GlobalStore.getEmail()&&
api.addFavorite(parseInt(r,10)),m.textContent=filledStar,l.classList.add("favorite"),p.jumpTo(0);n=Array.from(l.querySelector("td:nth-of-type(3) span").childNodes).find(function(t){return t.nodeType==Node.TEXT_NODE}).textContent;return p.yield(Util.confirm('Do you want to remove "'+n+'" from favorites?',"Remove","Cancel"),3)}if(!p.yieldResult)return ButtonClickEvent.log("favoritesRemoveCancel"),p.return();ButtonClickEvent.log("favoritesRemoveOk");GlobalStore.removeFavorite(r);GlobalStore.getEmail()&&
api.removeFavorite(parseInt(r,10));m.textContent=emptyStar;l.classList.remove("favorite");p.jumpToEnd()})});$("#compareWithFriendsLink").addEventListener("click",function(k){k.preventDefault();$("#invitedByFriend").hidden=!0;d._showInviteFriends()});a=gRouter.getHashValues();a.has("i")&&(a=parseInt(a.get("i"),10))&&(GlobalStore.addFavorite(a),api.addFavorite(a),api.getUsername(a).then(function(k){k&&($("#inviteFriends .username").textContent=k)}),$("#invitedByFriend").hidden=!1,this._showInviteFriends(),
gRouter.removeHash(),gtagTryCatch("event","opened_invite_link"));a=gRouter.getQueryParam("i");if(null!==a){try{var h=parseInt(atob(a.replaceAll("_","=")),10);h&&(GlobalStore.addFavorite(h),api.addFavorite(h),api.getUsername(h).then(function(k){k&&($("#inviteFriends .username").textContent=k)}),$("#invitedByFriend").hidden=!1,this._showInviteFriends(),gtagTryCatch("event","opened_invite_link"))}catch(k){console.warn(k)}gRouter.removeQueryParamWithoutRefresh("i")}};
Leaderboards.prototype.show=function(a){var b=this;GlobalStore.setHasOpenedLeaderboards();var c=GlobalStore.getName();c&&0<c.length&&($("#leaderboardName").value=c);$("#leaderboardsNameError").hidden=!0;$("#leaderboardsLoading").hidden=!1;$("#leaderboards table").hidden=!0;$("#leaderboards #playerCount").hidden=!0;$("#leaderboards #yourRank").hidden=!0;gPopups.show($("#leaderboards"));a?$('#leaderboards button[aria-controls="yourScoresTab"]').click():$('#leaderboards button[aria-controls="globalScoresTab"]').click();
this._refresh();a=Store.getStats();$("#yourPlayStreak").textContent=a.playStreak;$("#yourPlayStreakFire").hidden=2>a.playStreak;$("#yourSolveStreak").textContent=a.solveStreak;$("#yourSolveStreakFire").hidden=2>a.solveStreak;$("#yourPuzzleCount").textContent=a.numPuzzles;$("#yourPuzzleSolvedCount").textContent=a.numPuzzlesSolved;$("#yourPuzzleAvgScore").textContent=a.avgPct+"%";var d=$("#yourScoresTab");null!=this.state.avgScore&&(d.querySelector(".avgScorePct").textContent=Math.floor(this.state.avgScore/
this.state.maxScore*100).toString());d.querySelector(".yourScore").textContent=this.solution.score.toString();d.querySelector(".yourScorePct").textContent=Math.floor(this.solution.score/this.state.maxScore*100).toString();c=$jscomp.makeIterator(d.querySelectorAll(".maxScore"));for(var e=c.next();!e.done;e=c.next())e.value.textContent=this.state.maxScore;var f="N/A";0<this.solution.words.size&&(f=Math.floor(100*this.solution.words.size/(this.solution.nonWordCount+this.solution.words.size))+"%");$$(".yourAccuracy").forEach(function(k){k.textContent=
f});$$(".maxScore").forEach(function(k){return k.textContent=b.state.maxScore});c=d.querySelector(".graph .columns");d=d.querySelector(".graph .weekdays");for(e=0;7>e;e++){var g=a.last7Days[e];c.children[e].style.height=g.pct+"%";100==g.pct&&(c.children[e].textContent=filledStar);d.children[e].textContent=g.weekday;var h="var(--form-background-color)";70<=g.pct?h="#43a047":50<=g.pct?h="var(--secondary)":25<=g.pct&&(h="var(--primary)");c.children[e].style.backgroundColor=h}$$("#yourScoresTab table span.maybeToday").forEach(function(k){return k.textContent=
gPuzzleManager.isTodayPuzzle?"today's":"current"})};
Leaderboards.prototype._refresh=function(){var a=this,b=Array.from(GlobalStore.getFavorites()),c=GlobalStore.getUserId();c&&b.push(c);api.getLeaderboardScores(this.puzzle.id,b).then(function(d){var e=d.scores;$("#leaderboardsFetchError").hidden=!0;$("#leaderboardsFetchMaintenanceMode").hidden=!0;a._leaderboardScores=e;"number"==typeof d.numPlayers&&"number"==typeof d.numPlayers&&($("#leaderboards #playerCount").hidden=!1,$("#leaderboards #playerCount").textContent=d.numPlayers.toLocaleString()+" players, "+
(d.numCompleted.toLocaleString()+" finished"));Leaderboards.setPercentiles(d.percentiles);a._showPage()},function(d){$("#leaderboardsFetchError").hidden=!1;d instanceof OverloadedServerError&&($("#leaderboardsFetchMaintenanceMode").hidden=!1)})};
Leaderboards.prototype._showPage=function(){var a=this,b=this._leaderboardScores;assert(b);var c=$("#leaderboards table"),d=c.querySelector("tbody");d.innerHTML="";var e=GlobalStore.getName(),f=GlobalStore.getFavorites(),g=GlobalStore.getUserId(),h=/(n[i1]gg)|(d[i1]ck)|(fuc?k)|(fck)|([s5]h[i1]t)/i,k=function(q,r,n){var p=q.name;h.test(p)&&p!=e&&(p="********");p!=e&&!n&&a.puzzle.hasSimilarWord(p)&&(p="<spoiler>");p=Util.encodeEntities(p);var t="<tr"+(q.userId==g?' class="favorite yourScore"':n?' class="favorite"':
"")+">",u="";n?(u="favorite ",n=filledStar):n=emptyStar;t+='<td class="'+u+' star" tabindex="0" data-user-id="'+q.userId.toString()+('">'+n+"</td>");null!=r&&500<=r&&(r=null);t=t+("<td>"+(null!=r?r+1+".":"---.")+'</td><td class="')+(("Anonymous"==p?"anonymous":"")+'"><span>'+((q.isPremium?'<svg><title>Squaredle Squared</title><use href="#icon-premium"></svg>':"")+p+"</td>"));t+="<td>"+(q.score+" / "+q.wordCount+" / "+q.optionalWordCount)+"</td>";return t+"</tr>"},l=[];b=$jscomp.makeIterator(b);for(var m=
b.next();!m.done;m=b.next())m=m.value,l.push([m,f.has(m.userId)]);l.sort(function(q,r){q=q[0];r=r[0];if(q.score!=r.score)return r.score-q.score;if(q.wordCount!=r.wordCount)return r.wordCount-q.wordCount;switch(Store.getLeaderboardSort()){case "accuracy":if(q.nonWordCount!=r.nonWordCount)return q.nonWordCount-r.nonWordCount;break;case "speed":if(null==q.ms||0>q.ms)return 1;if(null==r.ms||0>r.ms)return-1;if(q.ms!=r.ms)return q.ms-r.ms;break;default:if(r.optionalWordCount!=q.optionalWordCount)return r.optionalWordCount-
q.optionalWordCount}return q.lastUpdatedWord<r.lastUpdatedWord?-1:q.lastUpdatedWord>r.lastUpdatedWord?1:0});f=[];for(b=0;b<l.length;b++)(500>b||l[b][1]||l[b][0].userId==g)&&f.push(k(l[b][0],b,l[b][1]));d.innerHTML=f.join("");$("#leaderboardsLoading").hidden=!0;c.hidden=!1;c=Store.getLeaderboardSort();d=Leaderboards.getPctileBy(this.solution,c);null!=d?(0==d?$("#pctRank").textContent="a top player":.01>d?$("#pctRank").textContent="in the top "+(100*d).toFixed(2)+"%":$("#pctRank").textContent="in the top "+
Math.round(100*d)+"%",$("#pctRankBy").textContent=c,$("#pctRankSuffix").textContent=.2>d?"!":".",$("#yourRank").hidden=!1):$("#yourRank").hidden=!0;this._scrollYourRowIntoView()};
Leaderboards.prototype._scrollYourRowIntoView=function(){var a=$("#leaderboards table"),b=a.querySelector("tbody");if(b=Array.from(b.children).find(function(d){return d.classList.contains("yourScore")})){var c=a.querySelector("thead").offsetHeight;a.parentElement.scrollTop=b.offsetTop-(a.parentElement.offsetHeight-c)/3-c/2}else a.parentElement.scrollTop=0};
Leaderboards.prototype._showInviteFriends=function(){gPopups.show($("#inviteFriends"));var a=GlobalStore.getUserId();(a?Promise.resolve(a):api.getUserId()).then(function(b){$("#inviteFriendsWithUserId").hidden=!b;if(b){var c="squaredle.app/?i="+btoa(Util.leftPad(b," ",7)).replaceAll("=","_");$("#inviteLink").textContent=c;$("#inviteLink").addEventListener("click",function(){CopyToClipboard.copy("https://"+c).then(function(){$("#inviteLinkCopied").hidden=!1})})}})};
Leaderboards.setPercentiles=function(a){Leaderboards.percentiles=a};
Leaderboards.getPctileBy=function(a,b){if(!Leaderboards.percentiles||!a.isSolved())return null;if("bonus words"==b){b=$jscomp.makeIterator(Leaderboards.percentiles.byBonusWords);for(var c=b.next();!c.done;c=b.next())if(c=c.value,a.obscureWords.size>=c.obscure_count)return c.pct}else if("accuracy"==b)for(b=$jscomp.makeIterator(Leaderboards.percentiles.byAccuracy),c=b.next();!c.done;c=b.next()){if(c=c.value,a.nonWordCount<=c.non_word_count)return c.pct}else if("speed"==b)for(b=$jscomp.makeIterator(Leaderboards.percentiles.bySpeed),
c=b.next();!c.done;c=b.next()){if(c=c.value,a.ms&&a.ms<=c.ms)return c.pct}else assertNotReached("Invalid leaderboard sort");return null};var Premium=function(){var a=this;this.signupSubType=null;this.inTrial=!1;gPopups.addListener(this);this._addedPaypalScript=!1;this._submittedFormTime=null;this._hadSubscription=!1;this.offerDiscount=this.isDiscountPeriod="2025/01/10">=gTodayDateStr;this._setUpSignupPage=!1;onReady(function(){return gTryDebug(function(){[$("#subscribeMonthly"),$("#subscribeAnnually"),$("#subscribeMonthly2"),$("#subscribeAnnually2")].forEach(function(h){h.addEventListener("click",function(k){switch(h.id){case "subscribeMonthly":case "subscribeMonthly2":a.signupSubType=
Premium.SubscriptionType.kMonthly;break;case "subscribeAnnually":case "subscribeAnnually2":a.signupSubType=Premium.SubscriptionType.kAnnually;break;default:assertNotReached()}$("#signup-intro").hidden=!0;gUserManager.isSignedIn()?a._showPaymentLink():(k.preventDefault(),$("#signup-register").hidden=!1);$("#premiumSignup .content").scrollTop=0})});$("#signup-payNow-backBtn").addEventListener("click",function(h){h.preventDefault();$("#signup-intro").hidden=!1;$("#signup-payNow").hidden=!0;$("#premiumSignup .content").scrollTop=
0});var b=$("#subscriptionDisable button"),c=$("#subscriptionReenable button"),d=$("#subscriptionAutoRenewError");b.addEventListener("click",function(){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return d.hidden=!0,k.yield(Util.confirm("<p>Disable auto-renew?</p>\n          <p><em>At the end of your "+(a.inTrial?"free trial":"billing cycle")+", your subscription will\n          cancel automatically and you won't be charged"+(a.inTrial?"":" again")+".</em></p>",
a.inTrial?"Cancel trial":"Disable auto-renew","Never mind"),2);h=k.yieldResult;if(!h)return k.return();b.disabled=!0;b.textContent="Disabling auto-renew...";api.disableAutoRenew().then(function(l){l?($("#subscriptionDisable").hidden=!0,$("#subscriptionReenable").hidden=!1):alert("Unable to find subscription. It has likely already been canceled.");a._reloadSubscriptionDetails()},function(l){d.textContent="\n            Unexpected error disabling auto-renew. Please check your network and\n            try again. If you still have trouble, please contact us at\n            support@squaredle.com and we'll make sure you aren't charged again.";
d.hidden=!1}).finally(function(){b.disabled=!1;b.textContent=a.inTrial?"Cancel trial":"Disable auto-renew"});k.jumpToEnd()})});c.addEventListener("click",function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){d.hidden=!0;c.disabled=!0;c.textContent="Enabling auto-renew...";api.enableAutoRenew().then(function(k){k?($("#subscriptionReenable").hidden=!0,$("#subscriptionDisable").hidden=!1):alert("Unable to find subscription. It has likely already been canceled.");a._reloadSubscriptionDetails()},
function(){d.textContent="\n            Unexpected error enabling auto-renew. Please check your network and\n            try again. If this is a server error, it will appear in our logs and\n            we'll look into it.";d.hidden=!1}).finally(function(){c.disabled=!1;c.textContent=a.inTrial?"Re-enable subscription":"Enable auto-renew"});h.jumpToEnd()})});var e=$("#signup-payNow").querySelector("form"),f=$("#subscriptionDetailsForm").querySelector("form"),g=$("#subscriptionDetailsForm2").querySelector("form");
api.isAlpha?(e.setAttribute("action","/api/alpha/stripe_checkout.php"),f.setAttribute("action","/api/alpha/manage_billing.php"),g.setAttribute("action","/api/alpha/manage_billing.php")):api.isBeta&&(e.setAttribute("action","/api/beta/stripe_checkout.php"),f.setAttribute("action","/api/beta/manage_billing.php"),g.setAttribute("action","/api/beta/manage_billing.php"));e.querySelector('input[name="offerDiscount"]').value=a.offerDiscount;e=gRouter.getHashValues();e.has("stripeSuccess")?a._showSuccess(!1):
e.has("stripeCancel")?(gPopups.show($("#premiumSignup")),gRouter.removeHash()):e.has("paypalSuccess")&&a._showSuccess(!0);$("#signup-payNow form").addEventListener("submit",function(){a._submittedFormTime=new Date;gtagTryCatch("event","premiumCheckout");$$('#signup-payNow button[type="submit"]').forEach(function(h){return h.setAttribute("disabled","")});setTimeout(function(){$("#signup-payNow").hidden=!0;$("#signup-waiting").hidden=!1;$("#premiumSignup .content").scrollTop=0;$$('#signup-payNow button[type="submit"]').forEach(function(h){return h.removeAttribute("disabled")})},
2E3)});f.addEventListener("submit",function(){a._submittedFormTime=new Date;gtagTryCatch("event","premiumManage");f.querySelector('button[type="submit"]').setAttribute("disabled","");setTimeout(function(){f.querySelector('button[type="submit"]').removeAttribute("disabled")},2E3)});g.addEventListener("submit",function(){a._submittedFormTime=new Date;gtagTryCatch("event","premiumManage");g.querySelector('button[type="submit"]').setAttribute("disabled","");setTimeout(function(){g.querySelector('button[type="submit"]').removeAttribute("disabled")},
2E3)});window.addEventListener("beforeunload",function(h){a._submittedFormTime&&1E3>(new Date).getTime()-a._submittedFormTime.getTime()&&($("#loadingScrim").hidden=!1)});$("#signup-waiting-backBtn").addEventListener("click",function(h){h.preventDefault();$("#signup-payNow").hidden=!1;$("#signup-waiting").hidden=!0;$("#premiumSignup .content").scrollTop=0});$("#premiumSignupReload").addEventListener("click",function(h){h.preventDefault();api.reload("premiumSignup")});$("#subscriptionExpiredReload").addEventListener("click",
function(h){h.preventDefault();gRouter.setHash("premiumSignup");api.reload("subscriptionExpired")});if(window.ApplePaySession)try{ApplePaySession.canMakePayments()&&($("#appleGooglePay button span").textContent="Apple Pay",$("#appleGooglePay").hidden=!1)}catch(h){}else navigator.userAgent.includes("Android")&&($("#appleGooglePay button span").textContent="Google Pay",$("#appleGooglePay").hidden=!1);$("#enterGiftCode").addEventListener("click",function(){var h=!!GlobalStore.getEmail();$("#giftCodeRegister").hidden=
h;$("#giftCodeForm").hidden=!h;gPopups.show($("#giftCode"))});$("#giftCodeForm").addEventListener("submit",function(h){h.preventDefault();$("#giftCode .error").textContent="";h=$("#giftCodeText").value;0!=h.length&&($("#submitGiftCode").disabled=!0,api.redeemGiftCode(h).then(function(k){$("#giftCodeSuccess").hidden=!k.data.valid;($("#giftCodeBeta").hidden=k.data.valid)?($("#giftCodeDuration").textContent=k.data.duration,$("#giftCodeText").value=""):k.data.paidPremium?$("#giftCode .error").textContent=
"You already have a paid membership. You can apply this gift code once your paid membership ends.":k.data.infiniteGift?$("#giftCode .error").textContent="You already have a lifetime gift membership.":$("#giftCode .error").textContent="Invalid or already-redeemed gift code."},function(k){$("#giftCode .error").textContent="Network or server error. Please try again."}).finally(function(){$("#submitGiftCode").disabled=!1}))});$$(".offerAvailable").forEach(function(h){return h.hidden=!a.offerDiscount});
$$(".offerNotAvailable").forEach(function(h){return h.hidden=a.offerDiscount});a.isDiscountPeriod&&($$(".giftSubLink").forEach(function(h){return h.setAttribute("href",h.getAttribute("href")+"?prefilled_promo_code=Holiday2024")}),$$(".giftSubSale").forEach(function(h){return h.hidden=!1}))})})};Premium.prototype.manageBillingDetails=function(){gPopups.show($("#settings"))};Premium.prototype.afterSignIn=function(){gPopups.show($("#premiumSignup"))};
Premium.prototype.onPopupShow=function(a){if("premiumSignup"==a&&($("#alreadyPremiumSignIn").hidden=gUserManager.isSignedIn(),!this._setUpSignupPage&&(this._setUpSignupPage=!0,this._setUpPaypal(),this.offerDiscount))){$("#saleInfo").hidden=!1;a=$$("#signup-intro .premiumSubscriptions .offer");for(var b=0;b<a.length;b++)a[b].hidden=!1,a[b].classList.contains("price")?a[b].style.fontWeight="bold":a[b].classList.contains("duration")&&(a[b].style.fontSize="75%");$$("#signup-intro .premiumSubscriptions button .disclaimer").forEach(function(c){return c.style.top=
"8em"});requestAnimationFrame(function(){new Crossout({color:"#fff",rounded:!0,thickness:1,reverseDirection:!0})});$$("#signup-payNow .withoutOffer").forEach(function(c){return c.hidden=!0});$$("#signup-payNow .withOffer").forEach(function(c){return c.hidden=!1})}};Premium.prototype.onPopupClose=function(a){"premiumSignup"==a&&($("#signup-intro").hidden=!1,$("#signup-register").hidden=!0,$("#signup-payNow").hidden=!0,$("#premiumSignup .content").scrollTop=0)};
Premium.prototype.setSubscription=function(a,b){a&&(this._hadSubscription=!0);$("#loadingSubscription").hidden=!0;$("#subscriptionDetails").hidden=!a;$("#subscriptionDetailsForm").hidden=!a;$("#subscriptionExpired").hidden=!this._hadSubscription||!!a;$("#subscriptionPaymentFailed").hidden=!a||!a.failedAttempts;if(a){this.inTrial=a.inTrial;$("#subscriptionGift").hidden="gift"!=a.platform;$("#subscriptionPeriodEnd").hidden=!a.periodEnd;if(a.periodEnd){$("#subscriptionRenewText").hidden="auto_renew"!=
a.renewal;$("#subscriptionExpireText").hidden="auto_renew"==a.renewal;b="";a.inTrial?($("#subscriptionRenewOrBegin").textContent="begin",b="trial"):"monthly"==a.plan?b="monthly":"annually"==a.plan&&(b="annual");b+=" subscription";$("#subscriptionOrTrial").textContent=b;"monthly"==a.plan?$("#subscriptionPeriod").textContent="monthly":"annually"==a.plan&&($("#subscriptionPeriod").textContent="annual");$("#subscriptionTrialEnds").hidden=!a.inTrial||"auto_renew"!=a.renewal;b=new Date(1E3*a.periodEnd);
var c="";try{c=(new Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"long",day:"numeric"})).format(b)}catch(d){c=b.toLocaleDateString()}$("#subscriptionEndDate").textContent=c}$("#subscriptionReenable").hidden=!a.periodEnd||"suspended"!=a.renewal||"gift"==a.platform||"kofi"==a.platform;$("#subscriptionDisable").hidden=!a.periodEnd||"auto_renew"!=a.renewal||"kofi"==a.platform;a.inTrial&&($("#subscriptionReenable button").textContent="Re-enable subscription",$("#subscriptionDisable button").textContent=
"Cancel trial");$("#subscriptionDetailsForm").hidden="gift"==a.platform;"kofi"==a.platform&&$("#subscriptionDetailsForm form").addEventListener("submit",function(d){d.preventDefault();window.open("https://ko-fi.com/account")});(gRouter.getHashValues().has("billing")||gRouter.getHashValues().has("manageBilling"))&&$("#subscriptionDetailsForm").scrollIntoView({behavior:"smooth"});"gift"!=a.platform&&gRouter.getHashValues().has("manageBilling")&&(gRouter.removeHash(),$("#subscriptionDetailsForm form").submit())}else Store.isPremium()&&
(api.uploadDebugData({issue:"Has premium locally but no subscription given by "+b}),$("#noSubscriptionFound .email").textContent="support@squaredle.com",$("#noSubscriptionFound").hidden=!1)};
Premium.prototype._showPaymentLink=function(){$("#signup-payNow").hidden=!1;$("#monthlySummary").hidden=this.signupSubType!=Premium.SubscriptionType.kMonthly;$("#annuallySummary").hidden=this.signupSubType!=Premium.SubscriptionType.kAnnually;$("#paypalButtonContainer-monthly").hidden=this.signupSubType!=Premium.SubscriptionType.kMonthly;$("#paypalButtonContainer-annually").hidden=this.signupSubType!=Premium.SubscriptionType.kAnnually;$('[name="subType"]').value=this.signupSubType};
Premium.prototype._showSuccess=function(a){gtagTryCatch("event","premiumSuccess");gtagTryCatch("event","conversion",{send_to:"AW-10976814591/FJ_MCIiozNsDEP_Lk_Io"});gPopups.show($("#premiumSuccess"));GlobalStore.getEmail()?(Store.setInteger("premiumSignupTime",(new Date).getTime()),Store.setString("premiumSignupPlatform",a?"PayPal":"Stripe"),$("#premiumProcessing").hidden=!1,$$(".premiumSuccess-refresh").forEach(function(b){return b.addEventListener("click",function(c){c.preventDefault();api.reload("premiumSuccess-refresh")})}),
gUserManager.requestSyncPromise.then(function(){Store.isPremium()&&($("#premiumProcessing").hidden=!0,$("#premiumTrySettings").hidden=!1,$("#premiumSuccess-settings").addEventListener("click",function(b){b.preventDefault();gPopups.close();gRouter.removeHash();gPopups.show($("#settings"))}),$("#premiumSuccess-archives").addEventListener("click",function(b){b.preventDefault();gPopups.close();gRouter.removeHash();gArchive.show()}),gAds.onPremium())})):($("#premiumBrowser").hidden=!1,$("#premiumSuccess-signIn").addEventListener("click",
function(b){b.preventDefault();gPopups.close();gRouter.removeHash();gPopups.show($("#signIn"))}))};
Premium.prototype._setUpPaypal=function(){var a=this,b=document.createElement("script"),c=location.hostname.endsWith(".test");b.src="https://www.paypal.com/sdk/js?client-id="+(c?"AeCF11FJ3KjTWEPRE-P3I-Pf4Fm67VD8hfrNVFqV-VoV1HpSjzBDvMSuLXV9zu90CsS2jrA24IW9QyBZ":"Ad-feSbWSwq2k4oujVTJYEdVdj6vYavAQTnKKJfRENphobn3FDtHfDqROGz5v5MVaa7g0uY0wqYe6nqg")+"&vault=true&intent=subscription&disable-funding=card,credit";b.addEventListener("load",function(d){d=Store.getBoolean("didTrial");var e=c?d?"P-9XH586674C012950SMK3B5EY":
"P-0YT16605XK532714EMKCZQ7Q":d?a.offerDiscount?"P-9U442293V7936840YMS4FVYI":"P-5AA94480S90149648MMKMOYI":a.offerDiscount?"P-17V431420H8452020MOJXEGA":"P-3ER18192JW656813FMMKMNBQ";paypal.Buttons({style:{layout:"vertical",color:"blue",shape:"rect",label:"subscribe",tagline:!1},createSubscription:function(g,h){"pwa"==gRouter.getQueryParam("source")&&gPopups.close();gtagTryCatch("event","premiumCheckout");return h.subscription.create({plan_id:e,custom_id:GlobalStore.getUserId().toString()})},onApprove:function(g,
h){a._onPaypalSubscribe(g.subscriptionID,e)}}).render("#paypalButtonContainer-annually");var f=c?d?"P-1HC11681D4766183EMK3B5LA":"P-26H07949PW915753JMKCZQVY":d?a.offerDiscount?"P-1LE72098K13959426MS4FWZI":"P-9BC03193C4587160LMMKMOOI":a.offerDiscount?"P-4T6011241K7603121MOJXE7A":"P-9Y3295753S559732GMMKMMMY";paypal.Buttons({style:{layout:"vertical",color:"blue",shape:"rect",label:"subscribe",tagline:!1},createSubscription:function(g,h){"pwa"==gRouter.getQueryParam("source")&&gPopups.close();gtagTryCatch("event",
"premiumCheckout");return h.subscription.create({plan_id:f,custom_id:GlobalStore.getUserId().toString()})},onApprove:function(g,h){a._onPaypalSubscribe(g.subscriptionID,f)}}).render("#paypalButtonContainer-monthly")});document.head.appendChild(b)};Premium.prototype._onPaypalSubscribe=function(a,b){api.onPaypalSubscribe(a,b).then(function(){$("#premiumProcessing").hidden=!0;$("#premiumProcessed").hidden=!1});gRouter.setHash("paypalSuccess");this._showSuccess(!0)};
Premium.prototype._reloadSubscriptionDetails=function(){var a=this;$("#loadingSubscription").hidden=!1;$("#subscriptionDetails").hidden=!0;api.getSubscription().then(function(b){return onReady(function(){return a.setSubscription(b,"reloadSubscriptionDetails")})})};Premium.SubscriptionType={kMonthly:"monthly",kAnnually:"annually"};var gPremium=new Premium;var User=function(a,b,c){this.email=a;this.displayName=b;this.id=c},UserManager=function(){var a=this;GlobalStore.getEmail()&&(this.requestSyncPromise=this.requestSync());onReady(function(){return gTryDebug(function(){GlobalStore.getEmail()&&a._setUserRegistered();$("#safariWarning").hidden=!/^((?!chrome|android).)*safari/i.test(navigator.userAgent);$$(".registerBtn").forEach(function(b){return b.addEventListener("click",function(c){c.preventDefault();null==GlobalStore.getEmail()?gPopups.show($("#register")):
gPopups.show($("#signedIn"))})});$$(".signInBtn").forEach(function(b){return b.addEventListener("click",function(c){c.preventDefault();gPopups.show($("#signIn"))})});$("#registerSubmit").addEventListener("click",function(b){return a._onRegisterSubmit(b)});$("#signInSubmit").addEventListener("click",function(b){return a._onSignInSubmit(b)});$("#requestPasswordReset").addEventListener("click",function(b){return a._onRequestPasswordReset(b)});$("#resetPasswordSubmit").addEventListener("click",function(b){return a._onResetPasswordSubmit(b)})})});
$("#signOutBtn").addEventListener("click",function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(Util.confirm('<p><strong>Sign out?</strong></p>\n        <p>This will <strong class="primary">clear all local data</strong>,\n        including anything that might not have successfully synced.</p>',"Sign out","Cancel"),2);if(4!=c.nextAddress)return c.yieldResult?c.yield(Util.confirm("<p><strong>Are you sure?</strong></p>\n          <p>Signing out will erase all local data, including your solutions.\n          Most of this should be synced but we can't guarantee it, especially on\n          restricted networks.</p>\n          <p>This cannot be undone.</p>",
"Wipe data","Cancel"),4):c.jumpTo(0);c.yieldResult&&(localStorage.clear(),Util.deleteCookie("sq-uuid"),api.reload("signOut"));c.jumpToEnd()})})};UserManager.prototype.isSignedIn=function(){return!!GlobalStore.getEmail()};UserManager.prototype.requestSync=function(){var a=this;return api.requestSync(gPuzzleManager.puzzleKey).then(function(b){b.data&&b.data.newState&&(a._applySyncChanges(b.data.newState)&&0==Store.getReloadCount()?(Store.setReloadCount(1),api.reload("after sync")):Store.setReloadCount(0))})};
UserManager.prototype.showResetPassword=function(){var a=gRouter.getHashValues().get("email");a?$("#resetPasswordEmail").textContent=a:$("#resetPasswordEmailLine").hidden=!0;gPopups.show($("#resetPassword"))};
UserManager.prototype._onRegisterSubmit=function(a){var b=this;a.preventDefault();a=$("#registerStatus");var c=$("#registerPassword").value,d=!1;8>c.length?a.textContent="Password should be 8+ characters.":255<c.length?a.textContent="Password is too long.":c!=$("#registerConfirmPassword").value?a.textContent="Passwords do not match.":d=!0;d?(a.hidden=!0,Util.submitEmail($("#registerEmail"),$("#registerSubmit"),a,$("#registerSuccess"),"Registering...",function(e){var f=!1,g=document.querySelector("#emailSignUpToggle");
g&&g.checked&&(f=!0);return api.register(e,c,GlobalStore.getFavorites(),f,Settings.getGlobalSettings(),AchievementsModel.getGlobalAchievements()).then(function(h){if("duplicateEmail"==h.data.error)throw $("#registerSignInInstead").hidden=!1,gtagTryCatch("event","register_failure",{error:"duplicateEmail"}),"Email already in use";if("alreadyRegistered"==h.data.error)throw $("#registerSignInInstead").hidden=!1,gtagTryCatch("event","register_failure",{error:"alreadyRegistered"}),"You previous signed in on this device.";
if("invalidEmail"==h.data.error)throw $("#registerSignInInstead").hidden=!1,gtagTryCatch("event","register_failure",{error:"invalidEmail"}),"Check that your email address is correctly formatted.";if(h.data.error)throw gtagTryCatch("event","register_failure",{error:"unknown"}),"Unknown error.";assert(h.data.email);GlobalStore.setEmail(h.data.email);$("#registerForm").remove();b._setUserRegistered();gtagTryCatch("event","register");gtagTryCatch("set",{registered:!0})})}).then(function(e){},function(e){})):
(a.classList.add("error"),a.hidden=!1)};
UserManager.prototype._onSignInSubmit=function(a){var b=this;a.preventDefault();$("#requestPasswordResetSuccess").hidden=!0;a=$("#signInStatus");var c=$("#signInPassword").value,d=!1;8>c.length?a.textContent="Password must be 8+ characters.":255<c.length?a.textContent="Password is too long.":d=!0;d?(a.hidden=!0,Util.submitEmail($("#signInEmail"),$("#signInSubmit"),a,$("#signInSuccess"),"Signing in...",function(e){return api.signIn(e,c,GlobalStore.getFavorites(),AchievementsModel.getGlobalAchievements()).then(function(f){if("incorrectCredentials"==
f.data.error)throw gtagTryCatch("event","signIn_failure",{error:"incorrectCredentials"}),"Incorrect email or password.";if(f.data.error)throw gtagTryCatch("event","signIn_failure",{error:"unknown"}),"Unknown error.";gTryDebug(function(){GlobalStore.setEmail(e);GlobalStore.setUuid(f.data.uuid);var g=b._applySyncChanges(f.data);Store.needsTutorial()&&(Store.setDidTutorial(),g=!0);$("#signInForm").remove();b._setUserRegistered();gtagTryCatch("event","sign_in");gtagTryCatch("set",{registered:!0});$("#signInReload").hidden=
!g;($("#signInFinished").hidden=g)&&setTimeout(function(){return api.reload("afterSignIn")},1E3);$("#signInForgotPassword").hidden=!0})})}).then(function(e){},function(e){})):(a.classList.add("error"),a.hidden=!1)};
UserManager.prototype._onRequestPasswordReset=function(a){a.preventDefault();Util.submitEmail($("#signInEmail"),$("#signInSubmit"),$("#signInStatus"),$("#requestPasswordResetSuccess"),"Requesting password reset...",function(b){$("#signInPassword").value="";$("#signInForgotPassword").hidden=!0;return api.requestPasswordReset(b)}).then(function(b){},function(b){})};
UserManager.prototype._onResetPasswordSubmit=function(a){a.preventDefault();$("#resetPasswordFailure").hidden=!0;$("#resetPasswordSuccess").hidden=!0;var b=$("#resetPasswordStatus");b.hidden=!1;b.classList.remove("error");a=$("#resetPasswordPassword").value;var c=!1;8>a.length?b.textContent="Password should be 8+ characters.":255<a.length?b.textContent="Password is too long.":a!=$("#resetPasswordConfirmPassword").value?b.textContent="Passwords do not match.":c=!0;c?api.resetPassword(gRouter.getResetHash(),
a).then(function(d){b.hidden=!0;d.data&&"expired"==d.data.error?$("#resetPasswordFailure").hidden=!1:($("#resetPasswordForm").hidden=!0,$("#resetPasswordSuccess").hidden=!1,gRouter.removeHash())},function(d){b.classList.add("error");b.textContent="Network or server error. Please try again.";throw d;}):b.classList.add("error")};
UserManager.prototype._setUserRegistered=function(){$("#accountBtn use").setAttribute("href","#icon-account");$("#accountBtn").dataset.button="header-account";$("#drawerSignIn").hidden=!0;$$(".registerSuggestion").forEach(function(a){return a.hidden=!0});$$(".signedInStatus").forEach(function(a){return a.hidden=!1});$$(".signedInEmail").forEach(function(a){return a.textContent=GlobalStore.getEmail()});$$('[name="uuid"]').forEach(function(a){a.value=GlobalStore.getUuid()});$("#feedbackEmail").hidden=
!0;$("#feedbackEmail").removeAttribute("required");gPremium.signupSubType&&gPremium.afterSignIn();gtagReconfig()};
UserManager.prototype._applySyncChanges=function(a){a.username&&GlobalStore.setName(a.username);a.displayEmail&&(GlobalStore.setEmail(a.displayEmail),$$(".signedInEmail").forEach(function(c){return c.textContent=a.displayEmail}));a.favoriteUserIds&&GlobalStore.setFavorites(a.favoriteUserIds);var b=!1;gBeta.useBetaPuzzle||(a.today&&Store.getSolutionForKey(gPuzzleManager.getPuzzle(a.today.puzzleDate),a.today.puzzleDate).mergeWithApiSolution(a.today)&&DateUtil.getTodayStr()==a.today.puzzleDate&&(b=!0),
a.todayXp&&Store.getSolutionForKey(gPuzzleManager.getPuzzle(a.todayXp.puzzleDate),a.todayXp.puzzleDate).mergeWithApiSolution(a.todayXp)&&a.todayXp.puzzleDate.startsWith(DateUtil.getTodayStr())&&"xp"==gPuzzleManager.level&&(b=!0),a.yesterday&&Store.getSolutionForKey(gPuzzleManager.getPuzzle(a.yesterday.puzzleDate),a.yesterday.puzzleDate).mergeWithApiSolution(a.yesterday)&&DateUtil.getTodayStr()==a.yesterday.puzzleDate&&(b=!0),a.yesterdayXp&&Store.getSolutionForKey(gPuzzleManager.getPuzzle(a.yesterdayXp.puzzleDate),
a.yesterdayXp.puzzleDate).mergeWithApiSolution(a.yesterdayXp)&&DateUtil.getTodayStr()==a.yesterdayXp.puzzleDate&&(b=!0));a.settings&&gSettings.applySyncSettings(a.settings);a.achievements&&(gAchievementsMgr?gAchievementsMgr.syncAchievements(a.achievements):gServerAchievements=a.achievements);a.pastStats&&Store.mergePastStats(a.pastStats);gPremium.setSubscription(a.subscription,"applySyncChanges");if(Store.isPremium())gAds.onPremium();return b};var gUserManager=new UserManager;var Share=function(a){this._ui=a;this.puzzle=a.puzzle;this.solution=a.solution;this._hasShared=!1;a.isTutorial||this._setUpSharePopup()};
Share.prototype._getRankText=function(){if(!Leaderboards.percentiles)return"";var a=[["bonus words",Leaderboards.getPctileBy(this.solution,"bonus words")],["accuracy",Leaderboards.getPctileBy(this.solution,"accuracy")],["speed",Leaderboards.getPctileBy(this.solution,"speed")]].sort(function(e,f){return null==e[1]?null==f[1]?0:1:null==f[1]?-1:e[1]-f[1]})[0],b="";if(null==a[1]||.5<=a[1])return"";b=0==a[1]?"Top player":.01>a[1]?"In the top "+(100*a[1]).toFixed(2)+"%":"In the top "+Math.round(100*a[1])+
"%";var c="",d="";switch(a[0]){case "bonus words":c="bonus words";d="\ud83d\udcd6";break;case "accuracy":c="accuracy";d="\ud83c\udfaf";break;case "speed":c="speed";d="\u23f1\ufe0f";break;default:assertNotReached("Unsupported stort")}return"accuracy"==a[0]&&0==this.solution.nonWordCount&&this.solution.words.size==this.puzzle.words.length?"\n"+d+" Perfect accuracy":"\n"+d+" "+b+" by "+c};
Share.prototype._noHintsNoReveals=function(){return this.solution.words.size!=this.puzzle.words.length||0!=this.solution.revealsUsed||this.solution.everEnabledHints?"":"*"};
Share.prototype._updateScoreText=function(){var a=this._noHintsNoReveals()+(this.solution.words.size+"/"+this.puzzle.words.length+" words")+(0<this.solution.obscureWords.size?" (+"+this.solution.obscureWords.size+" bonus "+(1<this.solution.obscureWords.size?"words":"word")+")":""),b=DateUtil.fixDstPuzzleDate(DateUtil.getTodayStr()),c=this._getStreakText(),d=b.slice(5)+(gPuzzleManager.isWeeklyPuzzle?" (Weekly Subscriber Puzzle)":""),e="I played ";"xp"==gPuzzleManager.level?e+="https://squaredle.com/xp "+
d:gPuzzleManager.puzzleKey.startsWith("waffle")?e+="https://squaredle.com/"+gPuzzleManager.puzzleKey:gPuzzleManager.isSpecialPuzzle?e+="https://squaredle.com/?puzzle="+gPuzzleManager.puzzleKey:"2023/10/11"==DateUtil.getTodayStr()?e+="https://squaredle.com/canuckle":(e+="https://squaredle.com ",e=gBeta.useBetaPuzzle?e+"(beta)":e+d);e+=":\n"+a+this._getRankText()+c;b=$("#shareContent");b.innerHTML=e;if(e=document.querySelector("#shareToTwitter")){var f=new URL("https://www.twitter.com/intent/tweet");
f.searchParams.set("original_referrer","https://squaredle.app/");f.searchParams.set("text","#Squaredle "+d+"\n"+a+this._getRankText()+c+"\nsquaredle.app");try{e.setAttribute("href",f.href)}catch(g){api.submitError(Error("Invalid URL in share text: "+f.href)),e.hidden=!0}}if(a=$("#sh4re").querySelector("textarea"))a.remove(),b.hidden=!1};
Share.prototype.renderShare=function(){var a=this;this._updateScoreText();api.getPercentiles(this.puzzle.id).then(function(d){Leaderboards.setPercentiles(d);d&&a._updateScoreText()});var b=Util.setIntervalImmediate(function(){var d=DateUtil.timeToNextBoard();0==d.totalSeconds?($("#nextBoardCountdown").hidden=!0,$("#nextBoardRefresh").hidden=!1):$("#boardTimer").textContent=Util.leftPad(d.hours,"0",2)+":"+(Util.leftPad(d.minutes,"0",2)+":")+Util.leftPad(d.seconds,"0",2)},1E3),c=$("#shareContent");
"undefined"==typeof c.dataset.configured&&(c.dataset.configured="true",gBeta.useBetaPuzzle||c.addEventListener("click",function(){var d=document.createElement("textarea");d.setAttribute("rows",3);d.style.width=c.offsetWidth+"px";d.style.height=c.offsetHeight+"px";d.value=c.textContent;c.parentElement.insertBefore(d,c);c.hidden=!0;d.focus();d.select();d.addEventListener("click",function(){d.select()})}));this.solution.foundBWOTD()?($("#shareForHint").hidden=!0,$("#sharedGetHint").hidden=!0):this.solution.shared&&
($("#sharedGetHint").hidden=!1);($("#sh4reButtons").hidden=gBeta.useBetaPuzzle)?$("#shareNotice").textContent="The preview puzzle should not be shared.":"xp"==gPuzzleManager.level?$("#shareNotice").textContent="Streaks are not yet supported for Squaredle Express.":"2025/03/09"==gTodayDateStr&&2512==this.puzzle.id&&($("#oopsShareNotice").textContent="Yes, this puzzle was released a day early. Congrats, you're a time traveler!");gPopups.show($("#sh4re"));gPopups.addOnCloseHook(function(){clearInterval(b);
$("#copyStatus").textContent=""})};
Share.prototype._setUpSharePopup=function(){var a=this;$("#shareContentCopyBtn").addEventListener("click",function(){gtagTryCatch("event","select_content",{content_type:a.solution.getScoreTier(a._ui.state.maxScore).tierName,level:a.solution.getScoreTier(a._ui.state.maxScore).tierName});a._copyShareText(!0)});navigator.userAgent.includes("Android")&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/")||"function"!=typeof navigator.share||($("#shareContentShareBtn").hidden=
!1,$("#shareContentCopyBtn").hidden=!0,$("#shareContentShareBtn").addEventListener("click",function(){gtagTryCatch("event","share",{content_type:a.solution.getScoreTier(a._ui.state.maxScore).tierName,level:a.solution.getScoreTier(a._ui.state.maxScore).tierName});a._copyShareText(!1);navigator.share({text:$("#shareContent").textContent}).catch(function(d){})}));this.solution.shared||gBeta.useBetaPuzzle||!gPuzzleManager.puzzle.wordOfTheDay||this.solution.foundBWOTD()||($("#shareForHint").hidden=!1,
$$("#sh4reButtons .actualSh4reBtn").forEach(function(d){return d.addEventListener("click",function(){return a._didShare()})}));$$("#sh4reButtons .actualSh4reBtn").forEach(function(d){return d.addEventListener("click",function(){return gAchievementsMgr.onShare()})});gBeta.useBetaPuzzle&&($("#sharedGetHint").hidden=!1);var b=!1;window.fbAsyncInit=function(){b||(b=!0,document.querySelector("#fbButton")&&(FB.init({appId:"3213670032247868",xfbml:!1,version:"v13.0"}),$("#fbButton").hidden=!1,$("#fbButton a").addEventListener("click",
function(d){d.preventDefault();a._copyShareText(!1);d=DateUtil.getTodayStr();if("waffle"==gPuzzleManager.puzzleKey)d="(waffle)";else if("sub50"==gPuzzleManager.puzzleKey)d="(50 Subscribers)";else if("sub500"==gPuzzleManager.puzzleKey)d="(500 Subscribers)";else if("2023/10/11"==d)d="(Canuckle)";else try{d=(new Intl.DateTimeFormat("default",{month:"short",day:"numeric"})).format(new Date(DateUtil.getTodayStr()))}catch(e){}d="Squaredle "+d+": "+(a.solution.words.size+"/"+a.puzzle.words.length+" words");
0<a.solution.obscureWords.size&&(d+=" [+"+a.solution.obscureWords.size+" bonus "+(1<a.solution.obscureWords.size?"words":"word")+"]");a.puzzle.difficulty&&(d+=" (Difficulty: "+a.puzzle.difficulty+"/5)");d+=a._getStreakText();FB.ui({method:"share",href:"https://squaredle.app/"+("waffle"==gPuzzleManager.puzzleKey?"waffle":gPuzzleManager.isSpecialPuzzle?"?puzzle="+gPuzzleManager.puzzleKey:""),quote:d},function(e){});api.incFbShareCount()}),api.getFbShareCount().then(function(d){$("#fbCount").hidden=
!1;var e=d.toString();1E3<=d&&(e=(d/1E3).toFixed(1)+"K");$("#fbCount").textContent=e},function(d){})))};"undefined"!=typeof FB&&"undefined"!=typeof FB.ui&&setTimeout(window.fbAsyncInit);$("#shareDiscordPlug").hidden=!gBeta.isLiterallyBeta;$("#sh4re .regularPuzzle").hidden=!gPuzzleManager.isTodayPuzzle;$("#sh4re .specialPuzzle").hidden=!gPuzzleManager.isSpecialPuzzle;$("#sh4re .notTodayPuzzle").hidden=gPuzzleManager.isTodayPuzzle;$("#sh4re #sharePlayExpress").hidden=!gPuzzleManager.isTodayPuzzle||
"xp"==gPuzzleManager.level;gPuzzleManager.isTodayPuzzle&&(""==gPuzzleManager.level?($("#sharePlayExpress").hidden=!1,$("#sharePlayExpress").addEventListener("click",function(){gPuzzleManager.playLevel("xp")})):($("#sharePlayRegular").hidden=!1,$("#sharePlayRegular").addEventListener("click",function(){gPuzzleManager.playLevel("")})));gPuzzleManager.isSpecialPuzzle&&($("#sub500MakingOf").hidden="sub500"!=gPuzzleManager.puzzleKey);gPuzzleManager.isTodayPuzzle||$("#sharePlayToday").addEventListener("click",
function(){gPuzzleManager.playTodayPuzzle()});"waffle-ingredients"==gPuzzleManager.puzzleKey?($("#shareWaffle").hidden=!1,$("#shareWaffleButton").hidden=!1,$("#shareWaffleButton button").addEventListener("click",function(){window.open("https://wafflegame.net")})):"2023/10/09"<=gPuzzleManager.puzzleKey&&"2023/10/11-xp">=gPuzzleManager.puzzleKey&&!gPuzzleManager.isWeeklyPuzzle?$("#shareCanuckle").hidden=!1:"2024/07/01"==gPuzzleManager.puzzleKey&&($("#shareCanuckle2").hidden=!1);""==gPuzzleManager.level?
$("#shareArchives").addEventListener("click",function(){Store.isPremium()?gArchive.show():gPopups.show($("#premiumSignup"))}):$("#shareArchives").hidden=!0;$("#bwotdHintBtn").addEventListener("click",function(d){a.solution.shared=!0;a.solution.saveAndPostScore();d.preventDefault();var e=Array.from(gPuzzleManager.puzzle.wordOfTheDay.term);for(d=2;d<e.length;d++)(1==d%4||2==d%4||3==d)&&d<e.length-2&&(e[d]="*");6>e.length&&(e[3]="*");setTimeout(function(){return $("#bwotdHint").textContent=e.join("")})});
var c=new Date;c<=new Date(2022,11,28)&&($("#xmas").hidden=!1);c<=new Date(2022,11,26)&&($("#hannukah").hidden=!1);c<=new Date(2023,0,1)&&($("#kwanzaa").hidden=!1);onReady(function(){return setTimeout(function(){return Util.loadScriptAsync("https://connect.facebook.net/en_US/sdk.js")},1E3)})};
Share.prototype._copyShareText=function(a){CopyToClipboard.copy($("#shareContent").textContent).then(function(b){$("#copyStatus").textContent="Copied to clipboard!";$("#copyStatus").classList.remove("error")}).catch(function(b){if(a&&($("#copyStatus").textContent="Long-press selection above to copy.",$("#copyStatus").classList.add("error"),window.getSelection)){b=window.getSelection();var c=document.createRange();c.selectNodeContents($("#shareContent"));b.removeAllRanges();b.addRange(c)}})};
Share.prototype._didShare=function(){var a=this;this._hasShared||(this._hasShared=!0,setTimeout(function(){a.solution.foundBWOTD()||($("#shareForHint").hidden=!0,gPuzzleManager.puzzle.wordOfTheDay&&($("#sharedGetHint").hidden=!1))},3E3))};
Share.prototype._getStreakText=function(){if(!gPuzzleManager.isTodayPuzzle||""!=gPuzzleManager.level)return"";var a=Store.getStats();return this.solution.words.size==this.puzzle.words.length&&0<a.solveStreak?"\n\ud83d\udd25 Solve streak: "+a.solveStreak:0<a.playStreak?"\nPlay streak: "+a.playStreak:""};var Drawer=function(){var a=this;this.el=$("#drawer");this._clickListener=this._onDocumentClick.bind(this);$("#drawerBtn").addEventListener("click",function(){setTimeout(function(){return a.open()})});$$("#drawer > a").forEach(function(b){return b.addEventListener("click",function(c){var d=c.currentTarget.href;d||(d=c.target.href);d&&d.startsWith("#")&&c.preventDefault();a.close()})});$("#drawerClose").addEventListener("click",function(b){a.close()});$("#drawerArchive").addEventListener("click",function(b){gTryDebug(function(){return gArchive.show()})});
$("#drawerSpecial").addEventListener("click",function(b){gSpecialPuzzleManager.show()});$("#drawerToday").addEventListener("click",function(b){gPuzzleManager.playTodayPuzzle()});$("#drawerSale").hidden=!gPremium.offerDiscount;gPremium.offerDiscount&&$("#drawerSale").addEventListener("click",function(){gPopups.show($("#featureMessage"))})};Drawer.prototype.open=function(){this.el.hidden=!1;this.el.scrollTop=0;document.addEventListener("click",this._clickListener)};
Drawer.prototype.close=function(){this.el.hidden=!0;document.removeEventListener("click",this._clickListener)};Drawer.prototype._onDocumentClick=function(a){this.el.contains(a.target)||this.close()};var gDrawer=new Drawer;var filledStar="\u2605",emptyStar="\u2606",startTime=new Date;function isWide(){return window.matchMedia("(min-width: 700px)").matches}
var UI=function(a,b,c,d){function e(n){if(n.isTrusted){var p=n.currentTarget.dataset.button;p||(p=n.currentTarget.getAttribute("aria-controls"));p||(p=n.currentTarget.id);p&&ButtonClickEvent.log(p)}}var f=this;this.puzzle=a;this.solution=c;this.isTutorial=d;var g=new AchievementsMgr;this.state=new GameState(this,a,c,d);this.game=new Game(this,this.state,a,c,d);if(api.isAlpha||location.hostname.endsWith(".test"))window.theGame=this.game;this._wasWide=!1;this.isTutorial||(this._leaderboards=new Leaderboards(this.state,
this.puzzle,this.solution));this._setUpDevOptions();this._setUpExplainer();this._share=new Share(this);this.isTutorial||this._showIntro();this._onResize();this.game.gameUi.resizeBoard();window.addEventListener("resize",function(){return f._onResize()});window.addEventListener("wordOfTheDay",function(n){f._showWordOfTheDay(assertInstanceOf(n,CustomEvent))});window.addEventListener("keydown",function(n){n instanceof KeyboardEvent&&("Esc"!=n.key&&"Escape"!=n.key||document.activeElement.blur())});$("#title").setAttribute("href",
location.pathname);$$(".aboutBtn").forEach(function(n){return n.addEventListener("click",function(p){p.preventDefault();gPopups.show($("#about"));$('button[aria-controls="aboutTab"]').click()})});a=$jscomp.makeIterator(["credits"]);c=a.next();for(d={};!c.done;d={popup$jscomp$2:void 0},c=a.next())d.popup$jscomp$2=c.value,$("#"+d.popup$jscomp$2+"Btn").addEventListener("click",function(n){return function(p){p.preventDefault();gPopups.show($("#"+n.popup$jscomp$2))}}(d));$$(".achievementsBtn").forEach(function(n){return n.addEventListener("click",
function(p){g.show()})});$$(".tabs").forEach(function(n){for(var p=$jscomp.makeIterator(n.querySelectorAll('button[role="tab"]')),t=p.next(),u={};!t.done;u={button$jscomp$1:void 0},t=p.next())u.button$jscomp$1=t.value,u.button$jscomp$1.addEventListener("click",function(y){return function(w){w.preventDefault();w=$jscomp.makeIterator(n.querySelectorAll("button"));for(var v=w.next();!v.done;v=w.next())v=v.value,v.setAttribute("aria-selected",y.button$jscomp$1==v),v.setAttribute("tab-index",y.button$jscomp$1==
v?-1:0);w=$jscomp.makeIterator(n.querySelectorAll('[role="tabpanel"]'));for(v=w.next();!v.done;v=w.next())v=v.value,v.hidden=y.button$jscomp$1.getAttribute("aria-controls")!=v.id,v.scrollTop=0}}(u))});$$(".contributeBtn").forEach(function(n){return n.addEventListener("click",function(p){p.preventDefault();gPopups.show($("#contribute"))})});$$(".sh4reBtn").concat([$("#globalIcon"),$("#globalBox")]).forEach(function(n){return n.addEventListener("click",function(p){p.preventDefault();"progressArea"==
p.currentTarget.id&&ButtonClickEvent.log("progressBar");gTryDebug(function(){return f.renderShare()})})});$$(".leaderboardsBtn").forEach(function(n){return n.addEventListener("click",function(p){p.preventDefault();p.stopPropagation();gTryDebug(function(){return f.showLeaderboards()})})});b&&Store.getSolutionForYesterday(b)?this.game.initWordList(b,assert(Store.getSolutionForYesterday(b))):this.game.initWordList(null,null);$$(".wordListBtn").forEach(function(n){return n.addEventListener("click",function(p){p.preventDefault();
"progressArea"==p.currentTarget.id&&ButtonClickEvent.log("progressBar");gTryDebug(function(){f.game.showWordList();$('.tabs button[aria-controls="wordsTodayTab"]').click()})})});$$(".closePopup").forEach(function(n){return n.addEventListener("click",function(){return gPopups.close(!0)})});Store.isPremium()&&$$(".merchBtn").forEach(function(n){n.href="https://merch.squaredle.app/discount/NJVAJV5TQBTC"});Store.needsTutorial()&&$$(".skipTutorial").forEach(function(n){return n.addEventListener("click",
function(p){return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){if(1==t.nextAddress)return p.preventDefault(),gtagTryCatch("event","tutorial_skip"),t.yield(Util.confirm("<p>Are you sure you want to skip the tutorial?</p><p>You should know:</p><ul>  <li>You can swipe in any direction</li>"+(isWide()?"  <li>On a keyboard, submit with Enter, delete with Backspace, or cancel with Esc</li>":"  <li>Tap the word count to see your words and hints</li>")+"</ul>","Got it, let's play!","Resume tutorial"),
2);if(!t.yieldResult)return gtagTryCatch("event","tutorial_skip_cancel"),t.return();gtagTryCatch("event","tutorial_skip_confirm");Store.setSkippedTutorial();api.reload("skipTutorial");t.jumpToEnd()})})});$$(".refreshBtn").forEach(function(n){return n.addEventListener("click",function(p){p.preventDefault();api.reload("refresh: "+n.className)})});$("#newVersionRefresh").addEventListener("click",function(n){n.preventDefault();api.reload("newVersionRefresh")});$$(".sendFeedbackBtn").forEach(function(n){return n.addEventListener("click",
function(p){p.preventDefault();gPopups.show($("#about"));$('button[aria-controls="feedbackTab"]').click();gAchievementsMgr.setIfIncomplete("feedback",1)})});$("#feedbackTabBtn").addEventListener("click",function(){gAchievementsMgr.setIfIncomplete("feedback",1)});$$(".premiumBtn").forEach(function(n){return n.addEventListener("click",function(p){p.preventDefault();gPopups.show($("#premiumSignup"));$("#premiumSignup .content").scrollTop=0})});$("#aboutXp").addEventListener("click",function(n){n.preventDefault();
gPuzzleManager.playLevel("xp")});$("#aboutBonusWords").addEventListener("click",function(n){n.preventDefault();$("#bonusWordDialog").classList.remove("delayClose");gPopups.show($("#bonusWordDialog"));GlobalStore.setShowedBonusWordDialog()});if(!Store.needsTutorial()){var h=function(){if(gPopups.isPopupOpen())gPopups.addOnCloseHook(function(){return setTimeout(h,2E3)});else{var n=Store.getInteger("dateOfLastBoardCheck");null!=n&&0>(new Date).getTime()-n&&gPopups.show($("#nextBoardAvailable"));Store.setInteger("dateOfLastBoardCheck",
(new Date).getTime())}};DateUtil.getSecondsToNextBoardFromServer().then(function(n){n=Math.max(0,1E3*n);0<n?setTimeout(h,n+1):gPuzzleManager.isTodayPuzzle&&h()})}$("#newBoardRefresh").addEventListener("click",function(n){n.preventDefault();gPuzzleManager.playTodayPuzzle()});$$(".newPuzzleTimeWithPeriod").forEach(function(n){return n.textContent=DateUtil.getNewPuzzleTimeStrWithPeriod()});$$(".hintsAvailableTime").forEach(function(n){return n.textContent=DateUtil.getHintsAvailableTimeStr()});$("#hintsAvailableLater").hidden=
gPuzzleManager.isWeeklyPuzzle||"mitmh"==gPuzzleManager.puzzleKey;Util.setCookie("numDaysPlayed",Store.numDaysPlayed().toString());Util.setCookie("sq-premium",Store.isPremium()?"1":"0");if(!Store.needsTutorial()&&!GlobalStore.hasOpenedLeaderboards()&&Store.hasPlayedDays(2)){var k=function(){if(6>f.solution.words.size)setTimeout(k,1E4);else{var n=$("header .leaderboardsBtn"),p=$("header #leaderboardsBox");n.classList.add("throb");p.hidden=!1;[n,p].forEach(function(t){t.addEventListener("click",function(){p.remove();
n.classList.remove("throb");GlobalStore.setHasOpenedLeaderboards()})})}};setTimeout(k,12E4)}var l=0,m=new Date(0);$("#version").addEventListener("click",function(){5E3<(new Date).getTime()-m.getTime()&&(l=0,m=new Date);l++;5==l&&(l=0,m=new Date(0),$("#scrollX").textContent=window.scrollX,$("#scrollY").textContent=window.scrollY,gPopups.show($("#devOptions")))});$("#devGenDump").addEventListener("click",function(){$("#devDownloadDump").hidden=!0;$("#devDownloadDump").setAttribute("href","data:application/json;charset=utf-8,"+
encodeURIComponent(JSON.stringify(Store.getDebugData())));$("#devDownloadDump").hidden=!1});var q=$("#puzzleDateSelector");q.value=DateUtil.getTodayStr().replaceAll("/","-");var r=-1;q.addEventListener("change",function(){""!=q.value&&(clearTimeout(r),r=setTimeout(function(){var n=q.value,p=new URL(location.href);p.searchParams.set("devDate",n);api.setLocation(p,"puzzleDateSelector")},1E3))});Store.needsTutorial()||gBeta.useBetaPuzzle||Util.setIntervalImmediate(function(){api.getAvgScore(gPuzzleManager.puzzleKey).then(function(n){if(n!=
f.game.state.avgScore){f.game.state.avgScore=n;n=n/f.game.state.maxScore*100;var p=$("#globalBox"),t=$("#globalIcon");t.hidden=!1;$("#globalBox").classList.toggle("arrow-top-left",50>=n);$("#globalBox").classList.toggle("arrow-top-right",50<n);p.classList.contains("fade-out")||!Store.hasPlayedDays(2)||Store.hasPlayedDays(5)||setTimeout(function(){p.hidden=!1;setTimeout(function(){return p.classList.add("fade-out")},2E3);setTimeout(function(){return p.hidden=!0},5E3)},4E3);50>=n?(p.style.left="calc("+
n+"% - 2px",p.style.right="unset"):(p.style.right="calc("+(100-n)+"% - 2px",p.style.left="unset");t.style.left="calc("+n+"% - 0.5em)"}})},9E5);$("#playWeekly").addEventListener("click",function(n){Store.isPremium()||(n.preventDefault(),gPopups.show($("#premiumSignup")))});Array.from(document.querySelectorAll("a")).concat(Array.from(document.querySelectorAll("button"))).concat(Array.from(document.querySelectorAll("input"))).forEach(function(n){n.addEventListener("click",e)});$$('button[aria-label="help"]').forEach(function(n){return n.addEventListener("click",
function(p){p.preventDefault();p=$("#"+n.getAttribute("aria-controls"));p.hidden=!p.hidden})});$$(".iOS").forEach(function(n){return n.hidden=!Util.isIOs});$$(".notIOS").forEach(function(n){return n.hidden=Util.isIOs})};
UI.prototype._onResize=function(){var a=this,b=isWide(),c=$("#wordList");c.classList.toggle("popup",!b);gPopups.isPopupOpen(c)?b&&(gPopups.close(!1),c.hidden=!1):c.hidden=!b;($("#wordList h2").hidden=b)&&!this._wasWide&&onReady(function(){requestAnimationFrame(function(){return gTryDebug(function(){a.game.showWordList();700==window.innerWidth&&a.game.gameUi.resizeBoard()})})});this._wasWide=b};
UI.prototype.showDifficulty=function(){if(!location.href.includes("hideDifficulty")){assert("number"==typeof this.puzzle.difficulty);setTimeout(function(){$("#difficultyAlert").hidden=!0},6E3);$$(".difficultyNote").forEach(function(c){return c.hidden=!1});$("#difficultyAlert").classList.add("fade-out");for(var a=$jscomp.makeIterator($$(".difficultyStars")),b=a.next();!b.done;b=a.next())Util.addStars(b.value,this.puzzle.difficulty)}};UI.prototype.renderShare=function(){this._share.renderShare()};
UI.prototype.showLeaderboards=function(a){this._leaderboards&&this._leaderboards.show(a)};
UI.prototype.maybeShowExplainer=function(a){var b=this,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){c="intro"==a&&gPuzzleManager.isSpecialPuzzle?"intro-"+b.puzzle.id:a;if(Store.isPermaClosed(c))return f.return();d=document.querySelector("#explainer");if(!d)return f.return();d.classList.remove("fadeIn");d.hidden||(d.hidden=!0);d.dataset.explainerId=c;e="";switch(a){case "test":e="\n        <p>Test explainer.</p>\n        <p>Neque porro quisquam est qui dolorem ipsum quia dolor sit amet,\n        consectetur, adipisci velit.</p>";break;
case "intro":e="<p>";b.puzzle.intro.title&&(e+='<span class="emphasize">'+b.puzzle.intro.title+":</span> ");e+=b.puzzle.intro.body+"</p>";break;case "levelUpAdept":e='\n          <p class="emphasize">Start Counts Unlocked</p>\n          <p>\n            Squares now\n            <span class="emphasize primary">COUNT</span> how many words\n            <span class="emphasize primary">START</span> with them (check the\n            bottom-left number).\n          </p>';break;case "levelUpExpert":e=(b.puzzle.special.speller?
'<p class="emphasize">Letter Counts Unlocked</p>\n            <p>\n            Squares also\n            <span class="explainGrey">COUNT</span> how many times they\'re used\n            (check the bottom-right number).':'<p class="emphasize">Word Counts Unlocked</p>\n            <p>\n            Squares also\n            <span class="explainGrey">COUNT</span> how many remaining words\n            they\'re used in (check the bottom-right number).')+"</p>";break;case "levelUpHints":e='\n          <p><span class="emphasize">Hints Unlocked</span></p>\n          <p class="narrow">\n            Close this and tap the <strong>word count</strong> at the top to\n            enable hints.\n          </p>\n          <p class="wide">\n            You can now <strong>enable hints</strong> in the word list.\n          </p>';
break;case "levelUpComplete!":e="\n          <p><span class=\"emphasize\">Complete!</span></p>\n          <p>\n            Congrats! You can still look for bonus words. And don't worry, your\n            leaderboard accuracy and speed ranks have already been recorded and\n            won't be affected anymore.\n          </p>";break;case "timeTravel":e='\n          <p><span class="emphasize">Time travel?!</span></p>\n          <p>\n            The March 9th puzzle was released on March 8th due to a rift in\n            the Squaredle space-time continuum.\n          </p>';
break;default:assertNotReached("Explainer ID "+a+" not found")}e&&(d.querySelector("#explainerPermaClose").hidden="intro"==a&&!gPuzzleManager.isSpecialPuzzle,d.querySelector("#explainerText").innerHTML=e,setTimeout(function(){d.hidden=!1;0==d.offsetHeight&&console.warn("Offset height is 0");d.classList.add("fadeIn")},"levelUpComplete!"==a?2E3:0));f.jumpToEnd()})};
UI.prototype._setUpDevOptions=function(){var a=this;$("#restartTutorial").hidden=this.isTutorial;$("#restartTutorialLink").addEventListener("click",function(b){b.preventDefault();Store.setDidTutorial(!1);api.reload("restartTutorial")});$("#removeTwoWordsBtn").addEventListener("click",function(b){var c,d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return b.preventDefault(),c=Array.from(a.solution.words.keys()).slice(0,2),0==c.length?(alert("No words to remove"),
g.return()):g.yield(Util.confirm('Really remove words: "'+c.join('" and "')+'"?',"OK","Cancel"),2);if(!g.yieldResult)return g.return();d=$jscomp.makeIterator(c);for(e=d.next();!e.done;e=d.next())f=e.value,a.solution.words.delete(f);Store.saveSolutionForCurPuzzle(a.solution);api.devSetSolution(a.solution.devGetApiSolution(gPuzzleManager.puzzleKey)).then(function(){return api.reload("removeTwoWords")});g.jumpToEnd()})});$("#resetSolutionBtn").addEventListener("click",function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==
c.nextAddress)return b.preventDefault(),c.yield(Util.confirm("Really reset today's solution?","OK","Cancel"),2);if(!c.yieldResult)return c.return();api.devDeleteSolutionForDay(gPuzzleManager.puzzleKey).then(function(){Store.deleteSolutionForToday();api.reload("resetSolution")});c.jumpToEnd()})});$("#solveSolutionBtn").addEventListener("click",function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){b.preventDefault();api.devFinishPuzzleForDay(gPuzzleManager.puzzleKey).then(function(){Store.deleteSolutionForToday();
api.reload("solveSolution")});c.jumpToEnd()})});document.querySelector("#showExplainerBtn")&&($("#showExplainerBtn").addEventListener("click",function(b){b.preventDefault();a.maybeShowExplainer("test");gPopups.close()}),$("#resetExplainersBtn").addEventListener("click",function(b){b.preventDefault();Store.resetExplainers();api.reload("resetExplainers")}),$("#resetMessagesBtn").addEventListener("click",function(b){b.preventDefault();Store.resetMessages();api.reload("resetMessages")}));$("#devErrors").addEventListener("click",
function(){$("#devErrors").select()})};UI.prototype._setUpExplainer=function(){var a=document.querySelector("#explainer");a&&($("#explainerClose").addEventListener("click",function(){a.hidden=!0}),$("#explainerPermaClose").addEventListener("click",function(){a.hidden=!0;var b=assert(a.dataset.explainerId);Store.setPermaClosed(b)}))};
UI.prototype._showIntro=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("1k"==gPuzzleManager.puzzleKey)return a.puzzle.intro=null,gPopups.isPopupOpen()||GlobalStore.getBoolean("suppress1kDayInstructions")||Dialog.show("1,000 Days of Squaredle!","\n      <h3><strong>Happy 1,000th Day of Squaredle!</strong></h3>\n      <p>Instead of a Bonus Word of the Day, this special puzzle features the Squaredle Lexicon, a certain vocabulary\n      that devoted players of Squaredle use when talking about the game.</p>\n      <p>When you find a word, tap the word bubble above the board to see\n      some statistics for the word. If you see a star in the word bubble,\n      that means we've added a custom note just for that word!\n      </p>\n      <p>We'll be adding to the Lexicon and adding stats to more puzzles over time.\n      Please enjoy!\n      </p>\n      <p>Love,<br>The Squaredle Squad</p>\n      ",
!1,!0,{label:"Don't show again",action:function(){return GlobalStore.setBoolean("suppress1kDayInstructions",!0)}}),b.return();a.puzzle.intro?setTimeout(function(){return a.maybeShowExplainer("intro")},2500):"2025/03/09"==gTodayDateStr&&2512==a.puzzle.id&&setTimeout(function(){return a.maybeShowExplainer("timeTravel")},2500);b.jumpToEnd()})};
UI.prototype._showWordOfTheDay=function(a){a=assertInstanceOf(a.detail,WordOfTheDayDetail);$("#foundWordOfTheDay").hidden=!1===a.found||this.solution.isSolved();var b=$("#wordOfTheDayTerm");b.textContent=a.wordOfTheDay.term;b.href="https://en.wiktionary.org/wiki/"+a.wordOfTheDay.term+"#English";if(a.wordOfTheDay.pronunciation)if(b=$("#wordOfTheDayPronunciation"),Array.from(a.wordOfTheDay.pronunciation).some(function(g){return 255<g.charCodeAt(0)})&&(b.style.fontStyle="normal"),a.wordOfTheDay.pronunciation.includes("*")){b.innerHTML=
"(";b.style.fontStyle="normal";for(var c=a.wordOfTheDay.pronunciation.split(/\*/),d=!1,e=0;e<c.length;e++){var f=document.createElement(d?"em":"span");f.textContent=c[e];b.appendChild(f);d=!d}b.innerHTML+=")"}else b.textContent="("+a.wordOfTheDay.pronunciation+")";else $("#wordOfTheDayPronunciation").textContent="";$("#wordOfTheDayDefinition").innerHTML=a.wordOfTheDay.html();"2023/10/09"<=gPuzzleManager.puzzleKey&&"2023/10/11-xp">=gPuzzleManager.puzzleKey&&!gPuzzleManager.isWeeklyPuzzle&&($("#wordOfTheDayDefinition").innerHTML+=
'<div class="p">In celebration of Canadian Thanksgiving, Squaredle is focusing on all things Canada!</div><div class="p">For more Canadian fun, check out the hosers at <a id="canuckleLink" href="https://www.canucklegame.ca/" target="_blank">Canuckle</a>.</div>',$("#canuckleLink").addEventListener("click",function(){return ButtonClickEvent.log("wordOfTheDay-canuckle")}));$$("#wordOfTheDayDefinition a").forEach(function(g){"canuckleLink"!=g.id&&g.addEventListener("click",function(){return ButtonClickEvent.log("wordOfTheDay-link")})});
b=$("#wordOfTheDayCredits");b.hidden=!1;a.credits.author&&a.credits.sponsor?b.textContent="Thanks to "+a.credits.sponsor+" for creating and sponsoring\n        this puzzle!":a.credits.author?b.textContent="This puzzle was created by "+a.credits.author+".":a.credits.sponsor?b.textContent="Thanks to "+a.credits.sponsor+" for sponsoring this puzzle!":b.hidden=!0;gPopups.show($("#wordOfTheDay"))};
UI.prototype._screenshot=function(){$("#curWordCount").textContent="0";$("#obscureWordCount").classList.add("hide");$("#betaWatermark").hidden=!0;$$("#board .letterContainer.unnecessary").forEach(function(a){return a.classList.remove("unnecessary")});$("#board .letters .board").classList.remove("primary");$("#progress #filled").style.width="";$("#progress #filled").setAttribute("class","filled0");$("#globalIcon").hidden=!0;$("#timer").hidden=!1;gPageTimer.finish();$("#timer").textContent=(new Date(gPuzzleManager.puzzleKey)).toLocaleString("default",
{month:"short",day:"numeric",year:"numeric"});$("#timer").style.fontSize="2rem";$("#choosePuzzleBtn").hidden=!0;"squaredle"==Config.game&&$("#board .leftButton .boardButton use").setAttribute("href","#icon-audio");$$(".sidebar").forEach(function(a){return a.hidden=!0});$("#belowBoard").classList.add("noAd")};function showMessages(a,b){function c(){var d=document.querySelector("#joinCommunity");if(!d)return!1;gPopups.show(d);setTimeout(function(){return Store.setShowedJoinCommunity()},5E3)}1<location.hash.length||(navigator.userAgent.includes("DuckDuckGo")&&navigator.userAgent.includes("Android")&&!Store.showedBrowserWarning()?(Dialog.show("Unsupported browser","<p>Unfortunately, Squaredle does not work well in DuckDuckGo.</p>\n      <p>DuckDuckGo does not report screen height correctly, so the page will\n      try to scroll when you swipe words.</p>\n      <p>Please try loading squaredle.app in any other browser. Sorry about\n      this!</p>\n      ",
!1,!0),setTimeout(function(){return Store.setShowedBrowserWarning()},5E3)):a.message&&!Store.needsTutorial()?($("#puzzleMessage #puzzleMessageTitle").textContent=a.message.title,$("#puzzleMessage #puzzleMessageBody").innerHTML=a.message.body,gPopups.show($("#puzzleMessage"))):"waffle"==gPuzzleManager.puzzleKey?Store.showedWaffleDialog()||(Store.setShowedWaffleDialog(),Store.needsTutorial()?gPopups.show($("#waffleTutorialMessage")):gPopups.show($("#waffleMessage"))):"waffle2"==gPuzzleManager.puzzleKey?
Store.getBoolean("showedWaffle2Dialog")||(Store.setBoolean("showedWaffle2Dialog",!0),Store.needsTutorial()?gPopups.show($("#waffleTutorialMessage")):gPopups.show($("#waffle2Message"))):"waffle-ingredients"==gPuzzleManager.puzzleKey?Store.getBoolean("showedWaffleIngredientsDialog2")||(Store.setBoolean("showedWaffleIngredientsDialog2",!0),a=$("#waffleIngredientsMessage"),document.referrer.includes("wafflegame.net")?a.querySelector(".fromSquaredle").hidden=!0:a.querySelector(".fromWaffle").hidden=!0,
gPopups.show(a)):"mitmh"!=gPuzzleManager.puzzleKey&&(Store.needsTutorial()&&"canuckle"==(new URL(location.href)).searchParams.get("r")?gPopups.show($("#canuckleTutorialMessage")):Store.needsTutorial()||("bee"==Config.game?Dialog.show("Private Beta",'<p><strong class="primary">Spell words</strong> from the given letters\n      (letters can repeat).</p>\n      <p>All words must include the <strong class="primary">center</strong>\n      letter.</p>\n      <p>At least one word uses all 7 letters\n      (a <strong class="primary">pangram</strong>)!</p>\n      <p><strong>Known issues:</strong></p>\n      <ul>\n        <li>Help text and other Squaredle references need updating</li>\n        <li>Audio settings mess up the UI</li>\n        <li>Backspace button is hard to tap without submitting word</li>\n        <li>Long-press delete button doesn\'t work</li>\n        <li>Limited Squaredle Squared integration</li>\n      </ul>\n      ',
!1,!1):gPremium.isDiscountPeriod&&!Store.showedFeatureMessage()?(gPopups.show($("#featureMessage")),setTimeout(function(){return Store.setShowedFeatureMessage()},3E3)):(setTimeout(function(){if("squaredle"==Config.game&&!gPopups.isPopupOpen()&&!Store.isPremium()&&!Store.showedPremiumOnLaunch()&&(1<b&&Store.getBoolean("isDd3")||5<=b)){var d=$("#premiumSignup");d.classList.add("delayClose");gPopups.show(d);setTimeout(function(){gtagTryCatch("event","show_premium_on_launch");Store.setShowedPremiumOnLaunch()},
2E3);d.classList.remove("delayClose")}},100),!gPopups.isPopupOpen()&&!Store.showedJoinCommunity()&&3<=b&&4>b&&c()))))};(function(){var a=new URL(location.protocol+"//"+location.host+location.pathname);if("undefined"!=typeof navigator.serviceWorker&&!location.hostname.endsWith(".test")&&!a.pathname.includes("/src")){navigator.serviceWorker.register(a+"service-worker.js");var b=null,c=!1;window.addEventListener("beforeinstallprompt",function(d){if(!(gPopups.isPopupOpen()||Store.suppressInstallPrompt()||4>Store.numDaysPlayed())){var e=(new Date).getTime(),f=Store.getInteger("installPromptLastShown");f&&f>e-6048E5||(d.preventDefault(),
c||(Store.setInteger("installPromptLastShown",e),b=d,gPopups.show($("#installPrompt")),c=!0))}});$("#installBtn").addEventListener("click",function(){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return assert(null!=b),Store.setSuppressInstallPrompt(),b.prompt(),gtagTryCatch("event","installInstall"),e.yield(b.userChoice,2);d=e.yieldResult;"accepted"==d.outcome?gtagTryCatch("event","installNativePromptAccepted"):gtagTryCatch("event","installNativePromptDismissed");
b=null;gPopups.isPopupOpen($("#installPrompt"))&&gPopups.close();e.jumpToEnd()})});$("#installDontAskAgainBtn").addEventListener("click",function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){gtagTryCatch("event","installDontAskAgain");Store.setSuppressInstallPrompt();gPopups.isPopupOpen($("#installPrompt"))&&gPopups.close();d.jumpToEnd()})})}})();var Renderer=function(){};Renderer.prototype.showDifficulty=function(){};Renderer.prototype.renderShare=function(){};Renderer.prototype.showLeaderboards=function(a){};Renderer.prototype.maybeShowExplainer=function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){b.jumpToEnd()})};
var GameState=function(a,b,c,d){assert(b);assert(b.words);this.renderer=a;this.puzzle=b;this.solution=c;this.isTutorial=d;this.avgScore=null;this.maxScore=this.puzzle.words.map(function(e){return Solution.scoreWord(e)}).reduce(function(e,f){return e+f},0)};gTryDebug(function(){return gRouter.init()});
gTryDebug(function(){function a(f,g){gtagTryCatch("event","unsupported_browser",{reason:f});$("#unsupportedBrowserReason").textContent=g;onReady(function(){return setTimeout(function(){gPopups.show($("#unsupportedBrowser"));try{gTryDebug(function(){throw Error("Browser is outdated: "+f);})}catch(h){}},500)})}function b(){var f,g,h,k,l,m,q,r,n,p,t,u,y,w,v,z,B,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:$("#loadingText").style.opacity=1;f=new URL(location.href);
if(!gBeta.isBeta){x.jumpTo(2);break}if(gBeta.useBetaPuzzle){$("#loading").hidden=!1;k=parseInt(f.searchParams.get("betaPuzzle"),10);if(isNaN(k)||1==k)k=null;x.setCatchFinallyBlocks(7);return x.yield(gBeta.getBetaPuzzle(k),9)}gBeta.getBetaPuzzle();g=f.searchParams.get("devDate");if(!g){x.jumpTo(2);break}return x.yield(api.devGetPuzzleForDay(g.replace("-","/").replace("-","/"),f.searchParams.get("level")||""),6);case 6:(h=x.yieldResult)?gPuzzleManager.setPuzzlesForDev(h.todayDateStr,h.yesterdayDateStr,
{puzzleStats:h.puzzleStats,puzzles:h.puzzles}):(alert("No puzzle found for "+g),gPopups.show($("#devOptions")));x.jumpTo(2);break;case 9:if(!gBeta.useBetaPuzzle)throw Error();x.leaveTryBlock(8);break;case 7:x.enterCatchBlock(),alert("Preview puzzle "+(k?"#"+k+" ":"")+"not found."),gRouter.removeQueryParam("betaPuzzle");case 8:$("#loading").hidden=!0;case 2:l=f.searchParams.get("level");if(gBeta.useBetaPuzzle||!f.searchParams.get("date")){!gBeta.useBetaPuzzle&&"xp"==l&&gPuzzleManager.fetchLevel(l)&&
($("#betaWatermark").hidden=!1,$("#betaWatermark").textContent="Express");x.jumpTo(10);break}m=f.searchParams.get("date").replace("-","/").replace("-","/");if(l)return alert("Sorry, archive Express puzzles are not available."),gPuzzleManager.playTodayPuzzle(!0),x.return();if(Store.needsTutorial()){x.jumpTo(10);break}if(m==gTodayDateStr){gRouter.updateQueryParams({},["date"]);x.jumpTo(10);break}if(!Store.isPremium()&&!["2023/10/11","2024/07/01"].includes(m)){gRouter.updateQueryParams({},["date"],"#premiumSignup");
x.jumpTo(10);break}return x.yield(api.getPuzzleForDay(m,l),14);case 14:if(q=x.yieldResult,r=DateUtil.fixDstPuzzleDate(m),q)gPuzzleManager.setArchivePuzzle(m,l,q.puzzle),q.solution&&Store.getSolutionForKey(gPuzzleManager.puzzle,gPuzzleManager.puzzleKey,!1).mergeWithApiSolution(q.solution),$("#betaWatermark").hidden=!1,$("#betaWatermark").textContent=r;else return alert("Couldn't find puzzle for date \""+r+"\".\nLoading today's puzzle instead."),gPuzzleManager.playTodayPuzzle(),x.return();case 10:if(gBeta.useBetaPuzzle||
!f.searchParams.get("puzzle")){x.jumpTo(15);break}n=assert(f.searchParams.get("puzzle"));if(n.startsWith("weekly")&&Store.isPremium())return t=gTodayDateStr,"weekly-next"==n&&(t=DateUtil.getStrForDaysPast(-7)),x.yield(api.getPuzzlesForWeek(t),20);if("weekly"==n){alert("Weekly puzzles are only available for Squaredle Squared members.");gRouter.removeQueryParam("puzzle");x.jumpTo(15);break}return x.yield(api.getPuzzleByKey(n),19);case 19:(p=x.yieldResult)?(gPuzzleManager.setSpecialPuzzle(n,p.puzzle),
p.solution&&Store.getSolutionForKey(gPuzzleManager.puzzle,n,!1).mergeWithApiSolution(p.solution)):alert("Couldn't find requested puzzle. Playing today's puzzle instead.");x.jumpTo(15);break;case 20:if((u=x.yieldResult)&&u.puzzles){if(gPuzzleManager.setWeeklyPuzzles(u.puzzles),$("#yesterdayLinks").hidden=!0,$("#yesterdayReveal").hidden=!1,u.solutions)for(y=$jscomp.makeIterator(Object.getOwnPropertyNames(u.solutions)),w=y.next();!w.done;w=y.next())v=w.value,u.solutions[v]&&Store.getSolutionForKey(gPuzzleManager.getPuzzle(v),
v,!1).mergeWithApiSolution(u.solutions[v])}else alert("Couldn't find weekly puzzle. Playing today's puzzle instead."),gRouter.removeQueryParam("puzzle");case 15:gPuzzleManager.migrateBetaPuzzle(),z=gPuzzleManager.puzzle,B=gPuzzleManager.getYesterdayPuzzle(),gPuzzleManager.puzzleKey.startsWith("waffle-ingredients")&&Store.needsTutorial()&&Store.setSkippedTutorial(),Store.needsTutorial()&&(z=tutorialPuzzles[0],document.body.classList.add("tutorial")),A=Store.needsTutorial()?new Solution(z,new Set,new Set,
!0):Store.getSolutionForCurPuzzle(z),!Store.needsTutorial()&&(1<A.words.size||1<A.obscureWords.size)&&api.setInitialSolution(A.getSyncObject()),gTryDebug(function(){return new UI(z,B,A,Store.needsTutorial())}),onReady(function(){return gTryDebug(function(){showMessages(z,c);$("#outerContainer").classList.remove("loading")})}),x.jumpToEnd()}})}if("undefined"!=typeof gPuzzleManager){Store.init();var c=Store.numDaysPlayed();"undefined"==typeof PointerEvent&&a("no_pointer_events","Browser doesn't support PointerEvent.");
onReady(function(){return gTryDebug(function(){return b()})});var d=new Date(0),e=function(f){domReady.then(function(){var g=DateUtil.now();if(!(864E5>g.getTime()-d.getTime())){var h=new VersionNumber($("#version").textContent);(new VersionNumber(f)).isNewerThan(h)&&(api.uploadDebugData({oldVersion:$("#version").textContent.replace("v","")}),localStorage.getItem("squaredle-lastVersion"),d=g,gPopups.show($("#newVersionAvailable")),localStorage.setItem("squaredle-lastVersion",gVersion))}})};Util.setIntervalImmediate(function(){api.getVersion().then(e)},
6E5);gtagTryCatch("set",{past_days_played:c});null==Store.getReferrerUrl()&&Store.setReferrerUrl(document.referrer)}});
})()
